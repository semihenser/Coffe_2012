(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function CI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fv={exports:{}},xa={},hv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=Symbol.for("react.element"),AI=Symbol.for("react.portal"),RI=Symbol.for("react.fragment"),PI=Symbol.for("react.strict_mode"),xI=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),kI=Symbol.for("react.context"),MI=Symbol.for("react.forward_ref"),DI=Symbol.for("react.suspense"),VI=Symbol.for("react.memo"),LI=Symbol.for("react.lazy"),Sp=Symbol.iterator;function FI(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mv=Object.assign,gv={};function Bi(t,e,n){this.props=t,this.context=e,this.refs=gv,this.updater=n||pv}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yv(){}yv.prototype=Bi.prototype;function Gd(t,e,n){this.props=t,this.context=e,this.refs=gv,this.updater=n||pv}var Hd=Gd.prototype=new yv;Hd.constructor=Gd;mv(Hd,Bi.prototype);Hd.isPureReactComponent=!0;var wp=Array.isArray,vv=Object.prototype.hasOwnProperty,qd={current:null},_v={key:!0,ref:!0,__self:!0,__source:!0};function Ev(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)vv.call(e,r)&&!_v.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Es,type:t,key:o,ref:s,props:i,_owner:qd.current}}function UI(t,e){return{$$typeof:Es,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Es}function bI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cp=/\/+/g;function Ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bI(""+t.key):e.toString(36)}function _l(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Es:case AI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ru(s,0):r,wp(i)?(n="",t!=null&&(n=t.replace(Cp,"$&/")+"/"),_l(i,e,n,"",function(f){return f})):i!=null&&(zd(i)&&(i=UI(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Cp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",wp(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Ru(o,l);s+=_l(o,e,n,u,i)}else if(u=FI(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Ru(o,l++),s+=_l(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ws(t,e,n){if(t==null)return t;var r=[],i=0;return _l(t,r,"","",function(o){return e.call(n,o,i++)}),r}function OI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},El={transition:null},BI={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:El,ReactCurrentOwner:qd};function Tv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ws,forEach:function(t,e,n){Ws(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ws(t,function(){e++}),e},toArray:function(t){return Ws(t,function(e){return e})||[]},only:function(t){if(!zd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Bi;ne.Fragment=RI;ne.Profiler=xI;ne.PureComponent=Gd;ne.StrictMode=PI;ne.Suspense=DI;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI;ne.act=Tv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=qd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vv.call(e,u)&&!_v.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Es,type:t.type,key:i,ref:o,props:r,_owner:s}};ne.createContext=function(t){return t={$$typeof:kI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NI,_context:t},t.Consumer=t};ne.createElement=Ev;ne.createFactory=function(t){var e=Ev.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:MI,render:t}};ne.isValidElement=zd;ne.lazy=function(t){return{$$typeof:LI,_payload:{_status:-1,_result:t},_init:OI}};ne.memo=function(t,e){return{$$typeof:VI,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=El.transition;El.transition={};try{t()}finally{El.transition=e}};ne.unstable_act=Tv;ne.useCallback=function(t,e){return _t.current.useCallback(t,e)};ne.useContext=function(t){return _t.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ne.useEffect=function(t,e){return _t.current.useEffect(t,e)};ne.useId=function(){return _t.current.useId()};ne.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return _t.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ne.useRef=function(t){return _t.current.useRef(t)};ne.useState=function(t){return _t.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return _t.current.useTransition()};ne.version="18.3.1";hv.exports=ne;var he=hv.exports;const GI=CI(he);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HI=he,qI=Symbol.for("react.element"),zI=Symbol.for("react.fragment"),$I=Object.prototype.hasOwnProperty,KI=HI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WI={key:!0,ref:!0,__self:!0,__source:!0};function Iv(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)$I.call(e,r)&&!WI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qI,type:t,key:o,ref:s,props:i,_owner:KI.current}}xa.Fragment=zI;xa.jsx=Iv;xa.jsxs=Iv;fv.exports=xa;var M=fv.exports,hc={},Sv={exports:{}},Vt={},wv={exports:{}},Cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,W){var ee=H.length;H.push(W);e:for(;0<ee;){var Ee=ee-1>>>1,pe=H[Ee];if(0<i(pe,W))H[Ee]=W,H[ee]=pe,ee=Ee;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var W=H[0],ee=H.pop();if(ee!==W){H[0]=ee;e:for(var Ee=0,pe=H.length,Ce=pe>>>1;Ee<Ce;){var Wt=2*(Ee+1)-1,Ft=H[Wt],te=Wt+1,re=H[te];if(0>i(Ft,ee))te<pe&&0>i(re,Ft)?(H[Ee]=re,H[te]=ee,Ee=te):(H[Ee]=Ft,H[Wt]=ee,Ee=Wt);else if(te<pe&&0>i(re,ee))H[Ee]=re,H[te]=ee,Ee=te;else break e}}return W}function i(H,W){var ee=H.sortIndex-W.sortIndex;return ee!==0?ee:H.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],f=[],h=1,p=null,m=3,v=!1,w=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=H)r(f),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(f)}}function D(H){if(P=!1,A(H),!w)if(n(u)!==null)w=!0,ln(L);else{var W=n(f);W!==null&&Tt(D,W.startTime-H)}}function L(H,W){w=!1,P&&(P=!1,T(E),E=-1),v=!0;var ee=m;try{for(A(W),p=n(u);p!==null&&(!(p.expirationTime>W)||H&&!k());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,m=p.priorityLevel;var pe=Ee(p.expirationTime<=W);W=t.unstable_now(),typeof pe=="function"?p.callback=pe:p===n(u)&&r(u),A(W)}else r(u);p=n(u)}if(p!==null)var Ce=!0;else{var Wt=n(f);Wt!==null&&Tt(D,Wt.startTime-W),Ce=!1}return Ce}finally{p=null,m=ee,v=!1}}var b=!1,C=null,E=-1,S=5,R=-1;function k(){return!(t.unstable_now()-R<S)}function V(){if(C!==null){var H=t.unstable_now();R=H;var W=!0;try{W=C(!0,H)}finally{W?x():(b=!1,C=null)}}else b=!1}var x;if(typeof I=="function")x=function(){I(V)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,We=oe.port2;oe.port1.onmessage=V,x=function(){We.postMessage(null)}}else x=function(){N(V,0)};function ln(H){C=H,b||(b=!0,x())}function Tt(H,W){E=N(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,ln(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var ee=m;m=W;try{return H()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=m;m=H;try{return W()}finally{m=ee}},t.unstable_scheduleCallback=function(H,W,ee){var Ee=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Ee+ee:Ee):ee=Ee,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ee+pe,H={id:h++,callback:W,priorityLevel:H,startTime:ee,expirationTime:pe,sortIndex:-1},ee>Ee?(H.sortIndex=ee,e(f,H),n(u)===null&&H===n(f)&&(P?(T(E),E=-1):P=!0,Tt(D,ee-Ee))):(H.sortIndex=pe,e(u,H),w||v||(w=!0,ln(L))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var W=m;return function(){var ee=m;m=W;try{return H.apply(this,arguments)}finally{m=ee}}}})(Cv);wv.exports=Cv;var JI=wv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YI=he,Dt=JI;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Av=new Set,$o={};function Or(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for($o[t]=e,t=0;t<e.length;t++)Av.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=Object.prototype.hasOwnProperty,QI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ap={},Rp={};function XI(t){return pc.call(Rp,t)?!0:pc.call(Ap,t)?!1:QI.test(t)?Rp[t]=!0:(Ap[t]=!0,!1)}function ZI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jI(t,e,n,r){if(e===null||typeof e>"u"||ZI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var $d=/[\-:]([a-z])/g;function Kd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($d,Kd);et[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($d,Kd);et[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($d,Kd);et[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wd(t,e,n,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jI(e,n,i,r)&&(n=null),r||i===null?XI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=YI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Js=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),Rv=Symbol.for("react.provider"),Pv=Symbol.for("react.context"),Yd=Symbol.for("react.forward_ref"),gc=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),Qd=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),xv=Symbol.for("react.offscreen"),Pp=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=Pp&&t[Pp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Pu;function So(t){if(Pu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pu=e&&e[1]||""}return`
`+Pu+t}var xu=!1;function Nu(t,e){if(!t||xu)return"";xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{xu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?So(t):""}function eS(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=Nu(t.type,!1),t;case 11:return t=Nu(t.type.render,!1),t;case 1:return t=Nu(t.type,!0),t;default:return""}}function vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case mc:return"Profiler";case Jd:return"StrictMode";case gc:return"Suspense";case yc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pv:return(t.displayName||"Context")+".Consumer";case Rv:return(t._context.displayName||"Context")+".Provider";case Yd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qd:return e=t.displayName||null,e!==null?e:vc(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return vc(t(e))}catch{}}return null}function tS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vc(e);case 8:return e===Jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nS(t){var e=Nv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ys(t){t._valueTracker||(t._valueTracker=nS(t))}function kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _c(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mv(t,e){e=e.checked,e!=null&&Wd(t,"checked",e,!1)}function Ec(t,e){Mv(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tc(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Np(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tc(t,e,n){(e!=="number"||Ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wo=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ic(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(wo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function Dv(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qs,Lv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ko(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(t){rS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mo[e]=Mo[t]})});function Fv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mo.hasOwnProperty(t)&&Mo[t]?(""+e).trim():e+"px"}function Uv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iS=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(t,e){if(e){if(iS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Cc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ac=null;function Xd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rc=null,gi=null,yi=null;function Dp(t){if(t=Ss(t)){if(typeof Rc!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Va(e),Rc(t.stateNode,t.type,e))}}function bv(t){gi?yi?yi.push(t):yi=[t]:gi=t}function Ov(){if(gi){var t=gi,e=yi;if(yi=gi=null,Dp(t),e)for(t=0;t<e.length;t++)Dp(e[t])}}function Bv(t,e){return t(e)}function Gv(){}var ku=!1;function Hv(t,e,n){if(ku)return t(e,n);ku=!0;try{return Bv(t,e,n)}finally{ku=!1,(gi!==null||yi!==null)&&(Gv(),Ov())}}function Wo(t,e){var n=t.stateNode;if(n===null)return null;var r=Va(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Pc=!1;if(Cn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Pc=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Pc=!1}function oS(t,e,n,r,i,o,s,l,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var Do=!1,Bl=null,Gl=!1,xc=null,sS={onError:function(t){Do=!0,Bl=t}};function lS(t,e,n,r,i,o,s,l,u){Do=!1,Bl=null,oS.apply(sS,arguments)}function aS(t,e,n,r,i,o,s,l,u){if(lS.apply(this,arguments),Do){if(Do){var f=Bl;Do=!1,Bl=null}else throw Error(G(198));Gl||(Gl=!0,xc=f)}}function Br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vp(t){if(Br(t)!==t)throw Error(G(188))}function uS(t){var e=t.alternate;if(!e){if(e=Br(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Vp(i),t;if(o===r)return Vp(i),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function zv(t){return t=uS(t),t!==null?$v(t):null}function $v(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$v(t);if(e!==null)return e;t=t.sibling}return null}var Kv=Dt.unstable_scheduleCallback,Lp=Dt.unstable_cancelCallback,cS=Dt.unstable_shouldYield,dS=Dt.unstable_requestPaint,Le=Dt.unstable_now,fS=Dt.unstable_getCurrentPriorityLevel,Zd=Dt.unstable_ImmediatePriority,Wv=Dt.unstable_UserBlockingPriority,Hl=Dt.unstable_NormalPriority,hS=Dt.unstable_LowPriority,Jv=Dt.unstable_IdlePriority,Na=null,dn=null;function pS(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Na,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:yS,mS=Math.log,gS=Math.LN2;function yS(t){return t>>>=0,t===0?32:31-(mS(t)/gS|0)|0}var Xs=64,Zs=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Co(l):(o&=s,o!==0&&(r=Co(o)))}else s=n&~i,s!==0?r=Co(s):o!==0&&(r=Co(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),i=1<<n,r|=t[n],e&=~i;return r}function vS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _S(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-en(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=vS(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yv(){var t=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),t}function Mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function ES(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-en(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function jd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function Qv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xv,ef,Zv,jv,e_,kc=!1,js=[],Jn=null,Yn=null,Qn=null,Jo=new Map,Yo=new Map,Hn=[],TS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fp(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(e.pointerId)}}function po(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ss(e),e!==null&&ef(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IS(t,e,n,r,i){switch(e){case"focusin":return Jn=po(Jn,t,e,n,r,i),!0;case"dragenter":return Yn=po(Yn,t,e,n,r,i),!0;case"mouseover":return Qn=po(Qn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Jo.set(o,po(Jo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Yo.set(o,po(Yo.get(o)||null,t,e,n,r,i)),!0}return!1}function t_(t){var e=Sr(t.target);if(e!==null){var n=Br(e);if(n!==null){if(e=n.tag,e===13){if(e=qv(n),e!==null){t.blockedOn=e,e_(t.priority,function(){Zv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ac=r,n.target.dispatchEvent(r),Ac=null}else return e=Ss(n),e!==null&&ef(e),t.blockedOn=n,!1;e.shift()}return!0}function Up(t,e,n){Tl(t)&&n.delete(e)}function SS(){kc=!1,Jn!==null&&Tl(Jn)&&(Jn=null),Yn!==null&&Tl(Yn)&&(Yn=null),Qn!==null&&Tl(Qn)&&(Qn=null),Jo.forEach(Up),Yo.forEach(Up)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,kc||(kc=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,SS)))}function Qo(t){function e(i){return mo(i,t)}if(0<js.length){mo(js[0],t);for(var n=1;n<js.length;n++){var r=js[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&mo(Jn,t),Yn!==null&&mo(Yn,t),Qn!==null&&mo(Qn,t),Jo.forEach(e),Yo.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)t_(n),n.blockedOn===null&&Hn.shift()}var vi=Dn.ReactCurrentBatchConfig,zl=!0;function wS(t,e,n,r){var i=me,o=vi.transition;vi.transition=null;try{me=1,tf(t,e,n,r)}finally{me=i,vi.transition=o}}function CS(t,e,n,r){var i=me,o=vi.transition;vi.transition=null;try{me=4,tf(t,e,n,r)}finally{me=i,vi.transition=o}}function tf(t,e,n,r){if(zl){var i=Mc(t,e,n,r);if(i===null)Hu(t,e,r,$l,n),Fp(t,r);else if(IS(i,t,e,n,r))r.stopPropagation();else if(Fp(t,r),e&4&&-1<TS.indexOf(t)){for(;i!==null;){var o=Ss(i);if(o!==null&&Xv(o),o=Mc(t,e,n,r),o===null&&Hu(t,e,r,$l,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Hu(t,e,r,null,n)}}var $l=null;function Mc(t,e,n,r){if($l=null,t=Xd(r),t=Sr(t),t!==null)if(e=Br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $l=t,null}function n_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fS()){case Zd:return 1;case Wv:return 4;case Hl:case hS:return 16;case Jv:return 536870912;default:return 16}default:return 16}}var zn=null,nf=null,Il=null;function r_(){if(Il)return Il;var t,e=nf,n=e.length,r,i="value"in zn?zn.value:zn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Il=i.slice(t,1<r?1-r:void 0)}function Sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function bp(){return!1}function Lt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?el:bp,this.isPropagationStopped=bp,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=Lt(Gi),Is=Pe({},Gi,{view:0,detail:0}),AS=Lt(Is),Du,Vu,go,ka=Pe({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(Du=t.screenX-go.screenX,Vu=t.screenY-go.screenY):Vu=Du=0,go=t),Du)},movementY:function(t){return"movementY"in t?t.movementY:Vu}}),Op=Lt(ka),RS=Pe({},ka,{dataTransfer:0}),PS=Lt(RS),xS=Pe({},Is,{relatedTarget:0}),Lu=Lt(xS),NS=Pe({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),kS=Lt(NS),MS=Pe({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DS=Lt(MS),VS=Pe({},Gi,{data:0}),Bp=Lt(VS),LS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function of(){return bS}var OS=Pe({},Is,{key:function(t){if(t.key){var e=LS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(t){return t.type==="keypress"?Sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BS=Lt(OS),GS=Pe({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=Lt(GS),HS=Pe({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),qS=Lt(HS),zS=Pe({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$S=Lt(zS),KS=Pe({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WS=Lt(KS),JS=[9,13,27,32],sf=Cn&&"CompositionEvent"in window,Vo=null;Cn&&"documentMode"in document&&(Vo=document.documentMode);var YS=Cn&&"TextEvent"in window&&!Vo,i_=Cn&&(!sf||Vo&&8<Vo&&11>=Vo),Hp=" ",qp=!1;function o_(t,e){switch(t){case"keyup":return JS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function QS(t,e){switch(t){case"compositionend":return s_(e);case"keypress":return e.which!==32?null:(qp=!0,Hp);case"textInput":return t=e.data,t===Hp&&qp?null:t;default:return null}}function XS(t,e){if(ri)return t==="compositionend"||!sf&&o_(t,e)?(t=r_(),Il=nf=zn=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i_&&e.locale!=="ko"?null:e.data;default:return null}}var ZS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZS[t.type]:e==="textarea"}function l_(t,e,n,r){bv(r),e=Kl(e,"onChange"),0<e.length&&(n=new rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,Xo=null;function jS(t){v_(t,0)}function Ma(t){var e=si(t);if(kv(e))return t}function ew(t,e){if(t==="change")return e}var a_=!1;if(Cn){var Fu;if(Cn){var Uu="oninput"in document;if(!Uu){var $p=document.createElement("div");$p.setAttribute("oninput","return;"),Uu=typeof $p.oninput=="function"}Fu=Uu}else Fu=!1;a_=Fu&&(!document.documentMode||9<document.documentMode)}function Kp(){Lo&&(Lo.detachEvent("onpropertychange",u_),Xo=Lo=null)}function u_(t){if(t.propertyName==="value"&&Ma(Xo)){var e=[];l_(e,Xo,t,Xd(t)),Hv(jS,e)}}function tw(t,e,n){t==="focusin"?(Kp(),Lo=e,Xo=n,Lo.attachEvent("onpropertychange",u_)):t==="focusout"&&Kp()}function nw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ma(Xo)}function rw(t,e){if(t==="click")return Ma(e)}function iw(t,e){if(t==="input"||t==="change")return Ma(e)}function ow(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:ow;function Zo(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pc.call(e,i)||!on(t[i],e[i]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jp(t,e){var n=Wp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wp(n)}}function c_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?c_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function d_(){for(var t=window,e=Ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ol(t.document)}return e}function lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sw(t){var e=d_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&c_(n.ownerDocument.documentElement,n)){if(r!==null&&lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Jp(n,o);var s=Jp(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lw=Cn&&"documentMode"in document&&11>=document.documentMode,ii=null,Dc=null,Fo=null,Vc=!1;function Yp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vc||ii==null||ii!==Ol(r)||(r=ii,"selectionStart"in r&&lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fo&&Zo(Fo,r)||(Fo=r,r=Kl(Dc,"onSelect"),0<r.length&&(e=new rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},bu={},f_={};Cn&&(f_=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Da(t){if(bu[t])return bu[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f_)return bu[t]=e[n];return t}var h_=Da("animationend"),p_=Da("animationiteration"),m_=Da("animationstart"),g_=Da("transitionend"),y_=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){y_.set(t,e),Or(e,[t])}for(var Ou=0;Ou<Qp.length;Ou++){var Bu=Qp[Ou],aw=Bu.toLowerCase(),uw=Bu[0].toUpperCase()+Bu.slice(1);ur(aw,"on"+uw)}ur(h_,"onAnimationEnd");ur(p_,"onAnimationIteration");ur(m_,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(g_,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aS(r,e,void 0,t),t.currentTarget=null}function v_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Xp(i,l,f),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Xp(i,l,f),o=u}}}if(Gl)throw t=xc,Gl=!1,xc=null,t}function Ie(t,e){var n=e[Oc];n===void 0&&(n=e[Oc]=new Set);var r=t+"__bubble";n.has(r)||(__(e,t,2,!1),n.add(r))}function Gu(t,e,n){var r=0;e&&(r|=4),__(n,t,r,e)}var nl="_reactListening"+Math.random().toString(36).slice(2);function jo(t){if(!t[nl]){t[nl]=!0,Av.forEach(function(n){n!=="selectionchange"&&(cw.has(n)||Gu(n,!1,t),Gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nl]||(e[nl]=!0,Gu("selectionchange",!1,e))}}function __(t,e,n,r){switch(n_(e)){case 1:var i=wS;break;case 4:i=CS;break;default:i=tf}n=i.bind(null,e,n,t),i=void 0,!Pc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Sr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Hv(function(){var f=o,h=Xd(n),p=[];e:{var m=y_.get(t);if(m!==void 0){var v=rf,w=t;switch(t){case"keypress":if(Sl(n)===0)break e;case"keydown":case"keyup":v=BS;break;case"focusin":w="focus",v=Lu;break;case"focusout":w="blur",v=Lu;break;case"beforeblur":case"afterblur":v=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=PS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=qS;break;case h_:case p_:case m_:v=kS;break;case g_:v=$S;break;case"scroll":v=AS;break;case"wheel":v=WS;break;case"copy":case"cut":case"paste":v=DS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Gp}var P=(e&4)!==0,N=!P&&t==="scroll",T=P?m!==null?m+"Capture":null:m;P=[];for(var I=f,A;I!==null;){A=I;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,T!==null&&(D=Wo(I,T),D!=null&&P.push(es(I,D,A)))),N)break;I=I.return}0<P.length&&(m=new v(m,w,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Ac&&(w=n.relatedTarget||n.fromElement)&&(Sr(w)||w[An]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=f,w=w?Sr(w):null,w!==null&&(N=Br(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=f),v!==w)){if(P=Op,D="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=Gp,D="onPointerLeave",T="onPointerEnter",I="pointer"),N=v==null?m:si(v),A=w==null?m:si(w),m=new P(D,I+"leave",v,n,h),m.target=N,m.relatedTarget=A,D=null,Sr(h)===f&&(P=new P(T,I+"enter",w,n,h),P.target=A,P.relatedTarget=N,D=P),N=D,v&&w)t:{for(P=v,T=w,I=0,A=P;A;A=Jr(A))I++;for(A=0,D=T;D;D=Jr(D))A++;for(;0<I-A;)P=Jr(P),I--;for(;0<A-I;)T=Jr(T),A--;for(;I--;){if(P===T||T!==null&&P===T.alternate)break t;P=Jr(P),T=Jr(T)}P=null}else P=null;v!==null&&Zp(p,m,v,P,!1),w!==null&&N!==null&&Zp(p,N,w,P,!0)}}e:{if(m=f?si(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=ew;else if(zp(m))if(a_)L=iw;else{L=nw;var b=tw}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=rw);if(L&&(L=L(t,f))){l_(p,L,n,h);break e}b&&b(t,m,f),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&Tc(m,"number",m.value)}switch(b=f?si(f):window,t){case"focusin":(zp(b)||b.contentEditable==="true")&&(ii=b,Dc=f,Fo=null);break;case"focusout":Fo=Dc=ii=null;break;case"mousedown":Vc=!0;break;case"contextmenu":case"mouseup":case"dragend":Vc=!1,Yp(p,n,h);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":Yp(p,n,h)}var C;if(sf)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ri?o_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(i_&&n.locale!=="ko"&&(ri||E!=="onCompositionStart"?E==="onCompositionEnd"&&ri&&(C=r_()):(zn=h,nf="value"in zn?zn.value:zn.textContent,ri=!0)),b=Kl(f,E),0<b.length&&(E=new Bp(E,t,null,n,h),p.push({event:E,listeners:b}),C?E.data=C:(C=s_(n),C!==null&&(E.data=C)))),(C=YS?QS(t,n):XS(t,n))&&(f=Kl(f,"onBeforeInput"),0<f.length&&(h=new Bp("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=C))}v_(p,e)})}function es(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Wo(t,n),o!=null&&r.unshift(es(t,o,i)),o=Wo(t,e),o!=null&&r.push(es(t,o,i))),t=t.return}return r}function Jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Wo(n,o),u!=null&&s.unshift(es(n,u,l))):i||(u=Wo(n,o),u!=null&&s.push(es(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var dw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function jp(t){return(typeof t=="string"?t:""+t).replace(dw,`
`).replace(fw,"")}function rl(t,e,n){if(e=jp(e),jp(t)!==e&&n)throw Error(G(425))}function Wl(){}var Lc=null,Fc=null;function Uc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bc=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,pw=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(t){return em.resolve(null).then(t).catch(mw)}:bc;function mw(t){setTimeout(function(){throw t})}function qu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Qo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qo(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),cn="__reactFiber$"+Hi,ts="__reactProps$"+Hi,An="__reactContainer$"+Hi,Oc="__reactEvents$"+Hi,gw="__reactListeners$"+Hi,yw="__reactHandles$"+Hi;function Sr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tm(t);t!==null;){if(n=t[cn])return n;t=tm(t)}return e}t=n,n=t.parentNode}return null}function Ss(t){return t=t[cn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Va(t){return t[ts]||null}var Bc=[],li=-1;function cr(t){return{current:t}}function Se(t){0>li||(t.current=Bc[li],Bc[li]=null,li--)}function _e(t,e){li++,Bc[li]=t.current,t.current=e}var or={},ft=cr(or),At=cr(!1),kr=or;function Ri(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function Jl(){Se(At),Se(ft)}function nm(t,e,n){if(ft.current!==or)throw Error(G(168));_e(ft,e),_e(At,n)}function E_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,tS(t)||"Unknown",i));return Pe({},n,r)}function Yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,kr=ft.current,_e(ft,t),_e(At,At.current),!0}function rm(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=E_(t,e,kr),r.__reactInternalMemoizedMergedChildContext=t,Se(At),Se(ft),_e(ft,t)):Se(At),_e(At,n)}var En=null,La=!1,zu=!1;function T_(t){En===null?En=[t]:En.push(t)}function vw(t){La=!0,T_(t)}function dr(){if(!zu&&En!==null){zu=!0;var t=0,e=me;try{var n=En;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}En=null,La=!1}catch(i){throw En!==null&&(En=En.slice(t+1)),Kv(Zd,dr),i}finally{me=e,zu=!1}}return null}var ai=[],ui=0,Ql=null,Xl=0,Ut=[],bt=0,Mr=null,Tn=1,In="";function _r(t,e){ai[ui++]=Xl,ai[ui++]=Ql,Ql=t,Xl=e}function I_(t,e,n){Ut[bt++]=Tn,Ut[bt++]=In,Ut[bt++]=Mr,Mr=t;var r=Tn;t=In;var i=32-en(r)-1;r&=~(1<<i),n+=1;var o=32-en(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Tn=1<<32-en(e)+i|n<<i|r,In=o+t}else Tn=1<<o|n<<i|r,In=t}function af(t){t.return!==null&&(_r(t,1),I_(t,1,0))}function uf(t){for(;t===Ql;)Ql=ai[--ui],ai[ui]=null,Xl=ai[--ui],ai[ui]=null;for(;t===Mr;)Mr=Ut[--bt],Ut[bt]=null,In=Ut[--bt],Ut[bt]=null,Tn=Ut[--bt],Ut[bt]=null}var Mt=null,kt=null,we=!1,Zt=null;function S_(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function im(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,kt=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mr!==null?{id:Tn,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,kt=null,!0):!1;default:return!1}}function Gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hc(t){if(we){var e=kt;if(e){var n=e;if(!im(t,e)){if(Gc(t))throw Error(G(418));e=Xn(n.nextSibling);var r=Mt;e&&im(t,e)?S_(r,n):(t.flags=t.flags&-4097|2,we=!1,Mt=t)}}else{if(Gc(t))throw Error(G(418));t.flags=t.flags&-4097|2,we=!1,Mt=t}}}function om(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function il(t){if(t!==Mt)return!1;if(!we)return om(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uc(t.type,t.memoizedProps)),e&&(e=kt)){if(Gc(t))throw w_(),Error(G(418));for(;e;)S_(t,e),e=Xn(e.nextSibling)}if(om(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kt=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kt=null}}else kt=Mt?Xn(t.stateNode.nextSibling):null;return!0}function w_(){for(var t=kt;t;)t=Xn(t.nextSibling)}function Pi(){kt=Mt=null,we=!1}function cf(t){Zt===null?Zt=[t]:Zt.push(t)}var _w=Dn.ReactCurrentBatchConfig;function yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function ol(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sm(t){var e=t._init;return e(t._payload)}function C_(t){function e(T,I){if(t){var A=T.deletions;A===null?(T.deletions=[I],T.flags|=16):A.push(I)}}function n(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function r(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function i(T,I){return T=tr(T,I),T.index=0,T.sibling=null,T}function o(T,I,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<I?(T.flags|=2,I):A):(T.flags|=2,I)):(T.flags|=1048576,I)}function s(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,I,A,D){return I===null||I.tag!==6?(I=Xu(A,T.mode,D),I.return=T,I):(I=i(I,A),I.return=T,I)}function u(T,I,A,D){var L=A.type;return L===ni?h(T,I,A.props.children,D,A.key):I!==null&&(I.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Bn&&sm(L)===I.type)?(D=i(I,A.props),D.ref=yo(T,I,A),D.return=T,D):(D=Nl(A.type,A.key,A.props,null,T.mode,D),D.ref=yo(T,I,A),D.return=T,D)}function f(T,I,A,D){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=Zu(A,T.mode,D),I.return=T,I):(I=i(I,A.children||[]),I.return=T,I)}function h(T,I,A,D,L){return I===null||I.tag!==7?(I=Pr(A,T.mode,D,L),I.return=T,I):(I=i(I,A),I.return=T,I)}function p(T,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Xu(""+I,T.mode,A),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Js:return A=Nl(I.type,I.key,I.props,null,T.mode,A),A.ref=yo(T,null,I),A.return=T,A;case ti:return I=Zu(I,T.mode,A),I.return=T,I;case Bn:var D=I._init;return p(T,D(I._payload),A)}if(wo(I)||fo(I))return I=Pr(I,T.mode,A,null),I.return=T,I;ol(T,I)}return null}function m(T,I,A,D){var L=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return L!==null?null:l(T,I,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Js:return A.key===L?u(T,I,A,D):null;case ti:return A.key===L?f(T,I,A,D):null;case Bn:return L=A._init,m(T,I,L(A._payload),D)}if(wo(A)||fo(A))return L!==null?null:h(T,I,A,D,null);ol(T,A)}return null}function v(T,I,A,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(A)||null,l(I,T,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Js:return T=T.get(D.key===null?A:D.key)||null,u(I,T,D,L);case ti:return T=T.get(D.key===null?A:D.key)||null,f(I,T,D,L);case Bn:var b=D._init;return v(T,I,A,b(D._payload),L)}if(wo(D)||fo(D))return T=T.get(A)||null,h(I,T,D,L,null);ol(I,D)}return null}function w(T,I,A,D){for(var L=null,b=null,C=I,E=I=0,S=null;C!==null&&E<A.length;E++){C.index>E?(S=C,C=null):S=C.sibling;var R=m(T,C,A[E],D);if(R===null){C===null&&(C=S);break}t&&C&&R.alternate===null&&e(T,C),I=o(R,I,E),b===null?L=R:b.sibling=R,b=R,C=S}if(E===A.length)return n(T,C),we&&_r(T,E),L;if(C===null){for(;E<A.length;E++)C=p(T,A[E],D),C!==null&&(I=o(C,I,E),b===null?L=C:b.sibling=C,b=C);return we&&_r(T,E),L}for(C=r(T,C);E<A.length;E++)S=v(C,T,E,A[E],D),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?E:S.key),I=o(S,I,E),b===null?L=S:b.sibling=S,b=S);return t&&C.forEach(function(k){return e(T,k)}),we&&_r(T,E),L}function P(T,I,A,D){var L=fo(A);if(typeof L!="function")throw Error(G(150));if(A=L.call(A),A==null)throw Error(G(151));for(var b=L=null,C=I,E=I=0,S=null,R=A.next();C!==null&&!R.done;E++,R=A.next()){C.index>E?(S=C,C=null):S=C.sibling;var k=m(T,C,R.value,D);if(k===null){C===null&&(C=S);break}t&&C&&k.alternate===null&&e(T,C),I=o(k,I,E),b===null?L=k:b.sibling=k,b=k,C=S}if(R.done)return n(T,C),we&&_r(T,E),L;if(C===null){for(;!R.done;E++,R=A.next())R=p(T,R.value,D),R!==null&&(I=o(R,I,E),b===null?L=R:b.sibling=R,b=R);return we&&_r(T,E),L}for(C=r(T,C);!R.done;E++,R=A.next())R=v(C,T,E,R.value,D),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),I=o(R,I,E),b===null?L=R:b.sibling=R,b=R);return t&&C.forEach(function(V){return e(T,V)}),we&&_r(T,E),L}function N(T,I,A,D){if(typeof A=="object"&&A!==null&&A.type===ni&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Js:e:{for(var L=A.key,b=I;b!==null;){if(b.key===L){if(L=A.type,L===ni){if(b.tag===7){n(T,b.sibling),I=i(b,A.props.children),I.return=T,T=I;break e}}else if(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Bn&&sm(L)===b.type){n(T,b.sibling),I=i(b,A.props),I.ref=yo(T,b,A),I.return=T,T=I;break e}n(T,b);break}else e(T,b);b=b.sibling}A.type===ni?(I=Pr(A.props.children,T.mode,D,A.key),I.return=T,T=I):(D=Nl(A.type,A.key,A.props,null,T.mode,D),D.ref=yo(T,I,A),D.return=T,T=D)}return s(T);case ti:e:{for(b=A.key;I!==null;){if(I.key===b)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(T,I.sibling),I=i(I,A.children||[]),I.return=T,T=I;break e}else{n(T,I);break}else e(T,I);I=I.sibling}I=Zu(A,T.mode,D),I.return=T,T=I}return s(T);case Bn:return b=A._init,N(T,I,b(A._payload),D)}if(wo(A))return w(T,I,A,D);if(fo(A))return P(T,I,A,D);ol(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(T,I.sibling),I=i(I,A),I.return=T,T=I):(n(T,I),I=Xu(A,T.mode,D),I.return=T,T=I),s(T)):n(T,I)}return N}var xi=C_(!0),A_=C_(!1),Zl=cr(null),jl=null,ci=null,df=null;function ff(){df=ci=jl=null}function hf(t){var e=Zl.current;Se(Zl),t._currentValue=e}function qc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _i(t,e){jl=t,df=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(df!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(jl===null)throw Error(G(308));ci=t,jl.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var wr=null;function pf(t){wr===null?wr=[t]:wr.push(t)}function R_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function mf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,pf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function wl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}function lm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ea(t,e,n,r){var i=t.updateQueue;Gn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,s===null?o=f:s.next=f,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=f=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,P=l;switch(m=e,v=n,P.tag){case 1:if(w=P.payload,typeof w=="function"){p=w.call(v,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=P.payload,m=typeof w=="function"?w.call(v,p,m):w,m==null)break e;p=Pe({},p,m);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=v,u=p):h=h.next=v,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Vr|=s,t.lanes=s,t.memoizedState=p}}function am(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var ws={},fn=cr(ws),ns=cr(ws),rs=cr(ws);function Cr(t){if(t===ws)throw Error(G(174));return t}function gf(t,e){switch(_e(rs,e),_e(ns,t),_e(fn,ws),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sc(e,t)}Se(fn),_e(fn,e)}function Ni(){Se(fn),Se(ns),Se(rs)}function x_(t){Cr(rs.current);var e=Cr(fn.current),n=Sc(e,t.type);e!==n&&(_e(ns,t),_e(fn,n))}function yf(t){ns.current===t&&(Se(fn),Se(ns))}var Ae=cr(0);function ta(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $u=[];function vf(){for(var t=0;t<$u.length;t++)$u[t]._workInProgressVersionPrimary=null;$u.length=0}var Cl=Dn.ReactCurrentDispatcher,Ku=Dn.ReactCurrentBatchConfig,Dr=0,Re=null,be=null,ze=null,na=!1,Uo=!1,is=0,Ew=0;function ot(){throw Error(G(321))}function _f(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Ef(t,e,n,r,i,o){if(Dr=o,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cl.current=t===null||t.memoizedState===null?ww:Cw,t=n(r,i),Uo){o=0;do{if(Uo=!1,is=0,25<=o)throw Error(G(301));o+=1,ze=be=null,e.updateQueue=null,Cl.current=Aw,t=n(r,i)}while(Uo)}if(Cl.current=ra,e=be!==null&&be.next!==null,Dr=0,ze=be=Re=null,na=!1,e)throw Error(G(300));return t}function Tf(){var t=is!==0;return is=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Re.memoizedState=ze=t:ze=ze.next=t,ze}function $t(){if(be===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=ze===null?Re.memoizedState:ze.next;if(e!==null)ze=e,be=t;else{if(t===null)throw Error(G(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},ze===null?Re.memoizedState=ze=t:ze=ze.next=t}return ze}function os(t,e){return typeof e=="function"?e(t):e}function Wu(t){var e=$t(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,f=o;do{var h=f.lane;if((Dr&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Re.lanes|=h,Vr|=h}f=f.next}while(f!==null&&f!==o);u===null?s=r:u.next=l,on(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Re.lanes|=o,Vr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ju(t){var e=$t(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);on(o,e.memoizedState)||(Ct=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function N_(){}function k_(t,e){var n=Re,r=$t(),i=e(),o=!on(r.memoizedState,i);if(o&&(r.memoizedState=i,Ct=!0),r=r.queue,If(V_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,ss(9,D_.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(G(349));Dr&30||M_(n,e,i)}return i}function M_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D_(t,e,n,r){e.value=n,e.getSnapshot=r,L_(e)&&F_(t)}function V_(t,e,n){return n(function(){L_(e)&&F_(t)})}function L_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function F_(t){var e=Rn(t,1);e!==null&&tn(e,t,1,-1)}function um(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},e.queue=t,t=t.dispatch=Sw.bind(null,Re,t),[e.memoizedState,t]}function ss(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function U_(){return $t().memoizedState}function Al(t,e,n,r){var i=un();Re.flags|=t,i.memoizedState=ss(1|e,n,void 0,r===void 0?null:r)}function Fa(t,e,n,r){var i=$t();r=r===void 0?null:r;var o=void 0;if(be!==null){var s=be.memoizedState;if(o=s.destroy,r!==null&&_f(r,s.deps)){i.memoizedState=ss(e,n,o,r);return}}Re.flags|=t,i.memoizedState=ss(1|e,n,o,r)}function cm(t,e){return Al(8390656,8,t,e)}function If(t,e){return Fa(2048,8,t,e)}function b_(t,e){return Fa(4,2,t,e)}function O_(t,e){return Fa(4,4,t,e)}function B_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G_(t,e,n){return n=n!=null?n.concat([t]):null,Fa(4,4,B_.bind(null,e,t),n)}function Sf(){}function H_(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function q_(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z_(t,e,n){return Dr&21?(on(n,e)||(n=Yv(),Re.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function Tw(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Ku.transition;Ku.transition={};try{t(!1),e()}finally{me=n,Ku.transition=r}}function $_(){return $t().memoizedState}function Iw(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K_(t))W_(e,n);else if(n=R_(t,e,n,r),n!==null){var i=yt();tn(n,t,r,i),J_(n,e,r)}}function Sw(t,e,n){var r=er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K_(t))W_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,on(l,s)){var u=e.interleaved;u===null?(i.next=i,pf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=R_(t,e,i,r),n!==null&&(i=yt(),tn(n,t,r,i),J_(n,e,r))}}function K_(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function W_(t,e){Uo=na=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function J_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}var ra={readContext:zt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},ww={readContext:zt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:cm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Al(4194308,4,B_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Al(4194308,4,t,e)},useInsertionEffect:function(t,e){return Al(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Iw.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:um,useDebugValue:Sf,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=um(!1),e=t[0];return t=Tw.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=un();if(we){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),$e===null)throw Error(G(349));Dr&30||M_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,cm(V_.bind(null,r,o,t),[t]),r.flags|=2048,ss(9,D_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=un(),e=$e.identifierPrefix;if(we){var n=In,r=Tn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ew++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cw={readContext:zt,useCallback:H_,useContext:zt,useEffect:If,useImperativeHandle:G_,useInsertionEffect:b_,useLayoutEffect:O_,useMemo:q_,useReducer:Wu,useRef:U_,useState:function(){return Wu(os)},useDebugValue:Sf,useDeferredValue:function(t){var e=$t();return z_(e,be.memoizedState,t)},useTransition:function(){var t=Wu(os)[0],e=$t().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1},Aw={readContext:zt,useCallback:H_,useContext:zt,useEffect:If,useImperativeHandle:G_,useInsertionEffect:b_,useLayoutEffect:O_,useMemo:q_,useReducer:Ju,useRef:U_,useState:function(){return Ju(os)},useDebugValue:Sf,useDeferredValue:function(t){var e=$t();return be===null?e.memoizedState=t:z_(e,be.memoizedState,t)},useTransition:function(){var t=Ju(os)[0],e=$t().memoizedState;return[t,e]},useMutableSource:N_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ua={isMounted:function(t){return(t=t._reactInternals)?Br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=er(t),o=Sn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Zn(t,o,i),e!==null&&(tn(e,t,i,r),wl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=er(t),o=Sn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Zn(t,o,i),e!==null&&(tn(e,t,i,r),wl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=er(t),i=Sn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zn(t,i,r),e!==null&&(tn(e,t,r,n),wl(e,t,r))}};function dm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Zo(n,r)||!Zo(i,o):!0}function Y_(t,e,n){var r=!1,i=or,o=e.contextType;return typeof o=="object"&&o!==null?o=zt(o):(i=Rt(e)?kr:ft.current,r=e.contextTypes,o=(r=r!=null)?Ri(t,i):or),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ua,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function fm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ua.enqueueReplaceState(e,e.state,null)}function $c(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},mf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=zt(o):(o=Rt(e)?kr:ft.current,i.context=Ri(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(zc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ua.enqueueReplaceState(i,i.state,null),ea(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=eS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Rw=typeof WeakMap=="function"?WeakMap:Map;function Q_(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oa||(oa=!0,nd=r),Kc(t,e)},n}function X_(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Kc(t,e),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function hm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Rw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Gw.bind(null,t,e,n),e.then(t,t))}function pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var Pw=Dn.ReactCurrentOwner,Ct=!1;function gt(t,e,n,r){e.child=t===null?A_(e,null,n,r):xi(e,t.child,n,r)}function gm(t,e,n,r,i){n=n.render;var o=e.ref;return _i(e,i),r=Ef(t,e,n,r,o,i),n=Tf(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(we&&n&&af(e),e.flags|=1,gt(t,e,r,i),e.child)}function ym(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!kf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Z_(t,e,o,r,i)):(t=Nl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Zo,n(s,r)&&t.ref===e.ref)return Pn(t,e,i)}return e.flags|=1,t=tr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Z_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Zo(o,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Pn(t,e,i)}return Wc(t,e,n,r,i)}function j_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(fi,Nt),Nt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(fi,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,_e(fi,Nt),Nt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,_e(fi,Nt),Nt|=r;return gt(t,e,i,n),e.child}function e0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wc(t,e,n,r,i){var o=Rt(n)?kr:ft.current;return o=Ri(e,o),_i(e,i),n=Ef(t,e,n,r,o,i),r=Tf(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(we&&r&&af(e),e.flags|=1,gt(t,e,n,i),e.child)}function vm(t,e,n,r,i){if(Rt(n)){var o=!0;Yl(e)}else o=!1;if(_i(e,i),e.stateNode===null)Rl(t,e),Y_(e,n,r),$c(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=zt(f):(f=Rt(n)?kr:ft.current,f=Ri(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==f)&&fm(e,s,r,f),Gn=!1;var m=e.memoizedState;s.state=m,ea(e,r,s,i),u=e.memoizedState,l!==r||m!==u||At.current||Gn?(typeof h=="function"&&(zc(e,n,h,r),u=e.memoizedState),(l=Gn||dm(e,n,l,r,m,u,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,P_(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:Qt(e.type,l),s.props=f,p=e.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=zt(u):(u=Rt(n)?kr:ft.current,u=Ri(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&fm(e,s,r,u),Gn=!1,m=e.memoizedState,s.state=m,ea(e,r,s,i);var w=e.memoizedState;l!==p||m!==w||At.current||Gn?(typeof v=="function"&&(zc(e,n,v,r),w=e.memoizedState),(f=Gn||dm(e,n,f,r,m,w,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=u,r=f):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Jc(t,e,n,r,o,i)}function Jc(t,e,n,r,i,o){e0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&rm(e,n,!1),Pn(t,e,o);r=e.stateNode,Pw.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=xi(e,t.child,null,o),e.child=xi(e,null,l,o)):gt(t,e,l,o),e.memoizedState=r.state,i&&rm(e,n,!0),e.child}function t0(t){var e=t.stateNode;e.pendingContext?nm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nm(t,e.context,!1),gf(t,e.containerInfo)}function _m(t,e,n,r,i){return Pi(),cf(i),e.flags|=256,gt(t,e,n,r),e.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Qc(t){return{baseLanes:t,cachePool:null,transitions:null}}function n0(t,e,n){var r=e.pendingProps,i=Ae.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ae,i&1),t===null)return Hc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ba(s,r,0,null),t=Pr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Qc(n),e.memoizedState=Yc,t):wf(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xw(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=tr(l,o):(o=Pr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Qc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Yc,r}return o=t.child,t=o.sibling,r=tr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wf(t,e){return e=Ba({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sl(t,e,n,r){return r!==null&&cf(r),xi(e,t.child,null,n),t=wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xw(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(G(422))),sl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ba({mode:"visible",children:r.children},i,0,null),o=Pr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&xi(e,t.child,null,s),e.child.memoizedState=Qc(s),e.memoizedState=Yc,o);if(!(e.mode&1))return sl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(G(419)),r=Yu(o,r,void 0),sl(t,e,s,r)}if(l=(s&t.childLanes)!==0,Ct||l){if(r=$e,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Rn(t,i),tn(r,t,i,-1))}return Nf(),r=Yu(Error(G(421))),sl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,kt=Xn(i.nextSibling),Mt=e,we=!0,Zt=null,t!==null&&(Ut[bt++]=Tn,Ut[bt++]=In,Ut[bt++]=Mr,Tn=t.id,In=t.overflow,Mr=e),e=wf(e,r.children),e.flags|=4096,e)}function Em(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qc(t.return,e,n)}function Qu(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function r0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(gt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Em(t,n,e);else if(t.tag===19)Em(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ta(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qu(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ta(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qu(e,!0,n,null,o);break;case"together":Qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nw(t,e,n){switch(e.tag){case 3:t0(e),Pi();break;case 5:x_(e);break;case 1:Rt(e.type)&&Yl(e);break;case 4:gf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(Zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?n0(t,e,n):(_e(Ae,Ae.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,j_(t,e,n)}return Pn(t,e,n)}var i0,Xc,o0,s0;i0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xc=function(){};o0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cr(fn.current);var o=null;switch(n){case"input":i=_c(t,i),r=_c(t,r),o=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),o=[];break;case"textarea":i=Ic(t,i),r=Ic(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wl)}wc(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&($o.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&($o.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Ie("scroll",t),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};s0=function(t,e,n,r){n!==r&&(e.flags|=4)};function vo(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kw(t,e,n){var r=e.pendingProps;switch(uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return Rt(e.type)&&Jl(),st(e),null;case 3:return r=e.stateNode,Ni(),Se(At),Se(ft),vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(od(Zt),Zt=null))),Xc(t,e),st(e),null;case 5:yf(e);var i=Cr(rs.current);if(n=e.type,t!==null&&e.stateNode!=null)o0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return st(e),null}if(t=Cr(fn.current),il(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[cn]=e,r[ts]=o,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Ao.length;i++)Ie(Ao[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":xp(r,o),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ie("invalid",r);break;case"textarea":kp(r,o),Ie("invalid",r)}wc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&rl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&rl(r.textContent,l,t),i=["children",""+l]):$o.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Ys(r),Np(r,o,!0);break;case"textarea":Ys(r),Mp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Wl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[cn]=e,t[ts]=r,i0(t,e,!1,!1),e.stateNode=t;e:{switch(s=Cc(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ao.length;i++)Ie(Ao[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":xp(t,r),i=_c(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":kp(t,r),i=Ic(t,r),Ie("invalid",t);break;default:i=r}wc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Uv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lv(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ko(t,u):typeof u=="number"&&Ko(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&($o.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ie("scroll",t):u!=null&&Wd(t,o,u,s))}switch(n){case"input":Ys(t),Np(t,r,!1);break;case"textarea":Ys(t),Mp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?mi(t,!!r.multiple,o,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)s0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Cr(rs.current),Cr(fn.current),il(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(o=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return st(e),null;case 13:if(Se(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&kt!==null&&e.mode&1&&!(e.flags&128))w_(),Pi(),e.flags|=98560,o=!1;else if(o=il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[cn]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),o=!1}else Zt!==null&&(od(Zt),Zt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Be===0&&(Be=3):Nf())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return Ni(),Xc(t,e),t===null&&jo(e.stateNode.containerInfo),st(e),null;case 10:return hf(e.type._context),st(e),null;case 17:return Rt(e.type)&&Jl(),st(e),null;case 19:if(Se(Ae),o=e.memoizedState,o===null)return st(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)vo(o,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ta(t),s!==null){for(e.flags|=128,vo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}o.tail!==null&&Le()>Mi&&(e.flags|=128,r=!0,vo(o,!1),e.lanes=4194304)}else{if(!r)if(t=ta(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!we)return st(e),null}else 2*Le()-o.renderingStartTime>Mi&&n!==1073741824&&(e.flags|=128,r=!0,vo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Le(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return xf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function Mw(t,e){switch(uf(e),e.tag){case 1:return Rt(e.type)&&Jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),Se(At),Se(ft),vf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yf(e),null;case 13:if(Se(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ae),null;case 4:return Ni(),null;case 10:return hf(e.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var ll=!1,ut=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,$=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Zc(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Tm=!1;function Vw(t,e){if(Lc=zl,t=d_(),lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,f=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++f===i&&(l=s),m===o&&++h===r&&(u=s),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fc={focusedElem:t,selectionRange:n},zl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var P=w.memoizedProps,N=w.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?P:Qt(e.type,P),N);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(D){Me(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return w=Tm,Tm=!1,w}function bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zc(e,n,o)}i=i.next}while(i!==r)}}function ba(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l0(t){var e=t.alternate;e!==null&&(t.alternate=null,l0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[ts],delete e[Oc],delete e[gw],delete e[yw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a0(t){return t.tag===5||t.tag===3||t.tag===4}function Im(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wl));else if(r!==4&&(t=t.child,t!==null))for(ed(t,e,n),t=t.sibling;t!==null;)ed(t,e,n),t=t.sibling}function td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(td(t,e,n),t=t.sibling;t!==null;)td(t,e,n),t=t.sibling}var Ye=null,Xt=!1;function On(t,e,n){for(n=n.child;n!==null;)u0(t,e,n),n=n.sibling}function u0(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Na,n)}catch{}switch(n.tag){case 5:ut||di(n,e);case 6:var r=Ye,i=Xt;Ye=null,On(t,e,n),Ye=r,Xt=i,Ye!==null&&(Xt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Xt?(t=Ye,n=n.stateNode,t.nodeType===8?qu(t.parentNode,n):t.nodeType===1&&qu(t,n),Qo(t)):qu(Ye,n.stateNode));break;case 4:r=Ye,i=Xt,Ye=n.stateNode.containerInfo,Xt=!0,On(t,e,n),Ye=r,Xt=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Zc(n,e,s),i=i.next}while(i!==r)}On(t,e,n);break;case 1:if(!ut&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,On(t,e,n),ut=r):On(t,e,n);break;default:On(t,e,n)}}function Sm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Dw),e.forEach(function(r){var i=qw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Xt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Xt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Ye===null)throw Error(G(160));u0(o,s,i),Ye=null,Xt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Me(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)c0(e,t),e=e.sibling}function c0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),an(t),r&4){try{bo(3,t,t.return),ba(3,t)}catch(P){Me(t,t.return,P)}try{bo(5,t,t.return)}catch(P){Me(t,t.return,P)}}break;case 1:Yt(e,t),an(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(Yt(e,t),an(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var i=t.stateNode;try{Ko(i,"")}catch(P){Me(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Mv(i,o),Cc(l,s);var f=Cc(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?Uv(i,p):h==="dangerouslySetInnerHTML"?Lv(i,p):h==="children"?Ko(i,p):Wd(i,h,p,f)}switch(l){case"input":Ec(i,o);break;case"textarea":Dv(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?mi(i,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?mi(i,!!o.multiple,o.defaultValue,!0):mi(i,!!o.multiple,o.multiple?[]:"",!1))}i[ts]=o}catch(P){Me(t,t.return,P)}}break;case 6:if(Yt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Me(t,t.return,P)}}break;case 3:if(Yt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qo(e.containerInfo)}catch(P){Me(t,t.return,P)}break;case 4:Yt(e,t),an(t);break;case 13:Yt(e,t),an(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Rf=Le())),r&4&&Sm(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(f=ut)||h,Yt(e,t),ut=f):Yt(e,t),an(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(p=$=h;$!==null;){switch(m=$,v=m.child,m.tag){case 0:case 11:case 14:case 15:bo(4,m,m.return);break;case 1:di(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(P){Me(r,n,P)}}break;case 5:di(m,m.return);break;case 22:if(m.memoizedState!==null){Cm(p);continue}}v!==null?(v.return=m,$=v):Cm(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Fv("display",s))}catch(P){Me(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(P){Me(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yt(e,t),an(t),r&4&&Sm(t);break;case 21:break;default:Yt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a0(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ko(i,""),r.flags&=-33);var o=Im(t);td(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Im(t);ed(t,l,s);break;default:throw Error(G(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lw(t,e,n){$=t,d0(t)}function d0(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ll;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ut;l=ll;var f=ut;if(ll=s,(ut=u)&&!f)for($=i;$!==null;)s=$,u=s.child,s.tag===22&&s.memoizedState!==null?Am(i):u!==null?(u.return=s,$=u):Am(i);for(;o!==null;)$=o,d0(o),o=o.sibling;$=i,ll=l,ut=f}wm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$=o):wm(t)}}function wm(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||ba(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&am(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}am(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Qo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ut||e.flags&512&&jc(e)}catch(m){Me(e,e.return,m)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Cm(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Am(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ba(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Me(e,i,u)}}var o=e.return;try{jc(e)}catch(u){Me(e,o,u)}break;case 5:var s=e.return;try{jc(e)}catch(u){Me(e,s,u)}}}catch(u){Me(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Fw=Math.ceil,ia=Dn.ReactCurrentDispatcher,Cf=Dn.ReactCurrentOwner,Gt=Dn.ReactCurrentBatchConfig,ae=0,$e=null,Ue=null,Ze=0,Nt=0,fi=cr(0),Be=0,ls=null,Vr=0,Oa=0,Af=0,Oo=null,wt=null,Rf=0,Mi=1/0,_n=null,oa=!1,nd=null,jn=null,al=!1,$n=null,sa=0,Bo=0,rd=null,Pl=-1,xl=0;function yt(){return ae&6?Le():Pl!==-1?Pl:Pl=Le()}function er(t){return t.mode&1?ae&2&&Ze!==0?Ze&-Ze:_w.transition!==null?(xl===0&&(xl=Yv()),xl):(t=me,t!==0||(t=window.event,t=t===void 0?16:n_(t.type)),t):1}function tn(t,e,n,r){if(50<Bo)throw Bo=0,rd=null,Error(G(185));Ts(t,n,r),(!(ae&2)||t!==$e)&&(t===$e&&(!(ae&2)&&(Oa|=n),Be===4&&qn(t,Ze)),Pt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Mi=Le()+500,La&&dr()))}function Pt(t,e){var n=t.callbackNode;_S(t,e);var r=ql(t,t===$e?Ze:0);if(r===0)n!==null&&Lp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lp(n),e===1)t.tag===0?vw(Rm.bind(null,t)):T_(Rm.bind(null,t)),pw(function(){!(ae&6)&&dr()}),n=null;else{switch(Qv(r)){case 1:n=Zd;break;case 4:n=Wv;break;case 16:n=Hl;break;case 536870912:n=Jv;break;default:n=Hl}n=_0(n,f0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f0(t,e){if(Pl=-1,xl=0,ae&6)throw Error(G(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=ql(t,t===$e?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=la(t,r);else{e=r;var i=ae;ae|=2;var o=p0();($e!==t||Ze!==e)&&(_n=null,Mi=Le()+500,Rr(t,e));do try{Ow();break}catch(l){h0(t,l)}while(!0);ff(),ia.current=o,ae=i,Ue!==null?e=0:($e=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(i=Nc(t),i!==0&&(r=i,e=id(t,i))),e===1)throw n=ls,Rr(t,0),qn(t,r),Pt(t,Le()),n;if(e===6)qn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Uw(i)&&(e=la(t,r),e===2&&(o=Nc(t),o!==0&&(r=o,e=id(t,o))),e===1))throw n=ls,Rr(t,0),qn(t,r),Pt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Er(t,wt,_n);break;case 3:if(qn(t,r),(r&130023424)===r&&(e=Rf+500-Le(),10<e)){if(ql(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bc(Er.bind(null,t,wt,_n),e);break}Er(t,wt,_n);break;case 4:if(qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-en(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fw(r/1960))-r,10<r){t.timeoutHandle=bc(Er.bind(null,t,wt,_n),r);break}Er(t,wt,_n);break;case 5:Er(t,wt,_n);break;default:throw Error(G(329))}}}return Pt(t,Le()),t.callbackNode===n?f0.bind(null,t):null}function id(t,e){var n=Oo;return t.current.memoizedState.isDehydrated&&(Rr(t,e).flags|=256),t=la(t,e),t!==2&&(e=wt,wt=n,e!==null&&od(e)),t}function od(t){wt===null?wt=t:wt.push.apply(wt,t)}function Uw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!on(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~Af,e&=~Oa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function Rm(t){if(ae&6)throw Error(G(327));Ei();var e=ql(t,0);if(!(e&1))return Pt(t,Le()),null;var n=la(t,e);if(t.tag!==0&&n===2){var r=Nc(t);r!==0&&(e=r,n=id(t,r))}if(n===1)throw n=ls,Rr(t,0),qn(t,e),Pt(t,Le()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Er(t,wt,_n),Pt(t,Le()),null}function Pf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Mi=Le()+500,La&&dr())}}function Lr(t){$n!==null&&$n.tag===0&&!(ae&6)&&Ei();var e=ae;ae|=1;var n=Gt.transition,r=me;try{if(Gt.transition=null,me=1,t)return t()}finally{me=r,Gt.transition=n,ae=e,!(ae&6)&&dr()}}function xf(){Nt=fi.current,Se(fi)}function Rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hw(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jl();break;case 3:Ni(),Se(At),Se(ft),vf();break;case 5:yf(r);break;case 4:Ni();break;case 13:Se(Ae);break;case 19:Se(Ae);break;case 10:hf(r.type._context);break;case 22:case 23:xf()}n=n.return}if($e=t,Ue=t=tr(t.current,null),Ze=Nt=e,Be=0,ls=null,Af=Oa=Vr=0,wt=Oo=null,wr!==null){for(e=0;e<wr.length;e++)if(n=wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}wr=null}return t}function h0(t,e){do{var n=Ue;try{if(ff(),Cl.current=ra,na){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}na=!1}if(Dr=0,ze=be=Re=null,Uo=!1,is=0,Cf.current=null,n===null||n.return===null){Be=1,ls=e,Ue=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=pm(s);if(v!==null){v.flags&=-257,mm(v,s,l,o,e),v.mode&1&&hm(o,f,e),e=v,u=f;var w=e.updateQueue;if(w===null){var P=new Set;P.add(u),e.updateQueue=P}else w.add(u);break e}else{if(!(e&1)){hm(o,f,e),Nf();break e}u=Error(G(426))}}else if(we&&l.mode&1){var N=pm(s);if(N!==null){!(N.flags&65536)&&(N.flags|=256),mm(N,s,l,o,e),cf(ki(u,l));break e}}o=u=ki(u,l),Be!==4&&(Be=2),Oo===null?Oo=[o]:Oo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var T=Q_(o,u,e);lm(o,T);break e;case 1:l=u;var I=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(jn===null||!jn.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=X_(o,l,e);lm(o,D);break e}}o=o.return}while(o!==null)}g0(n)}catch(L){e=L,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function p0(){var t=ia.current;return ia.current=ra,t===null?ra:t}function Nf(){(Be===0||Be===3||Be===2)&&(Be=4),$e===null||!(Vr&268435455)&&!(Oa&268435455)||qn($e,Ze)}function la(t,e){var n=ae;ae|=2;var r=p0();($e!==t||Ze!==e)&&(_n=null,Rr(t,e));do try{bw();break}catch(i){h0(t,i)}while(!0);if(ff(),ae=n,ia.current=r,Ue!==null)throw Error(G(261));return $e=null,Ze=0,Be}function bw(){for(;Ue!==null;)m0(Ue)}function Ow(){for(;Ue!==null&&!cS();)m0(Ue)}function m0(t){var e=v0(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?g0(t):Ue=e,Cf.current=null}function g0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mw(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Ue=null;return}}else if(n=kw(n,e,Nt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Be===0&&(Be=5)}function Er(t,e,n){var r=me,i=Gt.transition;try{Gt.transition=null,me=1,Bw(t,e,n,r)}finally{Gt.transition=i,me=r}return null}function Bw(t,e,n,r){do Ei();while($n!==null);if(ae&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ES(t,o),t===$e&&(Ue=$e=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,_0(Hl,function(){return Ei(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gt.transition,Gt.transition=null;var s=me;me=1;var l=ae;ae|=4,Cf.current=null,Vw(t,n),c0(n,t),sw(Fc),zl=!!Lc,Fc=Lc=null,t.current=n,Lw(n),dS(),ae=l,me=s,Gt.transition=o}else t.current=n;if(al&&(al=!1,$n=t,sa=i),o=t.pendingLanes,o===0&&(jn=null),pS(n.stateNode),Pt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oa)throw oa=!1,t=nd,nd=null,t;return sa&1&&t.tag!==0&&Ei(),o=t.pendingLanes,o&1?t===rd?Bo++:(Bo=0,rd=t):Bo=0,dr(),null}function Ei(){if($n!==null){var t=Qv(sa),e=Gt.transition,n=me;try{if(Gt.transition=null,me=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,sa=0,ae&6)throw Error(G(331));var i=ae;for(ae|=4,$=t.current;$!==null;){var o=$,s=o.child;if($.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for($=f;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:bo(8,h,o)}var p=h.child;if(p!==null)p.return=h,$=p;else for(;$!==null;){h=$;var m=h.sibling,v=h.return;if(l0(h),h===f){$=null;break}if(m!==null){m.return=v,$=m;break}$=v}}}var w=o.alternate;if(w!==null){var P=w.child;if(P!==null){w.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}$=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,$=s;else e:for(;$!==null;){if(o=$,o.flags&2048)switch(o.tag){case 0:case 11:case 15:bo(9,o,o.return)}var T=o.sibling;if(T!==null){T.return=o.return,$=T;break e}$=o.return}}var I=t.current;for($=I;$!==null;){s=$;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,$=A;else e:for(s=I;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ba(9,l)}}catch(L){Me(l,l.return,L)}if(l===s){$=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,$=D;break e}$=l.return}}if(ae=i,dr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Na,t)}catch{}r=!0}return r}finally{me=n,Gt.transition=e}}return!1}function Pm(t,e,n){e=ki(n,e),e=Q_(t,e,1),t=Zn(t,e,1),e=yt(),t!==null&&(Ts(t,1,e),Pt(t,e))}function Me(t,e,n){if(t.tag===3)Pm(t,t,n);else for(;e!==null;){if(e.tag===3){Pm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){t=ki(n,t),t=X_(e,t,1),e=Zn(e,t,1),t=yt(),e!==null&&(Ts(e,1,t),Pt(e,t));break}}e=e.return}}function Gw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ze&n)===n&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>Le()-Rf?Rr(t,0):Af|=n),Pt(t,e)}function y0(t,e){e===0&&(t.mode&1?(e=Zs,Zs<<=1,!(Zs&130023424)&&(Zs=4194304)):e=1);var n=yt();t=Rn(t,e),t!==null&&(Ts(t,e,n),Pt(t,n))}function Hw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y0(t,n)}function qw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),y0(t,n)}var v0;v0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,Nw(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,we&&e.flags&1048576&&I_(e,Xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rl(t,e),t=e.pendingProps;var i=Ri(e,ft.current);_i(e,n),i=Ef(null,e,r,t,i,n);var o=Tf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(o=!0,Yl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mf(e),i.updater=Ua,e.stateNode=i,i._reactInternals=e,$c(e,r,t,n),e=Jc(null,e,r,!0,o,n)):(e.tag=0,we&&o&&af(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$w(r),t=Qt(r,t),i){case 0:e=Wc(null,e,r,t,n);break e;case 1:e=vm(null,e,r,t,n);break e;case 11:e=gm(null,e,r,t,n);break e;case 14:e=ym(null,e,r,Qt(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),Wc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),vm(t,e,r,i,n);case 3:e:{if(t0(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,i=o.element,P_(t,e),ea(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ki(Error(G(423)),e),e=_m(t,e,r,n,i);break e}else if(r!==i){i=ki(Error(G(424)),e),e=_m(t,e,r,n,i);break e}else for(kt=Xn(e.stateNode.containerInfo.firstChild),Mt=e,we=!0,Zt=null,n=A_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===i){e=Pn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return x_(e),t===null&&Hc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Uc(r,i)?s=null:o!==null&&Uc(r,o)&&(e.flags|=32),e0(t,e),gt(t,e,s,n),e.child;case 6:return t===null&&Hc(e),null;case 13:return n0(t,e,n);case 4:return gf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),gm(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,_e(Zl,r._currentValue),r._currentValue=s,o!==null)if(on(o.value,s)){if(o.children===i.children&&!At.current){e=Pn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Sn(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),qc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_i(e,n),i=zt(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Qt(r,e.pendingProps),i=Qt(r.type,i),ym(t,e,r,i,n);case 15:return Z_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qt(r,i),Rl(t,e),e.tag=1,Rt(r)?(t=!0,Yl(e)):t=!1,_i(e,n),Y_(e,r,i),$c(e,r,i,n),Jc(null,e,r,!0,t,n);case 19:return r0(t,e,n);case 22:return j_(t,e,n)}throw Error(G(156,e.tag))};function _0(t,e){return Kv(t,e)}function zw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new zw(t,e,n,r)}function kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $w(t){if(typeof t=="function")return kf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yd)return 11;if(t===Qd)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")kf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ni:return Pr(n.children,i,o,e);case Jd:s=8,i|=8;break;case mc:return t=Bt(12,n,e,i|2),t.elementType=mc,t.lanes=o,t;case gc:return t=Bt(13,n,e,i),t.elementType=gc,t.lanes=o,t;case yc:return t=Bt(19,n,e,i),t.elementType=yc,t.lanes=o,t;case xv:return Ba(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rv:s=10;break e;case Pv:s=9;break e;case Yd:s=11;break e;case Qd:s=14;break e;case Bn:s=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Bt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Pr(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function Ba(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=xv,t.lanes=n,t.stateNode={isHidden:!1},t}function Xu(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Zu(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mu(0),this.expirationTimes=Mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mf(t,e,n,r,i,o,s,l,u){return t=new Kw(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mf(o),t}function Ww(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E0(t){if(!t)return or;t=t._reactInternals;e:{if(Br(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Rt(n))return E_(t,n,e)}return e}function T0(t,e,n,r,i,o,s,l,u){return t=Mf(n,r,!0,t,i,o,s,l,u),t.context=E0(null),n=t.current,r=yt(),i=er(n),o=Sn(r,i),o.callback=e??null,Zn(n,o,i),t.current.lanes=i,Ts(t,i,r),Pt(t,r),t}function Ga(t,e,n,r){var i=e.current,o=yt(),s=er(i);return n=E0(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zn(i,e,s),t!==null&&(tn(t,i,s,o),wl(t,i,s)),s}function aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Df(t,e){xm(t,e),(t=t.alternate)&&xm(t,e)}function Jw(){return null}var I0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vf(t){this._internalRoot=t}Ha.prototype.render=Vf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ga(t,e,null,null)};Ha.prototype.unmount=Vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Ga(null,t,null,null)}),e[An]=null}};function Ha(t){this._internalRoot=t}Ha.prototype.unstable_scheduleHydration=function(t){if(t){var e=jv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&t_(t)}};function Lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nm(){}function Yw(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=aa(s);o.call(f)}}var s=T0(e,r,t,0,null,!1,!1,"",Nm);return t._reactRootContainer=s,t[An]=s.current,jo(t.nodeType===8?t.parentNode:t),Lr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=aa(u);l.call(f)}}var u=Mf(t,0,!1,null,null,!1,!1,"",Nm);return t._reactRootContainer=u,t[An]=u.current,jo(t.nodeType===8?t.parentNode:t),Lr(function(){Ga(e,u,n,r)}),u}function za(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=aa(s);l.call(u)}}Ga(e,s,t,i)}else s=Yw(n,e,t,i,r);return aa(s)}Xv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(jd(e,n|1),Pt(e,Le()),!(ae&6)&&(Mi=Le()+500,dr()))}break;case 13:Lr(function(){var r=Rn(t,1);if(r!==null){var i=yt();tn(r,t,1,i)}}),Df(t,1)}};ef=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=yt();tn(e,t,134217728,n)}Df(t,134217728)}};Zv=function(t){if(t.tag===13){var e=er(t),n=Rn(t,e);if(n!==null){var r=yt();tn(n,t,e,r)}Df(t,e)}};jv=function(){return me};e_=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Rc=function(t,e,n){switch(e){case"input":if(Ec(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Va(r);if(!i)throw Error(G(90));kv(r),Ec(r,i)}}}break;case"textarea":Dv(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};Bv=Pf;Gv=Lr;var Qw={usingClientEntryPoint:!1,Events:[Ss,si,Va,bv,Ov,Pf]},_o={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xw={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zv(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||Jw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{Na=ul.inject(Xw),dn=ul}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(e))throw Error(G(200));return Ww(t,e,null,n)};Vt.createRoot=function(t,e){if(!Lf(t))throw Error(G(299));var n=!1,r="",i=I0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mf(t,1,!1,null,null,n,!1,r,i),t[An]=e.current,jo(t.nodeType===8?t.parentNode:t),new Vf(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=zv(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return Lr(t)};Vt.hydrate=function(t,e,n){if(!qa(e))throw Error(G(200));return za(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!Lf(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=I0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=T0(e,null,t,1,n??null,i,!1,o,s),t[An]=e.current,jo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ha(e)};Vt.render=function(t,e,n){if(!qa(e))throw Error(G(200));return za(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!qa(t))throw Error(G(40));return t._reactRootContainer?(Lr(function(){za(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};Vt.unstable_batchedUpdates=Pf;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qa(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return za(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function S0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S0)}catch(t){console.error(t)}}S0(),Sv.exports=Vt;var Zw=Sv.exports,km=Zw;hc.createRoot=km.createRoot,hc.hydrateRoot=km.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(t,e)=>{const n=he.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...f},h)=>he.createElement("svg",{ref:h,...jw,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${eC(t)}`,l].join(" "),...f},[...e.map(([p,m])=>he.createElement(p,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ne("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Ne("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Ne("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Ne("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Ne("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Ne("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Ne("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Ne("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Ne("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mC=({stats:t})=>{const e=({label:n,value:r,subtext:i,icon:o,colorClass:s})=>M.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-sm border border-theme-100 transition-all duration-300 group hover:-translate-y-1 hover:shadow-md",children:[M.jsxs("div",{className:"flex justify-between items-start mb-3",children:[M.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-theme-400",children:n}),M.jsx("div",{className:`p-2.5 rounded-xl ${s}`,children:M.jsx(o,{size:18,className:"opacity-80"})})]}),M.jsxs("div",{className:"flex flex-col",children:[M.jsx("span",{className:"text-2xl md:text-3xl font-black text-theme-800 tracking-tight font-sans",children:r}),i&&M.jsx("span",{className:"text-xs font-medium text-theme-400 mt-1",children:i})]})]});return M.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[M.jsx(e,{label:"Toplanan",value:`${t.totalCollected}`,icon:hC,colorClass:"bg-[#E9EDC9] text-[#4A5D23]"}),M.jsx(e,{label:"Harcanan",value:`${t.totalSpent}`,subtext:"Kahve, eker, filtre vb.",icon:cC,colorClass:"bg-[#FFD7BA] text-[#A66828]"}),M.jsx(e,{label:"Kasa (Net)",value:`${t.remainingBalance}`,icon:sC,colorClass:`bg-[#B5C9C3] text-[#354F52] ${t.remainingBalance<0?"border-red-200 bg-red-50 text-red-600":""}`}),M.jsx(e,{label:"MKROPLAR",value:t.zeroContributionCount,subtext:"Kii Hi demedi",icon:dC,colorClass:"bg-[#E3D5CA] text-[#7F5539]"})]})},gC=({person:t,defaultAmount:e,onAddPayment:n,onDelete:r,onRate:i,isAdmin:o})=>{const[s,l]=he.useState(e.toString()),[u,f]=he.useState(null),[h,p]=he.useState(""),m=N=>{N.preventDefault();const T=parseFloat(s);T>0&&n(t.id,T)},v=()=>{o&&(f(t.id),p(t.satisfaction||""))},w=()=>{i(t.id,h),f(null)},P=t.totalPaid>0;return M.jsxs("div",{className:`group flex flex-col md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center transition-all duration-200 border-b border-theme-50 last:border-0 ${P?"bg-white hover:bg-[#F9F7F5]":"bg-[#FFF5F5] hover:bg-[#FFEBEB]"}`,children:[M.jsxs("div",{className:"w-full md:col-span-5 flex items-center gap-3",children:[M.jsx("div",{className:`p-2 rounded-full transition-colors ${P?"bg-theme-100 text-theme-500":"bg-[#FFD7BA] text-[#A66828]"}`,children:M.jsx(fC,{size:18})}),M.jsxs("div",{children:[M.jsx("span",{className:`block font-bold text-base ${P?"text-theme-800":"text-theme-900"}`,children:t.name}),M.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[M.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${P?"bg-[#CCD5AE] text-[#4A5D23]":"bg-[#E5989B] text-[#6D3B3E]"}`,children:["Toplam: ",t.totalPaid]}),t.lastPaymentDate&&M.jsxs("span",{className:"text-[10px] text-theme-400 flex items-center gap-1",children:[M.jsx(rC,{size:10})," ",new Date(t.lastPaymentDate).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"})]})]})]})]}),M.jsx("div",{className:"w-full md:col-span-3",children:o?M.jsxs("form",{onSubmit:m,className:"flex items-center gap-2",children:[M.jsxs("div",{className:"relative flex-1",children:[M.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-400 text-xs font-bold",children:""}),M.jsx("input",{type:"number",value:s,onChange:N=>l(N.target.value),className:"w-full pl-6 pr-2 py-2 text-sm border border-theme-200 rounded-xl focus:outline-none focus:border-accent-DEFAULT focus:ring-1 focus:ring-accent-light transition-all bg-white/50",placeholder:"0"})]}),M.jsx("button",{type:"submit",disabled:!s||parseFloat(s)<=0,className:"bg-theme-800 text-white p-2 rounded-xl hover:bg-accent-DEFAULT hover:scale-105 transition-all disabled:opacity-50 disabled:hover:scale-100 shadow-sm",title:"Ekle",children:M.jsx(lC,{size:20})})]}):M.jsx("div",{className:"h-full flex items-center",children:M.jsx("div",{className:"h-1 w-12 bg-theme-100 rounded-full"})})}),M.jsxs("div",{className:"w-full md:col-span-3 relative",children:[M.jsx("span",{className:"md:hidden text-xs font-bold text-theme-400 uppercase block mb-1",children:"Gr:"}),u===t.id?M.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2",children:[M.jsx("input",{type:"text",value:h,onChange:N=>p(N.target.value),placeholder:"Not...",className:"w-full text-sm border border-accent-DEFAULT/50 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-accent-light bg-white text-theme-700",autoFocus:!0,onKeyDown:N=>N.key==="Enter"&&w()}),M.jsx("button",{onClick:w,className:"text-[#4A5D23] hover:scale-110 transition-transform",children:M.jsx(uC,{size:18})}),M.jsx("button",{onClick:()=>f(null),className:"text-[#E5989B] hover:scale-110 transition-transform",children:M.jsx(C0,{size:18})})]}):M.jsx("div",{onClick:v,className:`flex items-center gap-2 py-1 ${o?"cursor-pointer group/edit":""}`,children:t.satisfaction?M.jsxs("span",{className:"text-sm text-theme-600 italic truncate max-w-[150px] border-b border-dashed border-theme-300 hover:border-accent-DEFAULT",children:['"',t.satisfaction,'"']}):o?M.jsxs("span",{className:"text-sm text-theme-300 flex items-center gap-1 group-hover/edit:text-accent-DEFAULT transition-colors",children:[M.jsx(oC,{size:14})," ",M.jsx("span",{className:"text-xs",children:"Not ekle"})]}):M.jsx("span",{className:"text-sm text-theme-200 italic",children:"-"})})]}),M.jsx("div",{className:"w-full md:col-span-1 flex justify-end",children:o&&M.jsx("button",{onClick:()=>r(t.id),className:"p-2 text-theme-300 hover:text-[#E5989B] hover:bg-[#FFF5F5] rounded-lg transition-colors",title:"Kayd Sil",children:M.jsx(w0,{size:16})})})]})},yC=({people:t,onAddPayment:e,onDelete:n,onRate:r,defaultAmount:i,isAdmin:o})=>{if(t.length===0)return M.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-theme-200 rounded-2xl",children:[M.jsx("div",{className:"bg-theme-50 p-6 rounded-full border border-theme-100 mb-4",children:M.jsx(ua,{size:32,className:"text-theme-400"})}),M.jsx("p",{className:"text-theme-700 font-bold text-lg",children:"Liste Henz Bo"}),M.jsx("p",{className:"text-theme-400 text-sm mt-1",children:o?"Ekibe yeni bir kahve sever ekleyin.":"Ynetici girii yaparak kii ekleyebilirsiniz."})]});const s=[...t].sort((l,u)=>u.totalPaid-l.totalPaid);return M.jsxs("div",{className:"bg-white border border-theme-100 shadow-sm rounded-2xl overflow-hidden",children:[M.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-4 bg-[#F9F7F5] border-b border-theme-100 text-xs font-bold uppercase tracking-widest text-theme-400",children:[M.jsx("div",{className:"col-span-5",children:"Kii & Toplam Katk"}),M.jsx("div",{className:"col-span-3",children:o?"deme Ekle":""}),M.jsx("div",{className:"col-span-3",children:"Not"}),M.jsx("div",{className:"col-span-1 text-right",children:o?"Sil":""})]}),M.jsx("div",{children:s.map(l=>M.jsx(gC,{person:l,defaultAmount:i,onAddPayment:e,onDelete:n,onRate:r,isAdmin:o},l.id))})]})},vC=({expenses:t,onDelete:e,isAdmin:n})=>{if(t.length===0)return M.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-theme-200 rounded-2xl",children:[M.jsx("div",{className:"bg-theme-50 p-6 rounded-full border border-theme-100 mb-4",children:M.jsx(Lm,{size:32,className:"text-theme-400"})}),M.jsx("p",{className:"text-theme-700 font-bold text-lg",children:"Henz Harcama Yok"}),M.jsx("p",{className:"text-theme-400 text-sm mt-1",children:n?"Yaplan alverileri buraya ekleyebilirsiniz.":"Harcama kayd bulunmamaktadr."})]});const r=[...t].sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime());return M.jsxs("div",{className:"bg-white border border-theme-100 shadow-sm rounded-2xl overflow-hidden",children:[M.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-4 bg-[#F9F7F5] border-b border-theme-100 text-xs font-bold uppercase tracking-widest text-theme-400",children:[M.jsx("div",{className:"col-span-6",children:"Aklama"}),M.jsx("div",{className:"col-span-3",children:"Tarih"}),M.jsx("div",{className:"col-span-2 text-right",children:"Tutar"}),M.jsx("div",{className:"col-span-1 text-right",children:n?"Sil":""})]}),M.jsx("div",{className:"divide-y divide-theme-50",children:r.map(i=>M.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center hover:bg-[#F9F7F5] transition-colors group",children:[M.jsxs("div",{className:"w-full md:col-span-6 flex items-center gap-3",children:[M.jsx("div",{className:"p-2 rounded-full bg-[#FFD7BA] text-[#A66828]",children:M.jsx(Lm,{size:16})}),M.jsx("span",{className:"font-bold text-theme-800 text-sm md:text-base",children:i.description})]}),M.jsxs("div",{className:"w-full md:col-span-3 flex items-center gap-2",children:[M.jsx(tC,{size:14,className:"text-theme-300 md:hidden"}),M.jsx("span",{className:"text-sm font-mono text-theme-500",children:new Date(i.date).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})})]}),M.jsxs("div",{className:"w-full md:col-span-2 flex justify-between md:justify-end items-center",children:[M.jsx("span",{className:"md:hidden text-xs font-bold text-theme-400 uppercase",children:"Tutar:"}),M.jsxs("span",{className:"text-base font-bold text-[#6D3B3E] font-mono bg-[#FFF0F3] px-2 py-1 rounded",children:["-",i.amount]})]}),M.jsx("div",{className:"w-full md:col-span-1 flex justify-end",children:n&&M.jsx("button",{onClick:()=>e(i.id),className:"p-2 text-theme-300 hover:text-[#E5989B] hover:bg-[#FFF5F5] rounded-lg transition-colors",title:"Harcamay Sil",children:M.jsx(w0,{size:16})})})]},i.id))})]})},Fm=["Kahve: Sabahlarn sessiz kahraman.","Bir fincan kahve, bin yln hatrna bedeldir.","Hayat, bir fincan kahve ile balar.","Kahvesiz uyanmak, uyanmak deildir.","Bugn harika eyler olacak, ama nce kahve.","Fikirler kahve ile demlenir.","Ofisin yakt: Filtre Kahve.","Kahve kokusu, mutluluun en somut halidir.","Az laf, ok kahve.","Kahve varsa, zm de vardr.","Pazartesi sendromunun tek ilac taze demlenmi bir kahvedir.","Kahve, beynin 'Bala' dmesidir.","Bir fincan kahve imeden asla nemli bir karar verme.","Kahve: Yetikinler iin sihirli iksir.","Bugn kahveni nasl alrsn? Ben 'srekli' alrm.","Kahve, souk havann en scak dostudur.","yi bir gn, iyi bir kahveyle balar.","Kahve bittiinde, i biter.","Hayat ksa, kahveni scak i.","Kahve: Hug in a mug (Bardaktaki sarlma).","Enerji tasarrufu modu: Kapal. Kahve modu: Ak.","Kahve, ruhun gdasdr (ve ofisin).","Sorunlar kahve telvesinde deil, fincann dibinde z.","Kahve, uykuyla savamann en lezzetli yoludur.","Bir kahve molas, gnn gidiatn deitirir.","Kahve seven insan, kalbi scak insandr.","Kahve: Yasal uyuturucu.","Bugnn mottosu: Kahve ve Sabr.","Kahve, sessizliin en gzel elikisidir.","Kahve, gnn virgldr; nefes aldrr.","Her baarl insann arkasnda... tkettii litrelerce kahve vardr.","Kahve: %1 Kafein, %99 Motivasyon.","Kahve, dertleri eritir, zihni aar.","Kahve, sabahn anahtardr.","Kahve olmadan kod yazlmaz, i yaplmaz.","Kahve, dostluklarn imentosudur.","Scak bir kahve, souk bir dnyada snaktr.","Kahve, kelimelerin akmasn salar.","Kahve: Siyah altn.","Kahve imek iin asla ge deildir (uyuyamamak hari).","Kahve, gnn en drst andr.","Kahve, konsantrasyonun sv halidir.","Kahve, pazartesiyi cumaya balayan kprdr.","Kahve, zihnin arj aletidir.","Kahve, kalbin ritmini, zihnin hzn ayarlar.","Kahve, kt bir gn iyiye evirebilir.","Kahve: indeki devi uyandr.","Kahve, ofisin kalp atdr.","Kahve, hayallerin yaktdr.","Kahve, yorgunluun ba dmandr.","Kahve: Basit mutluluk.","Kahve, karmaann iindeki huzurdur.","Kahve, sohbetin bahanesidir.","Kahve, yalnzln en iyi arkadadr.","Kahve, yaratcln kvlcmdr.","Kahve: Gnee 'Gnaydn' deme ekli.","Kahve, her yudumda bir hikaye anlatr.","Kahve, zaman durdurur, an yaatr.","Kahve: Sv bilgelik.","Kahve, gnn stresini alr, yerine enerji koyar.","Kahve, beynin vitamini.","Kahve: Mutluluun demlenmi hali.","Kahve, sabahn ilk dr.","Kahve, her derde deva (neredeyse).","Kahve, dost meclisinin ba kesidir.","Kahve: Siyah inci.","Kahve, uyankln simgesidir.","Kahve, gnn en tatl kaamadr.","Kahve, zihnin pencerelerini aar.","Kahve: Hayatn tad.","Kahve, her an gzelletirir.","Kahve, sessiz lklarn cevabdr.","Kahve: Ruhu stan tek ey.","Kahve, gnn en gzel rutini.","Kahve, baarnn gizli formldr.","Kahve: Zifiri karanlkta parlayan k.","Kahve, her yudumda yeniden balama ansdr.","Kahve, hayatn ritmidir.","Kahve: Kk mutluluklarn by.","Kahve, zihni berraklatrr.","Kahve, gnn en sadk dostudur.","Kahve: Enerjinin kayna.","Kahve, her sorunun cevab olmasa da, dnmeye yardmc olur.","Kahve, gnn en iyi balangcdr.","Kahve: Tutkunun rengi siyahtr.","Kahve, her damlasnda emek vardr.","Kahve, dostluun scakldr.","Kahve: Gnln ilac.","Kahve, gnn yorgunluunu alr gtrr.","Kahve, yeni fikirlerin doduu yerdir.","Kahve: Hayal gcnn yakt.","Kahve, her sabah yeniden doutur.","Kahve, hayatn karmaasna ksa bir moladr.","Kahve: Saf enerji.","Kahve, gnn en gzel dldr.","Kahve, her yudumda huzur verir.","Kahve: Sessizliin sesi.","Kahve, dostluklarn balad yerdir.","Kahve, gnn en gzel detaydr.","Kahve: Hayatn kendisi."],Um=()=>{const n=Math.floor(Date.now()/6e5)%Fm.length;return Fm[n]},_C=()=>{const[t,e]=he.useState("");return he.useEffect(()=>{e(Um());const n=setInterval(()=>{e(Um())},6e4);return()=>clearInterval(n)},[]),t?M.jsxs("div",{className:"w-full bg-white border border-theme-100 rounded-2xl p-8 shadow-sm mb-8 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:shadow-md transition-shadow",children:[M.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-[#E3D5CA] via-[#D4A373] to-[#E3D5CA]"}),M.jsx("div",{className:"absolute -left-6 -top-6 text-theme-100/50 group-hover:text-theme-100 transition-colors",children:M.jsx(Dm,{size:80})}),M.jsxs("div",{className:"flex items-center gap-2 mb-4 text-accent-DEFAULT font-bold text-xs uppercase tracking-widest z-10 bg-accent-light/30 px-3 py-1 rounded-full",children:[M.jsx(ua,{size:14}),M.jsx("span",{children:"Gnn Sz"})]}),M.jsxs("p",{className:"font-serif text-xl md:text-3xl italic text-theme-700 leading-relaxed z-10 max-w-3xl",children:['"',t,'"']}),M.jsx("div",{className:"absolute -right-6 -bottom-6 text-theme-100/50 rotate-180 group-hover:text-theme-100 transition-colors",children:M.jsx(Dm,{size:80})})]}):null};var EC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TC,IC;function SC(){return{geminiUrl:TC,vertexUrl:IC}}function wC(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=SC();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vn{}function z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function c(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let f=0;f<u.length;f++){const h=u[f];c(h,e.slice(o+1),n[f])}else for(const f of u)c(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function CC(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const f=o[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&s.add(f)}sd(t,i,o,0,s)}}function sd(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])sd(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(f=>!f.startsWith("_")&&!i.has(f)),u={};for(const f of l)u[f]=s[f];for(const[f,h]of Object.entries(u)){const p=[];for(const m of n.slice(r))m==="*"?p.push(f):p.push(m);c(s,p,h)}for(const f of l)delete s[f]}}else{const s=t;o in s&&sd(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function RC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],xC(s)),e}function PC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],NC(s)),e}function xC(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>kC(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function NC(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>MC(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function kC(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],bC(n)),e}function MC(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],OC(n)),e}function DC(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function VC(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function LC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],FC(s)),e}function FC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function A0(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],UC(s)),e}function UC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function bC(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Ff(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function OC(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Ff(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bm||(bm={}));var Om;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Om||(Om={}));var Bm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Bm||(Bm={}));var Kn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Kn||(Kn={}));var Gm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Gm||(Gm={}));var Hm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Hm||(Hm={}));var qm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(qm||(qm={}));var zm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(zm||(zm={}));var $m;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})($m||($m={}));var Km;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Km||(Km={}));var Wm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Wm||(Wm={}));var Jm;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Jm||(Jm={}));var Ym;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ym||(Ym={}));var Qm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qm||(Qm={}));var Xm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xm||(Xm={}));var Zm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Zm||(Zm={}));var jm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jm||(jm={}));var eg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(eg||(eg={}));var tg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tg||(tg={}));var ng;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(ng||(ng={}));var rg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rg||(rg={}));var ca;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ca||(ca={}));var ig;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ig||(ig={}));var og;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(og||(og={}));var sg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sg||(sg={}));var ld;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ld||(ld={}));var lg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(lg||(lg={}));var ag;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ag||(ag={}));var ad;(function(t){t.COLLECTION="COLLECTION"})(ad||(ad={}));var ug;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ug||(ug={}));var cg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cg||(cg={}));var dg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(dg||(dg={}));var fg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(fg||(fg={}));var hg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(hg||(hg={}));var pg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(pg||(pg={}));var mg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(mg||(mg={}));var gg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(gg||(gg={}));var yg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yg||(yg={}));var vg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(vg||(vg={}));var _g;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(_g||(_g={}));var Eg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Eg||(Eg={}));var Tg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Tg||(Tg={}));var Ig;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Ig||(Ig={}));var Sg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Sg||(Sg={}));var wg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wg||(wg={}));var Cg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Cg||(Cg={}));var Ag;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ag||(Ag={}));var Rg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Rg||(Rg={}));var Pg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Pg||(Pg={}));var xg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(xg||(xg={}));var Ng;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ng||(Ng={}));var kg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kg||(kg={}));var Mg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Mg||(Mg={}));var Dg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dg||(Dg={}));var Vg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Vg||(Vg={}));var Lg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Lg||(Lg={}));var hi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(hi||(hi={}));class ud{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Eo{get text(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const m of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[v,w]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(w!==null||w!==void 0)&&p.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,v]of Object.entries(p))m!=="inlineData"&&(v!==null||v!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class Fg{}class Ug{}class BC{}class GC{}class HC{}class qC{}class bg{}class Og{}class Bg{}class zC{}class da{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new da;let i;const o=e;return n?i=PC(o):i=RC(o),Object.assign(r,i),r}}class Gg{}class Hg{}class qg{}class zg{}class $C{}class KC{}class WC{}class Uf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Uf,o=LC(e);return Object.assign(r,o),r}}class JC{}class YC{}class QC{}class XC{}class $g{}class ZC{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(l))u!=="text"&&u!=="thought"&&f!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class jC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new bf,o=A0(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function de(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function R0(t,e){const n=de(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function P0(t){return Array.isArray(t)?t.map(e=>fa(e)):[fa(t)]}function fa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function x0(t){const e=fa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N0(t){const e=fa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function k0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Kg(e)):[Kg(t)]}function cd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Wg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Jg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dt(t){if(t==null)throw new Error("ContentUnion is required");return cd(t)?t:{role:"user",parts:k0(t)}}function Of(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dt(n)):[dt(e)]}function Ht(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Wg(t)||Jg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dt(t)]}const e=[],n=[],r=cd(t[0]);for(const i of t){const o=cd(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Wg(i)||Jg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:k0(n)}),e}function eA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Kn).includes(n[0].toUpperCase())?n[0].toUpperCase():Kn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Kn).includes(r.toUpperCase())?r.toUpperCase():Kn.TYPE_UNSPECIFIED})}}function Ti(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&eA(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Kn).includes(l.toUpperCase())?l.toUpperCase():Kn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ti(l);else if(r.includes(s)){const u=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}u.push(Ti(f))}e[s]=u}else if(i.includes(s)){const u={};for(const[f,h]of Object.entries(l))u[f]=Ti(h);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function Bf(t){return Ti(t)}function Gf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Hf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function qi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ti(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ti(e.response));return t}function zi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function tA(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ln(t,e){if(typeof e!="string")throw new Error("name must be a string");return tA(t,e,"cachedContents")}function M0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function fr(t){return Ff(t)}function nA(t){return t!=null&&typeof t=="object"&&"name"in t}function rA(t){return t!=null&&typeof t=="object"&&"video"in t}function iA(t){return t!=null&&typeof t=="object"&&"uri"in t}function D0(t){var e;let n;if(nA(t)&&(n=t.name),!(iA(t)&&(n=t.uri,n===void 0))&&!(rA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function V0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function L0(t){for(const e of["models","tunedModels","publisherModels"])if(oA(t,e))return t[e];return[]}function oA(t,e){return t!==null&&typeof t=="object"&&e in t}function sA(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function lA(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=sA(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function F0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function aA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function U0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function $i(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function b0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uA(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>qA(s))),c(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["inlinedEmbedContentResponses"],o)}return e}function cA(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function dA(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function kl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&c(e,["state"],b0(i));const o=a(t,["metadata","createTime"]);o!=null&&c(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const f=a(t,["metadata","output"]);return f!=null&&c(e,["dest"],uA(U0(f))),e}function dd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["state"]);i!=null&&c(e,["state"],b0(i));const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=a(t,["model"]);h!=null&&c(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],fA(p));const m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],cA(U0(m)));const v=a(t,["completionStats"]);return v!=null&&c(e,["completionStats"],v),e}function fA(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function hA(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>HA(t,s))),c(n,["requests","requests"],o)}return n}function pA(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mA(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function gA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function yA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function vA(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],_A(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function _A(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function O0(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QA(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function EA(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function TA(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&c(e,["outputConfig"],dA(aA(i))),n}function Yg(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],hA(t,F0(t,i)));const o=a(e,["config"]);return o!=null&&EA(o,n),n}function IA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["inputConfig"],pA(F0(t,i)));const o=a(e,["config"]);return o!=null&&TA(o,n),n}function SA(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function wA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],kA(t,i));const o=a(e,["config"]);return o!=null&&SA(o,n),n}function CA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function AA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function RA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function PA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function xA(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=Of(t,r);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(c(n,["_self"],NA(i,n)),CC(n,{"requests[].*":"requests[].request.*"})),n}function NA(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kA(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&c(n,["requests"],xA(t,i)),n}function MA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function DA(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VA(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);const r=a(t,["mode"]);if(r!=null&&c(e,["mode"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LA(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],O0(dt(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const v=a(e,["presencePenalty"]);v!=null&&c(r,["presencePenalty"],v);const w=a(e,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const P=a(e,["seed"]);P!=null&&c(r,["seed"],P);const N=a(e,["responseMimeType"]);N!=null&&c(r,["responseMimeType"],N);const T=a(e,["responseSchema"]);T!=null&&c(r,["responseSchema"],Bf(T));const I=a(e,["responseJsonSchema"]);if(I!=null&&c(r,["responseJsonSchema"],I),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let x=A;Array.isArray(x)&&(x=x.map(oe=>XA(oe))),c(n,["safetySettings"],x)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let x=zi(D);Array.isArray(x)&&(x=x.map(oe=>jA(qi(oe)))),c(n,["tools"],x)}const L=a(e,["toolConfig"]);if(n!==void 0&&L!=null&&c(n,["toolConfig"],ZA(L)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],Ln(t,b));const C=a(e,["responseModalities"]);C!=null&&c(r,["responseModalities"],C);const E=a(e,["mediaResolution"]);E!=null&&c(r,["mediaResolution"],E);const S=a(e,["speechConfig"]);if(S!=null&&c(r,["speechConfig"],Gf(S)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const k=a(e,["imageConfig"]);k!=null&&c(r,["imageConfig"],GA(k));const V=a(e,["enableEnhancedCivicAnswers"]);if(V!=null&&c(r,["enableEnhancedCivicAnswers"],V),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function FA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>vA(f))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function UA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function bA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],$i(t,r)),n}function OA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function BA(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function GA(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],de(t,r));const i=a(e,["contents"]);if(i!=null){let l=Ht(i);Array.isArray(l)&&(l=l.map(u=>O0(u))),c(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],LA(t,s,a(n,["request"],{}))),n}function qA(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],FA(n));const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function zA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $A(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&c(e,["_query","filter"],o),n}function KA(t){const e={},n=a(t,["config"]);return n!=null&&zA(n,e),e}function WA(t){const e={},n=a(t,["config"]);return n!=null&&$A(n,e),e}function JA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>kl(s))),c(e,["batchJobs"],o)}return e}function YA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>dd(s))),c(e,["batchJobs"],o)}return e}function QA(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],MA(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],DA(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],mA(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function XA(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function ZA(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);const r=a(t,["functionCallingConfig"]);return r!=null&&c(e,["functionCallingConfig"],VA(r)),e}function jA(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],OA(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],BA(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(xn||(xn={}));class Gr{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR extends Vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gr(xn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Yg(this.apiClient,e),r=n._url,i=z("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,f=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const v=p.request;v.systemInstruction=m,p.request=v}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=IA(this.apiClient,e);return l=z("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>dd(h))}else{const f=Yg(this.apiClient,e);return l=z("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kl(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wA(this.apiClient,e);return o=z("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>kl(u))}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=bA(this.apiClient,e);return l=z("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>dd(h))}else{const f=UA(this.apiClient,e);return l=z("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kl(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=yA(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=gA(this.apiClient,e);s=z("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=WA(e);return l=z("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=YA(h),m=new $g;return Object.assign(m,p),m})}else{const f=KA(e);return l=z("batches",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JA(h),m=new $g;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=AA(this.apiClient,e);return l=z("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>PA(h))}else{const f=CA(this.apiClient,e);return l=z("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>RA(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Qg(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wR(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function nR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Ht(s);Array.isArray(h)&&(h=h.map(p=>Qg(p))),c(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],Qg(dt(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>AR(p))),c(e,["tools"],h)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],CR(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Ht(s);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],dt(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>RR(m))),c(e,["tools"],p)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],f);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&c(e,["encryption_spec","kmsKeyName"],h),n}function iR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],R0(t,r));const i=a(e,["config"]);return i!=null&&nR(i,n),n}function oR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],R0(t,r));const i=a(e,["config"]);return i!=null&&rR(i,n),n}function sR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ln(t,r)),n}function lR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ln(t,r)),n}function aR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function uR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function cR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function dR(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fR(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);const r=a(t,["mode"]);if(r!=null&&c(e,["mode"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(t){const e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ln(t,r)),n}function mR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ln(t,r)),n}function gR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function yR(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function vR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function _R(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function ER(t){const e={},n=a(t,["config"]);return n!=null&&vR(n,e),e}function TR(t){const e={},n=a(t,["config"]);return n!=null&&_R(n,e),e}function IR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function SR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function wR(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],cR(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],dR(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],tR(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function CR(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);const r=a(t,["functionCallingConfig"]);return r!=null&&c(e,["functionCallingConfig"],fR(r)),e}function AR(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],gR(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],yR(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function RR(t){const e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);const r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(t,["codeExecution"]);i!=null&&c(e,["codeExecution"],i);const o=a(t,["enterpriseWebSearch"]);o!=null&&c(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>hR(m))),c(e,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);const f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function PR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function xR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function NR(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Ln(t,r));const i=a(e,["config"]);return i!=null&&PR(i,n),n}function kR(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Ln(t,r));const i=a(e,["config"]);return i!=null&&xR(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MR extends Vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gr(xn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=oR(this.apiClient,e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=iR(this.apiClient,e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=mR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=pR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=lR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=uR(h),m=new qg;return Object.assign(m,p),m})}else{const f=sR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=aR(h),m=new qg;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=kR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=NR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=TR(e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=SR(h),m=new zg;return Object.assign(m,p),m})}else{const f=ER(e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=IR(h),m=new zg;return Object.assign(m,p),m})}}}function ha(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(t){return this instanceof X?(this.v=t,this):new X(t)}function nn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(w){return Promise.resolve(w).then(v,p)}}function l(v,w){r[v]&&(i[v]=function(P){return new Promise(function(N,T){o.push([v,P,N,T])>1||u(v,P)})},w&&(i[v]=w(i[v])))}function u(v,w){try{f(r[v](w))}catch(P){m(o[0][3],P)}}function f(v){v.value instanceof X?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function rn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Xg=="function"?Xg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:B0(n)}function B0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function VR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Zg(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!B0(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class LR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new FR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class FR{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),VR(o)}async sendMessage(e){var n;await this.sendPromise;const r=dt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await i,f=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const v=f?[f]:[];this.recordHistory(r,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Zg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return nn(this,arguments,function*(){var i,o,s,l,u,f;const h=[];try{for(var p=!0,m=rn(e),v;v=yield X(m.next()),i=v.done,!i;p=!0){l=v.value,p=!1;const w=l;if(DR(w)){const P=(f=(u=w.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content;P!==void 0&&h.push(P)}yield yield X(w)}}catch(w){o={error:w}}finally{try{!p&&!i&&(s=m.return)&&(yield X(s.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Zg(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class as extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,as.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UR(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function bR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function OR(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],D0(n)),e}function BR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function GR(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],D0(n)),e}function HR(t){const e={},n=a(t,["uris"]);return n!=null&&c(e,["uris"],n),e}function qR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function zR(t){const e={},n=a(t,["config"]);return n!=null&&qR(n,e),e}function $R(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["files"],o)}return e}function KR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WR extends Vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gr(xn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zR(e);return o=z("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=$R(u),h=new JC;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UR(e);return o=z("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=bR(u),h=new YC;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GR(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=OR(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=BR(u),h=new QC;return Object.assign(h,f),h})}}async registerFilesInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=HR(e);return o=z("files:register",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=KR(u),h=new XC;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ml(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function JR(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cP(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function YR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function QR(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XR(t){const e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZR(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const v=a(t,["responseMimeType"]);v!=null&&c(e,["responseMimeType"],v);const w=a(t,["responseModalities"]);w!=null&&c(e,["responseModalities"],w);const P=a(t,["responseSchema"]);P!=null&&c(e,["responseSchema"],P);const N=a(t,["routingConfig"]);N!=null&&c(e,["routingConfig"],N);const T=a(t,["seed"]);T!=null&&c(e,["seed"],T);const I=a(t,["speechConfig"]);I!=null&&c(e,["speechConfig"],I);const A=a(t,["stopSequences"]);A!=null&&c(e,["stopSequences"],A);const D=a(t,["temperature"]);D!=null&&c(e,["temperature"],D);const L=a(t,["thinkingConfig"]);L!=null&&c(e,["thinkingConfig"],L);const b=a(t,["topK"]);b!=null&&c(e,["topK"],b);const C=a(t,["topP"]);if(C!=null&&c(e,["topP"],C),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function eP(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function tP(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Hf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],JR(dt(w)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let b=zi(P);Array.isArray(b)&&(b=b.map(C=>fP(qi(C)))),c(e,["setup","tools"],b)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],dP(N));const T=a(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","inputAudioTranscription"],T);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&c(e,["setup","contextWindowCompression"],D);const L=a(t,["proactivity"]);if(e!==void 0&&L!=null&&c(e,["setup","proactivity"],L),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function nP(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],ZR(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Hf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],dt(w));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let C=zi(P);Array.isArray(C)&&(C=C.map(E=>hP(qi(E)))),c(e,["setup","tools"],C)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],N);const T=a(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","inputAudioTranscription"],T);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&c(e,["setup","contextWindowCompression"],D);const L=a(t,["proactivity"]);e!==void 0&&L!=null&&c(e,["setup","proactivity"],L);const b=a(t,["explicitVadSignal"]);return e!==void 0&&b!=null&&c(e,["setup","explicitVadSignal"],b),n}function rP(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],tP(i,n)),n}function iP(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],nP(i,n)),n}function oP(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function sP(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["weightedPrompts"],r)}return e}function lP(t){const e={},n=a(t,["media"]);if(n!=null){let f=P0(n);Array.isArray(f)&&(f=f.map(h=>Ml(h))),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],Ml(N0(r)));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],Ml(x0(o)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function aP(t){const e={},n=a(t,["media"]);if(n!=null){let f=P0(n);Array.isArray(f)&&(f=f.map(h=>h)),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],N0(r));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],x0(o));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function uP(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&c(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&c(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],pP(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);const f=a(t,["voiceActivityDetectionSignal"]);f!=null&&c(e,["voiceActivityDetectionSignal"],f);const h=a(t,["voiceActivity"]);return h!=null&&c(e,["voiceActivity"],mP(h)),e}function cP(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],YR(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],QR(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Ml(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function dP(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fP(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],jR(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],eP(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function hP(t){const e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);const r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(t,["codeExecution"]);i!=null&&c(e,["codeExecution"],i);const o=a(t,["enterpriseWebSearch"]);o!=null&&c(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>XR(m))),c(e,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);const f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function pP(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&c(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&c(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(w=>w)),c(e,["promptTokensDetails"],v)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>w)),c(e,["cacheTokensDetails"],v)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(w=>w)),c(e,["responseTokensDetails"],v)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>w)),c(e,["toolUsePromptTokensDetails"],v)}const m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}function mP(t){const e={},n=a(t,["type"]);return n!=null&&c(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gP(t,e){const n={},r=a(t,["data"]);if(r!=null&&c(n,["data"],r),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function yP(t,e){const n={},r=a(t,["content"]);r!=null&&c(n,["content"],r);const i=a(t,["citationMetadata"]);i!=null&&c(n,["citationMetadata"],vP(i));const o=a(t,["tokenCount"]);o!=null&&c(n,["tokenCount"],o);const s=a(t,["finishReason"]);s!=null&&c(n,["finishReason"],s);const l=a(t,["avgLogprobs"]);l!=null&&c(n,["avgLogprobs"],l);const u=a(t,["groundingMetadata"]);u!=null&&c(n,["groundingMetadata"],u);const f=a(t,["index"]);f!=null&&c(n,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&c(n,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>w)),c(n,["safetyRatings"],v)}const m=a(t,["urlContextMetadata"]);return m!=null&&c(n,["urlContextMetadata"],m),n}function vP(t,e){const n={},r=a(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["citations"],i)}return n}function _P(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let s=Ht(o);Array.isArray(s)&&(s=s.map(l=>l)),c(r,["contents"],s)}return r}function EP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["tokensInfo"],o)}return n}function TP(t,e){const n={},r=a(t,["values"]);r!=null&&c(n,["values"],r);const i=a(t,["statistics"]);return i!=null&&c(n,["statistics"],IP(i)),n}function IP(t,e){const n={},r=a(t,["truncated"]);r!=null&&c(n,["truncated"],r);const i=a(t,["token_count"]);return i!=null&&c(n,["tokenCount"],i),n}function $a(t,e){const n={},r=a(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>kx(s))),c(n,["parts"],o)}const i=a(t,["role"]);return i!=null&&c(n,["role"],i),n}function SP(t,e){const n={},r=a(t,["controlType"]);r!=null&&c(n,["controlType"],r);const i=a(t,["enableControlImageComputation"]);return i!=null&&c(n,["computeControl"],i),n}function wP(t,e){const n={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function CP(t,e,n){const r={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],dt(i));const o=a(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>z0(u))),c(e,["tools"],l)}const s=a(t,["generationConfig"]);return e!==void 0&&s!=null&&c(e,["generationConfig"],gx(s)),r}function AP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ht(o);Array.isArray(l)&&(l=l.map(u=>$a(u))),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&wP(s),r}function RP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ht(o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&CP(s,r),r}function PP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["totalTokens"]);i!=null&&c(n,["totalTokens"],i);const o=a(t,["cachedContentTokenCount"]);return o!=null&&c(n,["cachedContentTokenCount"],o),n}function xP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["totalTokens"]);return i!=null&&c(n,["totalTokens"],i),n}function NP(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function kP(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function MP(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function DP(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function VP(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&c(e,["parameters","guidanceScale"],u);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["parameters","seed"],f);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&c(e,["parameters","includeSafetyAttributes"],m);const v=a(t,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const w=a(t,["language"]);e!==void 0&&w!=null&&c(e,["parameters","language"],w);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const T=a(t,["addWatermark"]);e!==void 0&&T!=null&&c(e,["parameters","addWatermark"],T);const I=a(t,["labels"]);e!==void 0&&I!=null&&c(e,["labels"],I);const A=a(t,["editMode"]);e!==void 0&&A!=null&&c(e,["parameters","editMode"],A);const D=a(t,["baseSteps"]);return e!==void 0&&D!=null&&c(e,["parameters","editConfig","baseSteps"],D),r}function LP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Ux(f))),c(r,["instances[0]","referenceImages"],u)}const l=a(e,["config"]);return l!=null&&VP(l,r),r}function FP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ka(s))),c(n,["generatedImages"],o)}return n}function UP(t,e,n){const r={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function bP(t,e,n){const r={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);const s=a(t,["outputDimensionality"]);e!==void 0&&s!=null&&c(e,["parameters","outputDimensionality"],s);const l=a(t,["mimeType"]);e!==void 0&&l!=null&&c(e,["instances[]","mimeType"],l);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&c(e,["parameters","autoTruncate"],u),r}function OP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let u=Of(t,o);Array.isArray(u)&&(u=u.map(f=>f)),c(r,["requests[]","content"],u)}const s=a(e,["config"]);s!=null&&UP(s,r);const l=a(e,["model"]);return l!==void 0&&c(r,["requests[]","model"],de(t,l)),r}function BP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Of(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["instances[]","content"],l)}const s=a(e,["config"]);return s!=null&&bP(s,r),r}function GP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),c(n,["embeddings"],s)}const o=a(t,["metadata"]);return o!=null&&c(n,["metadata"],o),n}function HP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>TP(l))),c(n,["embeddings"],s)}const o=a(t,["metadata"]);return o!=null&&c(n,["metadata"],o),n}function qP(t,e){const n={},r=a(t,["endpoint"]);r!=null&&c(n,["name"],r);const i=a(t,["deployedModelId"]);return i!=null&&c(n,["deployedModelId"],i),n}function zP(t,e){const n={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["fileUri"]);r!=null&&c(n,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function $P(t,e){const n={},r=a(t,["id"]);r!=null&&c(n,["id"],r);const i=a(t,["args"]);i!=null&&c(n,["args"],i);const o=a(t,["name"]);if(o!=null&&c(n,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function KP(t,e){const n={},r=a(t,["allowedFunctionNames"]);r!=null&&c(n,["allowedFunctionNames"],r);const i=a(t,["mode"]);if(i!=null&&c(n,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function WP(t,e){const n={},r=a(t,["description"]);r!=null&&c(n,["description"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["parameters"]);o!=null&&c(n,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&c(n,["parametersJsonSchema"],s);const l=a(t,["response"]);l!=null&&c(n,["response"],l);const u=a(t,["responseJsonSchema"]);if(u!=null&&c(n,["responseJsonSchema"],u),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function JP(t,e,n,r){const i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],$a(dt(o)));const s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);const l=a(e,["topP"]);l!=null&&c(i,["topP"],l);const u=a(e,["topK"]);u!=null&&c(i,["topK"],u);const f=a(e,["candidateCount"]);f!=null&&c(i,["candidateCount"],f);const h=a(e,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const p=a(e,["stopSequences"]);p!=null&&c(i,["stopSequences"],p);const m=a(e,["responseLogprobs"]);m!=null&&c(i,["responseLogprobs"],m);const v=a(e,["logprobs"]);v!=null&&c(i,["logprobs"],v);const w=a(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const P=a(e,["frequencyPenalty"]);P!=null&&c(i,["frequencyPenalty"],P);const N=a(e,["seed"]);N!=null&&c(i,["seed"],N);const T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);const I=a(e,["responseSchema"]);I!=null&&c(i,["responseSchema"],Bf(I));const A=a(e,["responseJsonSchema"]);if(A!=null&&c(i,["responseJsonSchema"],A),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=a(e,["safetySettings"]);if(n!==void 0&&D!=null){let oe=D;Array.isArray(oe)&&(oe=oe.map(We=>bx(We))),c(n,["safetySettings"],oe)}const L=a(e,["tools"]);if(n!==void 0&&L!=null){let oe=zi(L);Array.isArray(oe)&&(oe=oe.map(We=>$x(qi(We)))),c(n,["tools"],oe)}const b=a(e,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],zx(b)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=a(e,["cachedContent"]);n!==void 0&&C!=null&&c(n,["cachedContent"],Ln(t,C));const E=a(e,["responseModalities"]);E!=null&&c(i,["responseModalities"],E);const S=a(e,["mediaResolution"]);S!=null&&c(i,["mediaResolution"],S);const R=a(e,["speechConfig"]);if(R!=null&&c(i,["speechConfig"],Gf(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=a(e,["thinkingConfig"]);k!=null&&c(i,["thinkingConfig"],k);const V=a(e,["imageConfig"]);V!=null&&c(i,["imageConfig"],Tx(V));const x=a(e,["enableEnhancedCivicAnswers"]);if(x!=null&&c(i,["enableEnhancedCivicAnswers"],x),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function YP(t,e,n,r){const i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],dt(o));const s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);const l=a(e,["topP"]);l!=null&&c(i,["topP"],l);const u=a(e,["topK"]);u!=null&&c(i,["topK"],u);const f=a(e,["candidateCount"]);f!=null&&c(i,["candidateCount"],f);const h=a(e,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const p=a(e,["stopSequences"]);p!=null&&c(i,["stopSequences"],p);const m=a(e,["responseLogprobs"]);m!=null&&c(i,["responseLogprobs"],m);const v=a(e,["logprobs"]);v!=null&&c(i,["logprobs"],v);const w=a(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const P=a(e,["frequencyPenalty"]);P!=null&&c(i,["frequencyPenalty"],P);const N=a(e,["seed"]);N!=null&&c(i,["seed"],N);const T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);const I=a(e,["responseSchema"]);I!=null&&c(i,["responseSchema"],Bf(I));const A=a(e,["responseJsonSchema"]);A!=null&&c(i,["responseJsonSchema"],A);const D=a(e,["routingConfig"]);D!=null&&c(i,["routingConfig"],D);const L=a(e,["modelSelectionConfig"]);L!=null&&c(i,["modelConfig"],L);const b=a(e,["safetySettings"]);if(n!==void 0&&b!=null){let H=b;Array.isArray(H)&&(H=H.map(W=>W)),c(n,["safetySettings"],H)}const C=a(e,["tools"]);if(n!==void 0&&C!=null){let H=zi(C);Array.isArray(H)&&(H=H.map(W=>z0(qi(W)))),c(n,["tools"],H)}const E=a(e,["toolConfig"]);n!==void 0&&E!=null&&c(n,["toolConfig"],E);const S=a(e,["labels"]);n!==void 0&&S!=null&&c(n,["labels"],S);const R=a(e,["cachedContent"]);n!==void 0&&R!=null&&c(n,["cachedContent"],Ln(t,R));const k=a(e,["responseModalities"]);k!=null&&c(i,["responseModalities"],k);const V=a(e,["mediaResolution"]);V!=null&&c(i,["mediaResolution"],V);const x=a(e,["speechConfig"]);x!=null&&c(i,["speechConfig"],Gf(x));const oe=a(e,["audioTimestamp"]);oe!=null&&c(i,["audioTimestamp"],oe);const We=a(e,["thinkingConfig"]);We!=null&&c(i,["thinkingConfig"],We);const ln=a(e,["imageConfig"]);if(ln!=null&&c(i,["imageConfig"],Ix(ln)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Tt=a(e,["modelArmorConfig"]);return n!==void 0&&Tt!=null&&c(n,["modelArmorConfig"],Tt),i}function jg(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ht(o);Array.isArray(l)&&(l=l.map(u=>$a(u))),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&c(r,["generationConfig"],JP(t,s,r)),r}function ey(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ht(o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&c(r,["generationConfig"],YP(t,s,r)),r}function ty(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>yP(h))),c(n,["candidates"],f)}const o=a(t,["modelVersion"]);o!=null&&c(n,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&c(n,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(n,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(n,["usageMetadata"],u),n}function ny(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>p)),c(n,["candidates"],h)}const o=a(t,["createTime"]);o!=null&&c(n,["createTime"],o);const s=a(t,["modelVersion"]);s!=null&&c(n,["modelVersion"],s);const l=a(t,["promptFeedback"]);l!=null&&c(n,["promptFeedback"],l);const u=a(t,["responseId"]);u!=null&&c(n,["responseId"],u);const f=a(t,["usageMetadata"]);return f!=null&&c(n,["usageMetadata"],f),n}function QP(t,e,n){const r={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const s=a(t,["guidanceScale"]);if(e!==void 0&&s!=null&&c(e,["parameters","guidanceScale"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const f=a(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&c(e,["parameters","includeSafetyAttributes"],f);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const p=a(t,["language"]);e!==void 0&&p!=null&&c(e,["parameters","language"],p);const m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&c(e,["parameters","outputOptions","mimeType"],m);const v=a(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&c(e,["parameters","outputOptions","compressionQuality"],v),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=a(t,["imageSize"]);if(e!==void 0&&w!=null&&c(e,["parameters","sampleImageSize"],w),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function XP(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&c(e,["parameters","guidanceScale"],u);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["parameters","seed"],f);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&c(e,["parameters","includeSafetyAttributes"],m);const v=a(t,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const w=a(t,["language"]);e!==void 0&&w!=null&&c(e,["parameters","language"],w);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const T=a(t,["addWatermark"]);e!==void 0&&T!=null&&c(e,["parameters","addWatermark"],T);const I=a(t,["labels"]);e!==void 0&&I!=null&&c(e,["labels"],I);const A=a(t,["imageSize"]);e!==void 0&&A!=null&&c(e,["parameters","sampleImageSize"],A);const D=a(t,["enhancePrompt"]);return e!==void 0&&D!=null&&c(e,["parameters","enhancePrompt"],D),r}function ZP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["config"]);return s!=null&&QP(s,r),r}function jP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["config"]);return s!=null&&XP(s,r),r}function ex(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>fx(l))),c(n,["generatedImages"],s)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(n,["positivePromptSafetyAttributes"],H0(o)),n}function tx(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Ka(l))),c(n,["generatedImages"],s)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(n,["positivePromptSafetyAttributes"],q0(o)),n}function nx(t,e,n){const r={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["resolution"]);e!==void 0&&l!=null&&c(e,["parameters","resolution"],l);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=a(t,["negativePrompt"]);e!==void 0&&f!=null&&c(e,["parameters","negativePrompt"],f);const h=a(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(t,["lastFrame"]);e!==void 0&&p!=null&&c(e,["instances[0]","lastFrame"],Wa(p));const m=a(t,["referenceImages"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>iN(w))),c(e,["instances[0]","referenceImages"],v)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function rx(t,e,n){const r={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=a(t,["fps"]);e!==void 0&&s!=null&&c(e,["parameters","fps"],s);const l=a(t,["durationSeconds"]);e!==void 0&&l!=null&&c(e,["parameters","durationSeconds"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=a(t,["resolution"]);e!==void 0&&h!=null&&c(e,["parameters","resolution"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["pubsubTopic"]);e!==void 0&&m!=null&&c(e,["parameters","pubsubTopic"],m);const v=a(t,["negativePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","negativePrompt"],v);const w=a(t,["enhancePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","enhancePrompt"],w);const P=a(t,["generateAudio"]);e!==void 0&&P!=null&&c(e,["parameters","generateAudio"],P);const N=a(t,["lastFrame"]);e!==void 0&&N!=null&&c(e,["instances[0]","lastFrame"],sn(N));const T=a(t,["referenceImages"]);if(e!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(L=>oN(L))),c(e,["instances[0]","referenceImages"],D)}const I=a(t,["mask"]);e!==void 0&&I!=null&&c(e,["instances[0]","mask"],rN(I));const A=a(t,["compressionQuality"]);return e!==void 0&&A!=null&&c(e,["parameters","compressionQuality"],A),r}function ix(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const o=a(t,["done"]);o!=null&&c(n,["done"],o);const s=a(t,["error"]);s!=null&&c(n,["error"],s);const l=a(t,["response","generateVideoResponse"]);return l!=null&&c(n,["response"],ax(l)),n}function ox(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const o=a(t,["done"]);o!=null&&c(n,["done"],o);const s=a(t,["error"]);s!=null&&c(n,["error"],s);const l=a(t,["response"]);return l!=null&&c(n,["response"],ux(l)),n}function sx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["image"]);s!=null&&c(r,["instances[0]","image"],Wa(s));const l=a(e,["video"]);l!=null&&c(r,["instances[0]","video"],$0(l));const u=a(e,["source"]);u!=null&&cx(u,r);const f=a(e,["config"]);return f!=null&&nx(f,r),r}function lx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["image"]);s!=null&&c(r,["instances[0]","image"],sn(s));const l=a(e,["video"]);l!=null&&c(r,["instances[0]","video"],K0(l));const u=a(e,["source"]);u!=null&&dx(u,r);const f=a(e,["config"]);return f!=null&&rx(f,r),r}function ax(t,e){const n={},r=a(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>px(l))),c(n,["generatedVideos"],s)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(n,["raiMediaFilteredCount"],i);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function ux(t,e){const n={},r=a(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>mx(l))),c(n,["generatedVideos"],s)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(n,["raiMediaFilteredCount"],i);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function cx(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Wa(o));const s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],$0(s)),r}function dx(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],sn(o));const s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],K0(s)),r}function fx(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["image"],Sx(r));const i=a(t,["raiFilteredReason"]);i!=null&&c(n,["raiFilteredReason"],i);const o=a(t,["_self"]);return o!=null&&c(n,["safetyAttributes"],H0(o)),n}function Ka(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["image"],G0(r));const i=a(t,["raiFilteredReason"]);i!=null&&c(n,["raiFilteredReason"],i);const o=a(t,["_self"]);o!=null&&c(n,["safetyAttributes"],q0(o));const s=a(t,["prompt"]);return s!=null&&c(n,["enhancedPrompt"],s),n}function hx(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["mask"],G0(r));const i=a(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["labels"],o)}return n}function px(t,e){const n={},r=a(t,["video"]);return r!=null&&c(n,["video"],tN(r)),n}function mx(t,e){const n={},r=a(t,["_self"]);return r!=null&&c(n,["video"],nN(r)),n}function gx(t,e){const n={},r=a(t,["modelSelectionConfig"]);r!=null&&c(n,["modelConfig"],r);const i=a(t,["responseJsonSchema"]);i!=null&&c(n,["responseJsonSchema"],i);const o=a(t,["audioTimestamp"]);o!=null&&c(n,["audioTimestamp"],o);const s=a(t,["candidateCount"]);s!=null&&c(n,["candidateCount"],s);const l=a(t,["enableAffectiveDialog"]);l!=null&&c(n,["enableAffectiveDialog"],l);const u=a(t,["frequencyPenalty"]);u!=null&&c(n,["frequencyPenalty"],u);const f=a(t,["logprobs"]);f!=null&&c(n,["logprobs"],f);const h=a(t,["maxOutputTokens"]);h!=null&&c(n,["maxOutputTokens"],h);const p=a(t,["mediaResolution"]);p!=null&&c(n,["mediaResolution"],p);const m=a(t,["presencePenalty"]);m!=null&&c(n,["presencePenalty"],m);const v=a(t,["responseLogprobs"]);v!=null&&c(n,["responseLogprobs"],v);const w=a(t,["responseMimeType"]);w!=null&&c(n,["responseMimeType"],w);const P=a(t,["responseModalities"]);P!=null&&c(n,["responseModalities"],P);const N=a(t,["responseSchema"]);N!=null&&c(n,["responseSchema"],N);const T=a(t,["routingConfig"]);T!=null&&c(n,["routingConfig"],T);const I=a(t,["seed"]);I!=null&&c(n,["seed"],I);const A=a(t,["speechConfig"]);A!=null&&c(n,["speechConfig"],A);const D=a(t,["stopSequences"]);D!=null&&c(n,["stopSequences"],D);const L=a(t,["temperature"]);L!=null&&c(n,["temperature"],L);const b=a(t,["thinkingConfig"]);b!=null&&c(n,["thinkingConfig"],b);const C=a(t,["topK"]);C!=null&&c(n,["topK"],C);const E=a(t,["topP"]);if(E!=null&&c(n,["topP"],E),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function yx(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function vx(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function _x(t,e){const n={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=a(t,["enableWidget"]);return r!=null&&c(n,["enableWidget"],r),n}function Ex(t,e){const n={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=a(t,["timeRangeFilter"]);return r!=null&&c(n,["timeRangeFilter"],r),n}function Tx(t,e){const n={},r=a(t,["aspectRatio"]);r!=null&&c(n,["aspectRatio"],r);const i=a(t,["imageSize"]);if(i!=null&&c(n,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Ix(t,e){const n={},r=a(t,["aspectRatio"]);r!=null&&c(n,["aspectRatio"],r);const i=a(t,["imageSize"]);i!=null&&c(n,["imageSize"],i);const o=a(t,["personGeneration"]);o!=null&&c(n,["personGeneration"],o);const s=a(t,["outputMimeType"]);s!=null&&c(n,["imageOutputOptions","mimeType"],s);const l=a(t,["outputCompressionQuality"]);return l!=null&&c(n,["imageOutputOptions","compressionQuality"],l),n}function Sx(t,e){const n={},r=a(t,["bytesBase64Encoded"]);r!=null&&c(n,["imageBytes"],fr(r));const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function G0(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["bytesBase64Encoded"]);i!=null&&c(n,["imageBytes"],fr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function Wa(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=a(t,["imageBytes"]);r!=null&&c(n,["bytesBase64Encoded"],fr(r));const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function sn(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["imageBytes"]);i!=null&&c(n,["bytesBase64Encoded"],fr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function wx(t,e,n,r){const i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);const l=a(e,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],V0(t,u)),i}function Cx(t,e,n,r){const i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);const l=a(e,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],V0(t,u)),i}function Ax(t,e,n){const r={},i=a(e,["config"]);return i!=null&&wx(t,i,r),r}function Rx(t,e,n){const r={},i=a(e,["config"]);return i!=null&&Cx(t,i,r),r}function Px(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["_self"]);if(o!=null){let s=L0(o);Array.isArray(s)&&(s=s.map(l=>fd(l))),c(n,["models"],s)}return n}function xx(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["_self"]);if(o!=null){let s=L0(o);Array.isArray(s)&&(s=s.map(l=>hd(l))),c(n,["models"],s)}return n}function Nx(t,e){const n={},r=a(t,["maskMode"]);r!=null&&c(n,["maskMode"],r);const i=a(t,["segmentationClasses"]);i!=null&&c(n,["maskClasses"],i);const o=a(t,["maskDilation"]);return o!=null&&c(n,["dilation"],o),n}function fd(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["displayName"]);i!=null&&c(n,["displayName"],i);const o=a(t,["description"]);o!=null&&c(n,["description"],o);const s=a(t,["version"]);s!=null&&c(n,["version"],s);const l=a(t,["_self"]);l!=null&&c(n,["tunedModelInfo"],Kx(l));const u=a(t,["inputTokenLimit"]);u!=null&&c(n,["inputTokenLimit"],u);const f=a(t,["outputTokenLimit"]);f!=null&&c(n,["outputTokenLimit"],f);const h=a(t,["supportedGenerationMethods"]);h!=null&&c(n,["supportedActions"],h);const p=a(t,["temperature"]);p!=null&&c(n,["temperature"],p);const m=a(t,["maxTemperature"]);m!=null&&c(n,["maxTemperature"],m);const v=a(t,["topP"]);v!=null&&c(n,["topP"],v);const w=a(t,["topK"]);w!=null&&c(n,["topK"],w);const P=a(t,["thinking"]);return P!=null&&c(n,["thinking"],P),n}function hd(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["displayName"]);i!=null&&c(n,["displayName"],i);const o=a(t,["description"]);o!=null&&c(n,["description"],o);const s=a(t,["versionId"]);s!=null&&c(n,["version"],s);const l=a(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>qP(v))),c(n,["endpoints"],m)}const u=a(t,["labels"]);u!=null&&c(n,["labels"],u);const f=a(t,["_self"]);f!=null&&c(n,["tunedModelInfo"],Wx(f));const h=a(t,["defaultCheckpointId"]);h!=null&&c(n,["defaultCheckpointId"],h);const p=a(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),c(n,["checkpoints"],m)}return n}function kx(t,e){const n={},r=a(t,["mediaResolution"]);r!=null&&c(n,["mediaResolution"],r);const i=a(t,["codeExecutionResult"]);i!=null&&c(n,["codeExecutionResult"],i);const o=a(t,["executableCode"]);o!=null&&c(n,["executableCode"],o);const s=a(t,["fileData"]);s!=null&&c(n,["fileData"],zP(s));const l=a(t,["functionCall"]);l!=null&&c(n,["functionCall"],$P(l));const u=a(t,["functionResponse"]);u!=null&&c(n,["functionResponse"],u);const f=a(t,["inlineData"]);f!=null&&c(n,["inlineData"],gP(f));const h=a(t,["text"]);h!=null&&c(n,["text"],h);const p=a(t,["thought"]);p!=null&&c(n,["thought"],p);const m=a(t,["thoughtSignature"]);m!=null&&c(n,["thoughtSignature"],m);const v=a(t,["videoMetadata"]);return v!=null&&c(n,["videoMetadata"],v),n}function Mx(t,e){const n={},r=a(t,["productImage"]);return r!=null&&c(n,["image"],sn(r)),n}function Dx(t,e,n){const r={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);const s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const h=a(t,["addWatermark"]);e!==void 0&&h!=null&&c(e,["parameters","addWatermark"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m);const v=a(t,["enhancePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","enhancePrompt"],v);const w=a(t,["labels"]);return e!==void 0&&w!=null&&c(e,["labels"],w),r}function Vx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["source"]);o!=null&&Fx(o,r);const s=a(e,["config"]);return s!=null&&Dx(s,r),r}function Lx(t,e){const n={},r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ka(o))),c(n,["generatedImages"],i)}return n}function Fx(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],sn(o));const s=a(t,["productImages"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Mx(u))),c(e,["instances[0]","productImages"],l)}return r}function Ux(t,e){const n={},r=a(t,["referenceImage"]);r!=null&&c(n,["referenceImage"],sn(r));const i=a(t,["referenceId"]);i!=null&&c(n,["referenceId"],i);const o=a(t,["referenceType"]);o!=null&&c(n,["referenceType"],o);const s=a(t,["maskImageConfig"]);s!=null&&c(n,["maskImageConfig"],Nx(s));const l=a(t,["controlImageConfig"]);l!=null&&c(n,["controlImageConfig"],SP(l));const u=a(t,["styleImageConfig"]);u!=null&&c(n,["styleImageConfig"],u);const f=a(t,["subjectImageConfig"]);return f!=null&&c(n,["subjectImageConfig"],f),n}function H0(t,e){const n={},r=a(t,["safetyAttributes","categories"]);r!=null&&c(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);i!=null&&c(n,["scores"],i);const o=a(t,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function q0(t,e){const n={},r=a(t,["safetyAttributes","categories"]);r!=null&&c(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);i!=null&&c(n,["scores"],i);const o=a(t,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function bx(t,e){const n={},r=a(t,["category"]);if(r!=null&&c(n,["category"],r),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&c(n,["threshold"],i),n}function Ox(t,e){const n={},r=a(t,["image"]);return r!=null&&c(n,["image"],sn(r)),n}function Bx(t,e,n){const r={},i=a(t,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);const o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);const s=a(t,["confidenceThreshold"]);e!==void 0&&s!=null&&c(e,["parameters","confidenceThreshold"],s);const l=a(t,["maskDilation"]);e!==void 0&&l!=null&&c(e,["parameters","maskDilation"],l);const u=a(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&c(e,["parameters","binaryColorThreshold"],u);const f=a(t,["labels"]);return e!==void 0&&f!=null&&c(e,["labels"],f),r}function Gx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["source"]);o!=null&&qx(o,r);const s=a(e,["config"]);return s!=null&&Bx(s,r),r}function Hx(t,e){const n={},r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>hx(o))),c(n,["generatedMasks"],i)}return n}function qx(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],sn(o));const s=a(t,["scribbleImage"]);return e!==void 0&&s!=null&&c(e,["instances[0]","scribble"],Ox(s)),r}function zx(t,e){const n={},r=a(t,["retrievalConfig"]);r!=null&&c(n,["retrievalConfig"],r);const i=a(t,["functionCallingConfig"]);return i!=null&&c(n,["functionCallingConfig"],KP(i)),n}function $x(t,e){const n={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["computerUse"]);r!=null&&c(n,["computerUse"],r);const i=a(t,["fileSearch"]);i!=null&&c(n,["fileSearch"],i);const o=a(t,["codeExecution"]);if(o!=null&&c(n,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),c(n,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(n,["googleMaps"],_x(l));const u=a(t,["googleSearch"]);u!=null&&c(n,["googleSearch"],Ex(u));const f=a(t,["googleSearchRetrieval"]);f!=null&&c(n,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(n,["urlContext"],h),n}function z0(t,e){const n={},r=a(t,["retrieval"]);r!=null&&c(n,["retrieval"],r);const i=a(t,["computerUse"]);if(i!=null&&c(n,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=a(t,["codeExecution"]);o!=null&&c(n,["codeExecution"],o);const s=a(t,["enterpriseWebSearch"]);s!=null&&c(n,["enterpriseWebSearch"],s);const l=a(t,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>WP(v))),c(n,["functionDeclarations"],m)}const u=a(t,["googleMaps"]);u!=null&&c(n,["googleMaps"],u);const f=a(t,["googleSearch"]);f!=null&&c(n,["googleSearch"],f);const h=a(t,["googleSearchRetrieval"]);h!=null&&c(n,["googleSearchRetrieval"],h);const p=a(t,["urlContext"]);return p!=null&&c(n,["urlContext"],p),n}function Kx(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["createTime"]);i!=null&&c(n,["createTime"],i);const o=a(t,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function Wx(t,e){const n={},r=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["createTime"]);i!=null&&c(n,["createTime"],i);const o=a(t,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function Jx(t,e,n){const r={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),r}function Yx(t,e,n){const r={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),r}function Qx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","name"],de(t,i));const o=a(e,["config"]);return o!=null&&Jx(o,r),r}function Xx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["config"]);return o!=null&&Yx(o,r),r}function Zx(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);const s=a(t,["personGeneration"]);e!==void 0&&s!=null&&c(e,["parameters","personGeneration"],s);const l=a(t,["includeRaiReason"]);e!==void 0&&l!=null&&c(e,["parameters","includeRaiReason"],l);const u=a(t,["outputMimeType"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","mimeType"],u);const f=a(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","compressionQuality"],f);const h=a(t,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const p=a(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=a(t,["labels"]);e!==void 0&&m!=null&&c(e,["labels"],m);const v=a(t,["numberOfImages"]);e!==void 0&&v!=null&&c(e,["parameters","sampleCount"],v);const w=a(t,["mode"]);return e!==void 0&&w!=null&&c(e,["parameters","mode"],w),r}function jx(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["image"]);o!=null&&c(r,["instances[0]","image"],sn(o));const s=a(e,["upscaleFactor"]);s!=null&&c(r,["parameters","upscaleConfig","upscaleFactor"],s);const l=a(e,["config"]);return l!=null&&Zx(l,r),r}function eN(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ka(s))),c(n,["generatedImages"],o)}return n}function tN(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["uri"],r);const i=a(t,["encodedVideo"]);i!=null&&c(n,["videoBytes"],fr(i));const o=a(t,["encoding"]);return o!=null&&c(n,["mimeType"],o),n}function nN(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["uri"],r);const i=a(t,["bytesBase64Encoded"]);i!=null&&c(n,["videoBytes"],fr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function rN(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["_self"],sn(r));const i=a(t,["maskMode"]);return i!=null&&c(n,["maskMode"],i),n}function iN(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["image"],Wa(r));const i=a(t,["referenceType"]);return i!=null&&c(n,["referenceType"],i),n}function oN(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["image"],sn(r));const i=a(t,["referenceType"]);return i!=null&&c(n,["referenceType"],i),n}function $0(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["uri"],r);const i=a(t,["videoBytes"]);i!=null&&c(n,["encodedVideo"],fr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["encoding"],o),n}function K0(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["videoBytes"]);i!=null&&c(n,["bytesBase64Encoded"],fr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function lN(t){const e={},n=a(t,["config"]);return n!=null&&sN(n,e),e}function aN(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function uN(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&aN(r,e),e}function cN(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function dN(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["customMetadata"],o)}const i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&c(e,["chunkingConfig"],i),n}function fN(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],pN(s)),e}function hN(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const i=a(t,["config"]);return i!=null&&dN(i,e),e}function pN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function mN(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function gN(t){const e={},n=a(t,["config"]);return n!=null&&mN(n,e),e}function yN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["fileSearchStores"],o)}return e}function W0(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function vN(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&W0(r,e),e}function _N(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EN="Content-Type",TN="X-Server-Timeout",IN="User-Agent",pd="x-goog-api-client",SN="1.40.0",wN=`google-genai-sdk/${SN}`,CN="v1beta1",AN="v1beta";class RN{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CN}else{if(!this.clientOptions.apiKey)throw new as({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:AN,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===ad.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&PN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ry(i),new ud(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ry(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return nn(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:h}=yield X(i.read());if(f){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(h,{stream:!0});try{const w=JSON.parse(p);if("error"in w){const P=JSON.parse(JSON.stringify(w.error)),N=P.status,T=P.code,I=`got status: ${N}. ${JSON.stringify(w)}`;if(T>=400&&T<600)throw new as({message:I,status:T})}}catch(w){if(w.name==="ApiError")throw w}s+=p;let m=-1,v=0;for(;;){m=-1,v=0;for(const N of u){const T=s.indexOf(N);T!==-1&&(m===-1||T<m)&&(m=T,v=N.length)}if(m===-1)break;const w=s.substring(0,m);s=s.substring(m+v);const P=w.trim();if(P.startsWith(l)){const N=P.substring(l.length).trim();try{const T=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield X(new ud(T))}catch(T){throw new Error(`exception parsing stream chunk ${N}. ${T}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=wN+" "+this.clientOptions.userAgentExtra;return e[IN]=n,e[pd]=n,e[EN]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(TN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u={file:i},f=this.getFileName(e),h=z("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,f,u,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&W0(r,p);const m=await this.fetchUploadUrl(f,l,u,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=f==null?void 0:f.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function ry(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new as({message:i,status:n}):new Error(i)}}function PN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const f=s[u],h=l[u];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[u]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[u]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xN="mcp_used/unknown";let NN=!1;function J0(t){for(const e of t)if(kN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return NN}function Y0(t){var e;const n=(e=t[pd])!==null&&e!==void 0?e:"";t[pd]=(n+` ${xN}`).trimStart()}function kN(t){return t!==null&&typeof t=="object"&&t instanceof qf}function MN(t){return nn(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield X(n.listTools({cursor:i}));for(const l of s.tools)yield yield X(l),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class qf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qf(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,u=(n=void 0,rn(MN(h))),f;f=await u.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),lA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function DN(t,e,n){const r=new jC;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class VN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=UN(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(A=>{f=A}),p=e.callbacks,m=function(){f({})},v=this.apiClient,w={onopen:m,onmessage:A=>{DN(v,p.onmessage,A)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(A){}},P=this.webSocketFactory.create(u,FN(s),w);P.connect(),await h;const I={setup:{model:de(this.apiClient,e.model)}};return P.send(JSON.stringify(I)),new LN(P,this.apiClient)}}class LN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sP(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oP(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hi.PLAY)}pause(){this.sendPlaybackControl(hi.PAUSE)}stop(){this.sendPlaybackControl(hi.STOP)}resetContext(){this.sendPlaybackControl(hi.RESET_CONTEXT)}close(){this.conn.close()}}function FN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function UN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ON(t,e,n){const r=new ZC;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=uP(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class BN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new VN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&J0(e.config.tools)&&Y0(p);const m=zN(p);if(this.apiClient.isVertexAI()){const S=this.apiClient.getProject(),R=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),V=!!S&&!!R||!!k;this.apiClient.getCustomBaseUrl()&&!V?h=u:(h=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h))}else{const S=this.apiClient.getApiKey();let R="BidiGenerateContent",k="key";S!=null&&S.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",k="access_token"),h=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${R}?${k}=${S}`}let v=()=>{};const w=new Promise(S=>{v=S}),P=e.callbacks,N=function(){var S;(S=P==null?void 0:P.onopen)===null||S===void 0||S.call(P),v({})},T=this.apiClient,I={onopen:N,onmessage:S=>{ON(T,P.onmessage,S)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(S){}},A=this.webSocketFactory.create(h,qN(m),I);A.connect(),await w;let D=de(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const S=this.apiClient.getProject(),R=this.apiClient.getLocation();S&&R&&(D=`projects/${S}/locations/${R}/`+D)}let L={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ca.AUDIO]}:e.config.responseModalities=[ca.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],C=[];for(const S of b)if(this.isCallableTool(S)){const R=S;C.push(await R.tool())}else C.push(S);C.length>0&&(e.config.tools=C);const E={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=iP(this.apiClient,E):L=rP(this.apiClient,E),delete L.config,A.send(JSON.stringify(L)),new HN(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GN={turnComplete:!0};class HN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ht(n.turns),e.isVertexAI()||(r=r.map(i=>$a(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(bN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},GN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:aP(e)}:n={realtimeInput:lP(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function qN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function zN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iy=10;function oy(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ii(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ii(t){return"callTool"in t&&typeof t.callTool=="function"}function $N(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ii(i)))!==null&&r!==void 0?r:!1}function sy(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Ii(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function ly(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KN extends Vn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$N(n)||oy(n.config))return await this.generateContentInternal(u);const f=sy(n);if(f.length>0){const P=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let h,p;const m=Ht(u.contents),v=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:iy;let w=0;for(;w<v&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const P=h.candidates[0].content,N=[];for(const T of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Ii(T)){const A=await T.callTool(h.functionCalls);N.push(...A)}w++,p={role:"user",parts:N},u.contents=Ht(u.contents),u.contents.push(P),u.contents.push(p),ly(u.config)&&(m.push(P),m.push(p))}return ly(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),oy(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=sy(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(f&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Gr(xn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Ii(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&J0(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Y0(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ii(s)){const l=s,u=await l.tool();for(const f of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:iy;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(f,h,p){return nn(this,arguments,function*(){for(var m,v,w,P,N,T;l<o;){s&&(l++,s=!1);const L=yield X(f.processParamsMaybeAddMcpUsage(p)),b=yield X(f.generateContentStreamInternal(L)),C=[],E=[];try{for(var I=!0,A=(v=void 0,rn(b)),D;D=yield X(A.next()),m=D.done,!m;I=!0){P=D.value,I=!1;const S=P;if(yield yield X(S),S.candidates&&(!((N=S.candidates[0])===null||N===void 0)&&N.content)){E.push(S.candidates[0].content);for(const R of(T=S.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(l<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const k=yield X(h.get(R.functionCall.name).callTool([R.functionCall]));C.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(S){v={error:S}}finally{try{!I&&!m&&(w=A.return)&&(yield X(w.call(A)))}finally{if(v)throw v.error}}if(C.length>0){s=!0;const S=new Eo;S.candidates=[{content:{role:"user",parts:C}}],yield yield X(S);const R=[];R.push(...E),R.push({role:"user",parts:C});const k=Ht(p.contents).concat(R);p.contents=k}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=ey(this.apiClient,e);return l=z("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ny(h),m=new Eo;return Object.assign(m,p),m})}else{const f=jg(this.apiClient,e);return l=z("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ty(h),m=new Eo;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=ey(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return nn(this,arguments,function*(){var m,v,w,P;try{for(var N=!0,T=rn(p),I;I=yield X(T.next()),m=I.done,!m;N=!0){P=I.value,N=!1;const A=P,D=ny(yield X(A.json()),e);D.sdkHttpResponse={headers:A.headers};const L=new Eo;Object.assign(L,D),yield yield X(L)}}catch(A){v={error:A}}finally{try{!N&&!m&&(w=T.return)&&(yield X(w.call(T)))}finally{if(v)throw v.error}}})})}else{const f=jg(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return nn(this,arguments,function*(){var m,v,w,P;try{for(var N=!0,T=rn(p),I;I=yield X(T.next()),m=I.done,!m;N=!0){P=I.value,N=!1;const A=P,D=ty(yield X(A.json()),e);D.sdkHttpResponse={headers:A.headers};const L=new Eo;Object.assign(L,D),yield yield X(L)}}catch(A){v={error:A}}finally{try{!N&&!m&&(w=T.return)&&(yield X(w.call(T)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=BP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=HP(h),m=new Fg;return Object.assign(m,p),m})}else{const f=OP(this.apiClient,e);return l=z("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=GP(h),m=new Fg;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=jP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=tx(h),m=new Ug;return Object.assign(m,p),m})}else{const f=ZP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ex(h),m=new Ug;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=LP(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=FP(u),h=new BC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=jx(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=eN(u),h=new GC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Vx(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=Lx(u),h=new HC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Gx(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=Hx(u),h=new qC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=vx(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>hd(h))}else{const f=yx(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>fd(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=Rx(this.apiClient,e);return l=z("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=xx(h),m=new bg;return Object.assign(m,p),m})}else{const f=Ax(this.apiClient,e);return l=z("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Px(h),m=new bg;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=Xx(this.apiClient,e);return l=z("{model}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>hd(h))}else{const f=Qx(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>fd(h))}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=kP(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=DP(h),m=new Og;return Object.assign(m,p),m})}else{const f=NP(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=MP(h),m=new Og;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=RP(this.apiClient,e);return l=z("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=xP(h),m=new Bg;return Object.assign(m,p),m})}else{const f=AP(this.apiClient,e);return l=z("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=PP(h),m=new Bg;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=_P(this.apiClient,e);return o=z("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=EP(u),h=new zC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=lx(this.apiClient,e);return l=z("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=ox(h),m=new da;return Object.assign(m,p),m})}else{const f=sx(this.apiClient,e);return l=z("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=ix(h),m=new da;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WN extends Vn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=VC(e);return l=z("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=DC(e);return l=z("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=AC(e);return o=z("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JN(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function YN(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ik(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function QN(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&c(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&c(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],rk(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function XN(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],QN(t,r,n)),n}function ZN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function jN(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ek(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function tk(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function nk(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Hf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],YN(dt(w)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let b=zi(P);Array.isArray(b)&&(b=b.map(C=>sk(qi(C)))),c(e,["setup","tools"],b)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],ok(N));const T=a(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","inputAudioTranscription"],T);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const D=a(t,["contextWindowCompression"]);e!==void 0&&D!=null&&c(e,["setup","contextWindowCompression"],D);const L=a(t,["proactivity"]);if(e!==void 0&&L!=null&&c(e,["setup","proactivity"],L),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function rk(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],nk(i,n)),n}function ik(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],ZN(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],jN(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],JN(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function ok(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sk(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],ek(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],tk(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lk(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function ak(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=lk(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class uk extends Vn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=XN(this.apiClient,e);o=z("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=ak(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ck(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function dk(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&ck(r,e),e}function fk(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function hk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function pk(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&hk(r,e),e}function mk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gk extends Vn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Gr(xn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fk(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=dk(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pk(e);return o=z("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=mk(u),h=new $C;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yk extends Vn{constructor(e,n=new gk(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Gr(xn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lN(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cN(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=uN(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gN(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=yN(u),h=new KC;return Object.assign(h,f),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=vN(e);return o=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=_N(u),h=new WC;return Object.assign(h,f),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hN(e);return o=z("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=fN(u),h=new Uf;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Q0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Q0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const vk=()=>Q0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const gd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kt extends Error{}class vt extends Kt{constructor(e,n,r,i){super(`${vt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ja({message:r,cause:gd(n)});const o=n;return e===400?new Z0(e,o,r,i):e===401?new j0(e,o,r,i):e===403?new eE(e,o,r,i):e===404?new tE(e,o,r,i):e===409?new nE(e,o,r,i):e===422?new rE(e,o,r,i):e===429?new iE(e,o,r,i):e>=500?new oE(e,o,r,i):new vt(e,o,r,i)}}class yd extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ja extends vt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class X0 extends Ja{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Z0 extends vt{}class j0 extends vt{}class eE extends vt{}class tE extends vt{}class nE extends vt{}class rE extends vt{}class iE extends vt{}class oE extends vt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _k=/^[a-z][a-z0-9+.-]*:/i,Ek=t=>_k.test(t);let vd=t=>(vd=Array.isArray,vd(t));const Tk=vd;let Ik=Tk;const ay=Ik;function Sk(t){if(!t)return!0;for(const e in t)return!1;return!0}function wk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Ck=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Kt(`${t} must be an integer`);if(e<0)throw new Kt(`${t} must be a positive integer`);return e},Ak=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rk=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xk=()=>{var t,e,n,r,i;const o=Pk();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":cy(Deno.build.os),"X-Stainless-Arch":uy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":cy((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":uy((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Nk();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Nk(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const uy=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let cl;const kk=()=>cl??(cl=xk());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Dk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return sE({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function lE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Vk(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lk=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tc(t,e,n){return aE(),new File(t,e??"unknown_file",n)}function Fk(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Uk=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bk=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&uE(t),Ok=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Bk(t,e,n){if(aE(),t=await t,bk(t))return t instanceof File?t:tc([await t.arrayBuffer()],t.name);if(Ok(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),tc(await _d(i),e,n)}const r=await _d(t);if(e||(e=Fk(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return tc(r,e,n)}async function _d(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(uE(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(Uk(t))try{for(var l=!0,u=rn(t),f;f=await u.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const h=i;s.push(...await _d(h))}}catch(h){n={error:h}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const h=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${Gk(t)}`)}return s}function Gk(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cE{constructor(e){this._client=e}}cE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dy=Object.freeze(Object.create(null)),Hk=(t=dE)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((h,p,m)=>{var v,w,P;/[?#]/.test(p)&&(i=!0);const N=r[m];let T=(i?encodeURIComponent:t)(""+N);return m!==r.length&&(N==null||typeof N=="object"&&N.toString===((P=Object.getPrototypeOf((w=Object.getPrototypeOf((v=N.hasOwnProperty)!==null&&v!==void 0?v:dy))!==null&&w!==void 0?w:dy))===null||P===void 0?void 0:P.toString))&&(T=N+"",o.push({start:h.length+p.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),h+p+(m===r.length?"":T)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=u.exec(l))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((h,p)=>h.start-p.start),o.length>0){let h=0;const p=o.reduce((m,v)=>{const w=" ".repeat(v.start-h),P="^".repeat(v.length);return h=v.start+v.length,m+w+P},"");throw new Kt(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},dl=Hk(dE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fE extends cE{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=ha(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Kt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Kt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(dl`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(dl`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(dl`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,l=ha(o,["api_version"]);return this._client.get(dl`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}fE._key=Object.freeze(["interactions"]);class hE extends fE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qk(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let fl;function zf(t){let e;return(fl??(e=new globalThis.TextEncoder,fl=e.encode.bind(e)))(t)}let hl;function fy(t){let e;return(hl??(e=new globalThis.TextDecoder,hl=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ya{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zf(e):e;this.buffer=qk([this.buffer,n]);const r=[];let i;for(;(i=zk(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(fy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=fy(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Ya.NEWLINE_CHARS=new Set([`
`,"\r"]);Ya.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zk(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function $k(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pa={off:0,error:200,warn:300,info:400,debug:500},hy=(t,e,n)=>{if(t){if(wk(pa,t))return t;mt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(pa))}`)}};function Ro(){}function pl(t,e,n){return!e||pa[t]>pa[n]?Ro:e[t].bind(e)}const Kk={error:Ro,warn:Ro,info:Ro,debug:Ro};let py=new WeakMap;function mt(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Kk;const i=py.get(n);if(i&&i[0]===r)return i[1];const o={error:pl("error",n,r),warn:pl("warn",n,r),info:pl("info",n,r),debug:pl("debug",n,r)};return py.set(n,[r,o]),o}const Tr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?mt(r):console;function s(){return nn(this,arguments,function*(){var u,f,h,p;if(i)throw new Kt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,w=rn(Wk(e,n)),P;P=yield X(w.next()),u=P.done,!u;v=!0){p=P.value,v=!1;const N=p;if(!m)if(N.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield X(JSON.parse(N.data))}catch(T){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),T}}}catch(N){f={error:N}}finally{try{!v&&!u&&(h=w.return)&&(yield X(h.call(w)))}finally{if(f)throw f.error}}m=!0}catch(N){if(md(N))return yield X(void 0);throw N}finally{m||n.abort()}})}return new pi(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return nn(this,arguments,function*(){var u,f,h,p;const m=new Ya,v=lE(e);try{for(var w=!0,P=rn(v),N;N=yield X(P.next()),u=N.done,!u;w=!0){p=N.value,w=!1;const T=p;for(const I of m.decode(T))yield yield X(I)}}catch(T){f={error:T}}finally{try{!w&&!u&&(h=P.return)&&(yield X(h.call(P)))}finally{if(f)throw f.error}}for(const T of m.flush())yield yield X(T)})}function s(){return nn(this,arguments,function*(){var u,f,h,p;if(i)throw new Kt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,w=rn(o()),P;P=yield X(w.next()),u=P.done,!u;v=!0){p=P.value,v=!1;const N=p;m||N&&(yield yield X(JSON.parse(N)))}}catch(N){f={error:N}}finally{try{!v&&!u&&(h=w.return)&&(yield X(h.call(w)))}finally{if(f)throw f.error}}m=!0}catch(N){if(md(N))return yield X(void 0);throw N}finally{m||n.abort()}})}return new pi(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new pi(()=>i(e),this.controller,this.client),new pi(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return sE({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=zf(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Wk(t,e){return nn(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Kt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Kt("Attempted to iterate over a response with no body");const l=new Yk,u=new Ya,f=lE(t.body);try{for(var h=!0,p=rn(Jk(f)),m;m=yield X(p.next()),r=m.done,!r;h=!0){s=m.value,h=!1;const v=s;for(const w of u.decode(v)){const P=l.decode(w);P&&(yield yield X(P))}}}catch(v){i={error:v}}finally{try{!h&&!r&&(o=p.return)&&(yield X(o.call(p)))}finally{if(i)throw i.error}}for(const v of u.flush()){const w=l.decode(v);w&&(yield yield X(w))}})}function Jk(t){return nn(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var l=!0,u=rn(t),f;f=yield X(u.next()),n=f.done,!n;l=!0){o=f.value,l=!1;const h=o;if(h==null)continue;const p=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?zf(h):h;let m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let v;for(;(v=$k(s))!==-1;)yield yield X(s.slice(0,v)),s=s.slice(v)}}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield X(i.call(u)))}finally{if(r)throw r.error}}s.length>0&&(yield yield X(s))})}class Yk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Qk(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Qk(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xk(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var l;if(e.options.stream)return mt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):pi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),f=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return mt(t).debug(`[${r}] response parsed`,Tr({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $f extends Promise{constructor(e,n,r=Xk){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new $f(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pE=Symbol("brand.privateNullableHeaders");function*Zk(t){if(!t)return;if(pE in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ay(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=ay(r[1])?r[1]:[r[1]];let s=!1;for(const l of o)l!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,l])}}const To=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of Zk(r)){const l=o.toLowerCase();i.has(l)||(e.delete(o),i.add(l)),s===null?(e.delete(o),n.add(l)):(e.append(o,s),n.delete(l))}}return{[pE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nc=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=EC)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mE;class Qa{constructor(e){var n,r,i,o,s,l,u,{baseURL:f=nc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=nc("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=ha(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:Qa.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const w="warn";this.logLevel=w,this.logLevel=(s=(o=hy(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:hy(nc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:w,this.fetchOptions=v.fetchOptions,this.maxRetries=(l=v.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=v.fetch)!==null&&u!==void 0?u:Mk(),this.encoder=Lk,this._options=v,this.apiKey=h,this.apiVersion=p,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=To([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return To([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return To([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Kt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xr}`}defaultIdempotencyKey(){return`stainless-node-retry-${vk()}`}makeStatusError(e,n,r,i){return vt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=Ek(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Sk(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new $f(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const l=await e,u=(i=l.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:f,url:h,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(f,{url:h,options:l});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(mt(this).debug(`[${m}] sending request`,Tr({retryOfRequestLogID:r,method:l.method,url:h,options:l,headers:f.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new yd;const P=new AbortController,N=await this.fetchWithTimeout(h,f,p,P).catch(gd),T=Date.now();if(N instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new yd;const D=md(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(n)return mt(this).info(`[${m}] connection ${D?"timed out":"failed"} - ${A}`),mt(this).debug(`[${m}] connection ${D?"timed out":"failed"} (${A})`,Tr({retryOfRequestLogID:r,url:h,durationMs:T-w,message:N.message})),this.retryRequest(l,n,r??m);throw mt(this).info(`[${m}] connection ${D?"timed out":"failed"} - error; no more retries left`),mt(this).debug(`[${m}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Tr({retryOfRequestLogID:r,url:h,durationMs:T-w,message:N.message})),D?new X0:new Ja({cause:N})}const I=`[${m}${v}] ${f.method} ${h} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${T-w}ms`;if(!N.ok){const A=await this.shouldRetry(N);if(n&&A){const S=`retrying, ${n} attempts remaining`;return await Vk(N.body),mt(this).info(`${I} - ${S}`),mt(this).debug(`[${m}] response error (${S})`,Tr({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:T-w})),this.retryRequest(l,n,r??m,N.headers)}const D=A?"error; no more retries left":"error; not retryable";mt(this).info(`${I} - ${D}`);const L=await N.text().catch(S=>gd(S).message),b=Ak(L),C=b?void 0:L;throw mt(this).debug(`[${m}] response error (${D})`,Tr({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:C,durationMs:Date.now()-w})),this.makeStatusError(N.status,b,C,N.headers)}return mt(this).info(I),mt(this).debug(`[${m}] response start`,Tr({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:T-w})),{response:N,options:l,controller:P,requestLogID:m,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:l}=o,u=ha(o,["signal","method"]),f=i.abort.bind(i);s&&s.addEventListener("abort",f,{once:!0});const h=setTimeout(f,r),p=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),u);l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const l=i==null?void 0:i.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(s=f)}const u=i==null?void 0:i.get("retry-after");if(u&&!s){const f=parseFloat(u);Number.isNaN(f)?s=Date.parse(u)-Date.now():s=f*1e3}if(!(s&&0<=s&&s<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Rk(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:l,path:u,query:f,defaultBaseURL:h}=s,p=this.buildURL(u,f,h);"timeout"in s&&Ck("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),w=await this.buildHeaders({options:e,method:l,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:w},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=To([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kk()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=To([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Dk(e)}:this.encoder({body:e,headers:r})}}Qa.DEFAULT_TIMEOUT=6e4;class Ke extends Qa{constructor(){super(...arguments),this.interactions=new hE(this)}}mE=Ke;Ke.GeminiNextGenAPIClient=mE;Ke.GeminiNextGenAPIClientError=Kt;Ke.APIError=vt;Ke.APIConnectionError=Ja;Ke.APIConnectionTimeoutError=X0;Ke.APIUserAbortError=yd;Ke.NotFoundError=tE;Ke.ConflictError=nE;Ke.RateLimitError=iE;Ke.BadRequestError=Z0;Ke.AuthenticationError=j0;Ke.InternalServerError=oE;Ke.PermissionDeniedError=eE;Ke.UnprocessableEntityError=rE;Ke.toFile=Bk;Ke.Interactions=hE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jk(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function e1(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function t1(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function n1(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function r1(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&c(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(a(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(a(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(a(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(a(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(a(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(a(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function i1(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const L=a(t,["validationDataset"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec"],rc(L))}else if(i==="PREFERENCE_TUNING"){const L=a(t,["validationDataset"]);e!==void 0&&L!=null&&c(e,["preferenceOptimizationSpec"],rc(L))}else if(i==="DISTILLATION"){const L=a(t,["validationDataset"]);e!==void 0&&L!=null&&c(e,["distillationSpec"],rc(L))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&c(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const L=a(t,["epochCount"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],L)}else if(l==="PREFERENCE_TUNING"){const L=a(t,["epochCount"]);e!==void 0&&L!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],L)}else if(l==="DISTILLATION"){const L=a(t,["epochCount"]);e!==void 0&&L!=null&&c(e,["distillationSpec","hyperParameters","epochCount"],L)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const L=a(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],L)}else if(u==="PREFERENCE_TUNING"){const L=a(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],L)}else if(u==="DISTILLATION"){const L=a(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&c(e,["distillationSpec","hyperParameters","learningRateMultiplier"],L)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const L=a(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],L)}else if(f==="PREFERENCE_TUNING"){const L=a(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],L)}else if(f==="DISTILLATION"){const L=a(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&c(e,["distillationSpec","exportLastCheckpointOnly"],L)}let h=a(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const L=a(t,["adapterSize"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],L)}else if(h==="PREFERENCE_TUNING"){const L=a(t,["adapterSize"]);e!==void 0&&L!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],L)}else if(h==="DISTILLATION"){const L=a(t,["adapterSize"]);e!==void 0&&L!=null&&c(e,["distillationSpec","hyperParameters","adapterSize"],L)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const L=a(t,["tuningMode"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","tuningMode"],L)}const m=a(t,["customBaseModel"]);e!==void 0&&m!=null&&c(e,["customBaseModel"],m);let v=a(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const L=a(t,["batchSize"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","hyperParameters","batchSize"],L)}let w=a(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const L=a(t,["learningRate"]);e!==void 0&&L!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRate"],L)}const P=a(t,["labels"]);e!==void 0&&P!=null&&c(e,["labels"],P);const N=a(t,["beta"]);e!==void 0&&N!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const T=a(t,["baseTeacherModel"]);e!==void 0&&T!=null&&c(e,["distillationSpec","baseTeacherModel"],T);const I=a(t,["tunedTeacherModelSource"]);e!==void 0&&I!=null&&c(e,["distillationSpec","tunedTeacherModelSource"],I);const A=a(t,["sftLossWeightMultiplier"]);e!==void 0&&A!=null&&c(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],A);const D=a(t,["outputUri"]);return e!==void 0&&D!=null&&c(e,["outputUri"],D),r}function o1(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&g1(o);const s=a(t,["config"]);return s!=null&&r1(s,n),n}function s1(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&y1(o,n,e);const s=a(t,["config"]);return s!=null&&i1(s,n,e),n}function l1(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function a1(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function u1(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function c1(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function d1(t,e){const n={},r=a(t,["config"]);return r!=null&&u1(r,n),n}function f1(t,e){const n={},r=a(t,["config"]);return r!=null&&c1(r,n),n}function h1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>gE(l))),c(n,["tuningJobs"],s)}return n}function p1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ed(l))),c(n,["tuningJobs"],s)}return n}function m1(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const i=a(t,["name"]);return i!=null&&c(n,["endpoint"],i),n}function g1(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["examples","examples"],i)}return n}function y1(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["distillationSpec","promptDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["distillationSpec","promptDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function gE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],M0(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["description"]);h!=null&&c(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],m1(m)),n}function Ed(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],M0(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["error"]);h!=null&&c(n,["error"],h);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);const v=a(t,["tunedModel"]);v!=null&&c(n,["tunedModel"],v);const w=a(t,["preTunedModel"]);w!=null&&c(n,["preTunedModel"],w);const P=a(t,["supervisedTuningSpec"]);P!=null&&c(n,["supervisedTuningSpec"],P);const N=a(t,["preferenceOptimizationSpec"]);N!=null&&c(n,["preferenceOptimizationSpec"],N);const T=a(t,["distillationSpec"]);T!=null&&c(n,["distillationSpec"],T);const I=a(t,["tuningDataStats"]);I!=null&&c(n,["tuningDataStats"],I);const A=a(t,["encryptionSpec"]);A!=null&&c(n,["encryptionSpec"],A);const D=a(t,["partnerModelTuningSpec"]);D!=null&&c(n,["partnerModelTuningSpec"],D);const L=a(t,["customBaseModel"]);L!=null&&c(n,["customBaseModel"],L);const b=a(t,["experiment"]);b!=null&&c(n,["experiment"],b);const C=a(t,["labels"]);C!=null&&c(n,["labels"],C);const E=a(t,["outputUri"]);E!=null&&c(n,["outputUri"],E);const S=a(t,["pipelineJob"]);S!=null&&c(n,["pipelineJob"],S);const R=a(t,["serviceAccount"]);R!=null&&c(n,["serviceAccount"],R);const k=a(t,["tunedModelDisplayName"]);k!=null&&c(n,["tunedModelDisplayName"],k);const V=a(t,["veoTuningSpec"]);return V!=null&&c(n,["veoTuningSpec"],V),n}function v1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function rc(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return i!=null&&c(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _1 extends Vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gr(xn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:ld.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=a1(e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>Ed(h))}else{const f=l1(e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>gE(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=f1(e);return l=z("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=p1(h),m=new Gg;return Object.assign(m,p),m})}else{const f=d1(e);return l=z("tunedModels",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=h1(h),m=new Gg;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=e1(e);return l=z("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=n1(h),m=new Hg;return Object.assign(m,p),m})}else{const f=jk(e);return l=z("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=t1(h),m=new Hg;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=s1(e,e);return o=z("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>Ed(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=o1(e);return o=z("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>v1(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E1{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const T1=1024*1024*8,I1=3,S1=1e3,w1=2,ma="x-goog-upload-status";async function C1(t,e,n){var r;const i=await yE(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ma])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function A1(t,e,n){var r;const i=await yE(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ma])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=A0(o),l=new bf;return Object.assign(l,s),l}async function yE(t,e,n){var r,i;let o=0,s=0,l=new ud(new Response),u="upload";for(o=t.size;s<o;){const f=Math.min(T1,o-s),h=t.slice(s,s+f);s+f>=o&&(u+=", finalize");let p=0,m=S1;for(;p<I1&&(l=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(f)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[ma]));)p++,await P1(m),m=m*w1;if(s+=f,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[ma])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function R1(t){return{size:t.size,type:t.type}}function P1(t){return new Promise(e=>setTimeout(e,t))}class x1{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C1(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A1(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await R1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N1{create(e,n,r){return new k1(e,n,r)}}class k1{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const my="x-goog-api-key";class M1{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(my)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(my,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D1="gl-node/";class V1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ke({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=wC(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new M1(this.apiKey);this.apiClient=new RN({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:D1+"web",uploader:new x1,downloader:new E1}),this.models=new KN(this.apiClient),this.live=new BN(this.apiClient,i,new N1),this.batches=new eR(this.apiClient),this.chats=new LR(this.models,this.apiClient),this.caches=new MR(this.apiClient),this.files=new WR(this.apiClient),this.operations=new WN(this.apiClient),this.authTokens=new uk(this.apiClient),this.tunings=new _1(this.apiClient),this.fileSearchStores=new yk(this.apiClient)}}var L1={API_KEY:"GEMINI_API_KEY_BURAYA_YAZILACAK"};const F1=async(t,e)=>{const n=new V1({apiKey:L1.API_KEY}),r=t.map(s=>s.name).join(", "),o=`
    Sen ofis kahve fonunu yneten elenceli, biraz sarkastik ama sevilen bir yapay zekasn.
    
    Durum Raporu:
    En ok katk salayan kahramanlar: ${e.slice(0,3).map(s=>`${s.name} (${s.totalPaid})`).join(", ")||"Henz kimse elini cebine atmad :("}
    Henz siftah olmayan, pamuk ellerin cebe gitmedii kiiler: ${r||"Herkes bir eyler ateledi, harika!"}

    Grev:
    Ofis grubuna (Slack/WhatsApp) atlacak ksa, komik ve tatl-sert bir mesaj yaz.
    Hi deme yapmayanlara (isim vermeden genel konuarak ya da ok tatl sitem ederek) demeye tevik et.
    Kasa durumunun kmlatif olduunu, damlaya damlaya gl olduunu hatrlat.
    Trk ofis kltrne uygun olsun. Emojiler kullan.
    Maksimum 3 cmle olsun.
  `;try{return(await n.models.generateContent({model:"gemini-3-flash-preview",contents:o,config:{temperature:.8}})).text||"Kahve hayattr, kasay dolduralm arkadalar! "}catch(s){return console.error("Gemini error:",s),"u an yaratclm tkand ama kahve lazm! "}};var gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},U1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,f=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|f>>6,v=f&63;u||(v=64,s||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):U1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||p==null)throw new b1;const m=o<<2|l>>4;if(r.push(m),f!==64){const v=l<<4&240|f>>2;if(r.push(v),p!==64){const w=f<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O1=function(t){const e=vE(t);return _E.encodeByteArray(e,!0)},ga=function(t){return O1(t).replace(/\./g,"")},B1=function(t){try{return _E.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=()=>G1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof gy>"u")return;const t=gy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&B1(t[1]);return e&&JSON.parse(e)},Kf=()=>{try{return H1()||q1()||z1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$1=t=>{var e,n;return(n=(e=Kf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},K1=t=>{const e=$1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EE=()=>{var t;return(t=Kf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ga(JSON.stringify(n)),ga(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q1(){var t;const e=(t=Kf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X1(){return!Q1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z1(){try{return typeof indexedDB=="object"}catch{return!1}}function j1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="FirebaseError";class Ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eM,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,TE.prototype.create)}}class TE{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?tM(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Ki(i,l,r)}}function tM(t,e){return t.replace(nM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nM=/\{\$([^}]+)}/g;function Td(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(yy(o)&&yy(s)){if(!Td(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oM(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ir){return this.instances.has(e)}getOptions(e=Ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ir){return this.component?this.component.multipleInstances?e:Ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iM(t){return t===Ir?void 0:t}function oM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const lM={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},aM=le.INFO,uM={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},cM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class IE{constructor(e){this.name=e,this._logLevel=aM,this._logHandler=cM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const dM=(t,e)=>e.some(n=>t instanceof n);let vy,_y;function fM(){return vy||(vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hM(){return _y||(_y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,Id=new WeakMap,wE=new WeakMap,ic=new WeakMap,Wf=new WeakMap;function pM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(nr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&SE.set(n,t)}).catch(()=>{}),Wf.set(e,t),e}function mM(t){if(Id.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Id.set(t,e)}let Sd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Id.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gM(t){Sd=t(Sd)}function yM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(oc(this),e,...n);return wE.set(r,e.sort?e.sort():[e]),nr(r)}:hM().includes(t)?function(...e){return t.apply(oc(this),e),nr(SE.get(this))}:function(...e){return nr(t.apply(oc(this),e))}}function vM(t){return typeof t=="function"?yM(t):(t instanceof IDBTransaction&&mM(t),dM(t,fM())?new Proxy(t,Sd):t)}function nr(t){if(t instanceof IDBRequest)return pM(t);if(ic.has(t))return ic.get(t);const e=vM(t);return e!==t&&(ic.set(t,e),Wf.set(e,t)),e}const oc=t=>Wf.get(t);function _M(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=nr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(nr(s.result),u.oldVersion,u.newVersion,nr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const EM=["get","getKey","getAll","getAllKeys","count"],TM=["put","add","delete","clear"],sc=new Map;function Ey(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sc.get(e))return sc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=TM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EM.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&u.done]))[0]};return sc.set(e,o),o}gM(t=>({...t,get:(e,n,r)=>Ey(e,n)||t.get(e,n,r),has:(e,n)=>!!Ey(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wd="@firebase/app",Ty="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new IE("@firebase/app"),wM="@firebase/app-compat",CM="@firebase/analytics-compat",AM="@firebase/analytics",RM="@firebase/app-check-compat",PM="@firebase/app-check",xM="@firebase/auth",NM="@firebase/auth-compat",kM="@firebase/database",MM="@firebase/data-connect",DM="@firebase/database-compat",VM="@firebase/functions",LM="@firebase/functions-compat",FM="@firebase/installations",UM="@firebase/installations-compat",bM="@firebase/messaging",OM="@firebase/messaging-compat",BM="@firebase/performance",GM="@firebase/performance-compat",HM="@firebase/remote-config",qM="@firebase/remote-config-compat",zM="@firebase/storage",$M="@firebase/storage-compat",KM="@firebase/firestore",WM="@firebase/vertexai-preview",JM="@firebase/firestore-compat",YM="firebase",QM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]",XM={[wd]:"fire-core",[wM]:"fire-core-compat",[AM]:"fire-analytics",[CM]:"fire-analytics-compat",[PM]:"fire-app-check",[RM]:"fire-app-check-compat",[xM]:"fire-auth",[NM]:"fire-auth-compat",[kM]:"fire-rtdb",[MM]:"fire-data-connect",[DM]:"fire-rtdb-compat",[VM]:"fire-fn",[LM]:"fire-fn-compat",[FM]:"fire-iid",[UM]:"fire-iid-compat",[bM]:"fire-fcm",[OM]:"fire-fcm-compat",[BM]:"fire-perf",[GM]:"fire-perf-compat",[HM]:"fire-rc",[qM]:"fire-rc-compat",[zM]:"fire-gcs",[$M]:"fire-gcs-compat",[KM]:"fire-fst",[JM]:"fire-fst-compat",[WM]:"fire-vertex","fire-js":"fire-js",[YM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Map,ZM=new Map,Ad=new Map;function Iy(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function va(t){const e=t.name;if(Ad.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,t);for(const n of ya.values())Iy(n,t);for(const n of ZM.values())Iy(n,t);return!0}function jM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new TE("app","Firebase",eD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=QM;function CE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=EE()),!n)throw rr.create("no-options");const o=ya.get(i);if(o){if(Td(n,o.options)&&Td(r,o.config))return o;throw rr.create("duplicate-app",{appName:i})}const s=new sM(i);for(const u of Ad.values())s.addComponent(u);const l=new tD(n,r,s);return ya.set(i,l),l}function rD(t=Cd){const e=ya.get(t);if(!e&&t===Cd&&EE())return CE();if(!e)throw rr.create("no-app",{appName:t});return e}function Si(t,e,n){var r;let i=(r=XM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}va(new cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-heartbeat-database",oD=1,ds="firebase-heartbeat-store";let lc=null;function AE(){return lc||(lc=_M(iD,oD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ds)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),lc}async function sD(t){try{const n=(await AE()).transaction(ds),r=await n.objectStore(ds).get(RE(t));return await n.done,r}catch(e){if(e instanceof Ki)Nn.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function Sy(t,e){try{const r=(await AE()).transaction(ds,"readwrite");await r.objectStore(ds).put(e,RE(t)),await r.done}catch(n){if(n instanceof Ki)Nn.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function RE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1024,aD=30*24*60*60*1e3;class uD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=aD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wy(),{heartbeatsToSend:r,unsentEntries:i}=cD(this._heartbeatsCache.heartbeats),o=ga(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Nn.warn(n),""}}}function wy(){return new Date().toISOString().substring(0,10)}function cD(t,e=lD){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Cy(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z1()?j1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return ga(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){va(new cs("platform-logger",e=>new IM(e),"PRIVATE")),va(new cs("heartbeat",e=>new uD(e),"PRIVATE")),Si(wd,Ty,t),Si(wd,Ty,"esm2017"),Si("fire-js","")}fD("");var hD="firebase",pD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(hD,pD,"app");var Ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function S(){}S.prototype=E.prototype,C.D=E.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(R,k,V){for(var x=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)x[oe-2]=arguments[oe];return E.prototype[k].apply(R,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,E,S){S||(S=0);var R=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)R[k]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(k=0;16>k;++k)R[k]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=C.g[0],S=C.g[1],k=C.g[2];var V=C.g[3],x=E+(V^S&(k^V))+R[0]+3614090360&4294967295;E=S+(x<<7&4294967295|x>>>25),x=V+(k^E&(S^k))+R[1]+3905402710&4294967295,V=E+(x<<12&4294967295|x>>>20),x=k+(S^V&(E^S))+R[2]+606105819&4294967295,k=V+(x<<17&4294967295|x>>>15),x=S+(E^k&(V^E))+R[3]+3250441966&4294967295,S=k+(x<<22&4294967295|x>>>10),x=E+(V^S&(k^V))+R[4]+4118548399&4294967295,E=S+(x<<7&4294967295|x>>>25),x=V+(k^E&(S^k))+R[5]+1200080426&4294967295,V=E+(x<<12&4294967295|x>>>20),x=k+(S^V&(E^S))+R[6]+2821735955&4294967295,k=V+(x<<17&4294967295|x>>>15),x=S+(E^k&(V^E))+R[7]+4249261313&4294967295,S=k+(x<<22&4294967295|x>>>10),x=E+(V^S&(k^V))+R[8]+1770035416&4294967295,E=S+(x<<7&4294967295|x>>>25),x=V+(k^E&(S^k))+R[9]+2336552879&4294967295,V=E+(x<<12&4294967295|x>>>20),x=k+(S^V&(E^S))+R[10]+4294925233&4294967295,k=V+(x<<17&4294967295|x>>>15),x=S+(E^k&(V^E))+R[11]+2304563134&4294967295,S=k+(x<<22&4294967295|x>>>10),x=E+(V^S&(k^V))+R[12]+1804603682&4294967295,E=S+(x<<7&4294967295|x>>>25),x=V+(k^E&(S^k))+R[13]+4254626195&4294967295,V=E+(x<<12&4294967295|x>>>20),x=k+(S^V&(E^S))+R[14]+2792965006&4294967295,k=V+(x<<17&4294967295|x>>>15),x=S+(E^k&(V^E))+R[15]+1236535329&4294967295,S=k+(x<<22&4294967295|x>>>10),x=E+(k^V&(S^k))+R[1]+4129170786&4294967295,E=S+(x<<5&4294967295|x>>>27),x=V+(S^k&(E^S))+R[6]+3225465664&4294967295,V=E+(x<<9&4294967295|x>>>23),x=k+(E^S&(V^E))+R[11]+643717713&4294967295,k=V+(x<<14&4294967295|x>>>18),x=S+(V^E&(k^V))+R[0]+3921069994&4294967295,S=k+(x<<20&4294967295|x>>>12),x=E+(k^V&(S^k))+R[5]+3593408605&4294967295,E=S+(x<<5&4294967295|x>>>27),x=V+(S^k&(E^S))+R[10]+38016083&4294967295,V=E+(x<<9&4294967295|x>>>23),x=k+(E^S&(V^E))+R[15]+3634488961&4294967295,k=V+(x<<14&4294967295|x>>>18),x=S+(V^E&(k^V))+R[4]+3889429448&4294967295,S=k+(x<<20&4294967295|x>>>12),x=E+(k^V&(S^k))+R[9]+568446438&4294967295,E=S+(x<<5&4294967295|x>>>27),x=V+(S^k&(E^S))+R[14]+3275163606&4294967295,V=E+(x<<9&4294967295|x>>>23),x=k+(E^S&(V^E))+R[3]+4107603335&4294967295,k=V+(x<<14&4294967295|x>>>18),x=S+(V^E&(k^V))+R[8]+1163531501&4294967295,S=k+(x<<20&4294967295|x>>>12),x=E+(k^V&(S^k))+R[13]+2850285829&4294967295,E=S+(x<<5&4294967295|x>>>27),x=V+(S^k&(E^S))+R[2]+4243563512&4294967295,V=E+(x<<9&4294967295|x>>>23),x=k+(E^S&(V^E))+R[7]+1735328473&4294967295,k=V+(x<<14&4294967295|x>>>18),x=S+(V^E&(k^V))+R[12]+2368359562&4294967295,S=k+(x<<20&4294967295|x>>>12),x=E+(S^k^V)+R[5]+4294588738&4294967295,E=S+(x<<4&4294967295|x>>>28),x=V+(E^S^k)+R[8]+2272392833&4294967295,V=E+(x<<11&4294967295|x>>>21),x=k+(V^E^S)+R[11]+1839030562&4294967295,k=V+(x<<16&4294967295|x>>>16),x=S+(k^V^E)+R[14]+4259657740&4294967295,S=k+(x<<23&4294967295|x>>>9),x=E+(S^k^V)+R[1]+2763975236&4294967295,E=S+(x<<4&4294967295|x>>>28),x=V+(E^S^k)+R[4]+1272893353&4294967295,V=E+(x<<11&4294967295|x>>>21),x=k+(V^E^S)+R[7]+4139469664&4294967295,k=V+(x<<16&4294967295|x>>>16),x=S+(k^V^E)+R[10]+3200236656&4294967295,S=k+(x<<23&4294967295|x>>>9),x=E+(S^k^V)+R[13]+681279174&4294967295,E=S+(x<<4&4294967295|x>>>28),x=V+(E^S^k)+R[0]+3936430074&4294967295,V=E+(x<<11&4294967295|x>>>21),x=k+(V^E^S)+R[3]+3572445317&4294967295,k=V+(x<<16&4294967295|x>>>16),x=S+(k^V^E)+R[6]+76029189&4294967295,S=k+(x<<23&4294967295|x>>>9),x=E+(S^k^V)+R[9]+3654602809&4294967295,E=S+(x<<4&4294967295|x>>>28),x=V+(E^S^k)+R[12]+3873151461&4294967295,V=E+(x<<11&4294967295|x>>>21),x=k+(V^E^S)+R[15]+530742520&4294967295,k=V+(x<<16&4294967295|x>>>16),x=S+(k^V^E)+R[2]+3299628645&4294967295,S=k+(x<<23&4294967295|x>>>9),x=E+(k^(S|~V))+R[0]+4096336452&4294967295,E=S+(x<<6&4294967295|x>>>26),x=V+(S^(E|~k))+R[7]+1126891415&4294967295,V=E+(x<<10&4294967295|x>>>22),x=k+(E^(V|~S))+R[14]+2878612391&4294967295,k=V+(x<<15&4294967295|x>>>17),x=S+(V^(k|~E))+R[5]+4237533241&4294967295,S=k+(x<<21&4294967295|x>>>11),x=E+(k^(S|~V))+R[12]+1700485571&4294967295,E=S+(x<<6&4294967295|x>>>26),x=V+(S^(E|~k))+R[3]+2399980690&4294967295,V=E+(x<<10&4294967295|x>>>22),x=k+(E^(V|~S))+R[10]+4293915773&4294967295,k=V+(x<<15&4294967295|x>>>17),x=S+(V^(k|~E))+R[1]+2240044497&4294967295,S=k+(x<<21&4294967295|x>>>11),x=E+(k^(S|~V))+R[8]+1873313359&4294967295,E=S+(x<<6&4294967295|x>>>26),x=V+(S^(E|~k))+R[15]+4264355552&4294967295,V=E+(x<<10&4294967295|x>>>22),x=k+(E^(V|~S))+R[6]+2734768916&4294967295,k=V+(x<<15&4294967295|x>>>17),x=S+(V^(k|~E))+R[13]+1309151649&4294967295,S=k+(x<<21&4294967295|x>>>11),x=E+(k^(S|~V))+R[4]+4149444226&4294967295,E=S+(x<<6&4294967295|x>>>26),x=V+(S^(E|~k))+R[11]+3174756917&4294967295,V=E+(x<<10&4294967295|x>>>22),x=k+(E^(V|~S))+R[2]+718787259&4294967295,k=V+(x<<15&4294967295|x>>>17),x=S+(V^(k|~E))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var S=E-this.blockSize,R=this.B,k=this.h,V=0;V<E;){if(k==0)for(;V<=S;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<E;)if(R[k++]=C.charCodeAt(V++),k==this.blockSize){i(this,R),k=0;break}}else for(;V<E;)if(R[k++]=C[V++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var S=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=S&255,S/=256;for(this.u(C),C=Array(16),E=S=0;4>E;++E)for(var R=0;32>R;R+=8)C[S++]=this.g[E]>>>R&255;return C};function o(C,E){var S=l;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=E(C)}function s(C,E){this.h=E;for(var S=[],R=!0,k=C.length-1;0<=k;k--){var V=C[k]|0;R&&V==E||(S[k]=V,R=!1)}this.g=S}var l={};function u(C){return-128<=C&&128>C?o(C,function(E){return new s([E|0],0>E?-1:0)}):new s([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return N(f(-C));for(var E=[],S=1,R=0;C>=S;R++)E[R]=C/S|0,S*=4294967296;return new s(E,0)}function h(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return N(h(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=f(Math.pow(E,8)),R=p,k=0;k<C.length;k+=8){var V=Math.min(8,C.length-k),x=parseInt(C.substring(k,k+V),E);8>V?(V=f(Math.pow(E,V)),R=R.j(V).add(f(x))):(R=R.j(S),R=R.add(f(x)))}return R}var p=u(0),m=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-N(this).m();for(var C=0,E=1,S=0;S<this.g.length;S++){var R=this.i(S);C+=(0<=R?R:4294967296+R)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(P(this))return"-"+N(this).toString(C);for(var E=f(Math.pow(C,6)),S=this,R="";;){var k=D(S,E).g;S=T(S,k.j(E));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=k,w(S))return V+R;for(;6>V.length;)V="0"+V;R=V+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function P(C){return C.h==-1}t.l=function(C){return C=T(this,C),P(C)?-1:w(C)?0:1};function N(C){for(var E=C.g.length,S=[],R=0;R<E;R++)S[R]=~C.g[R];return new s(S,~C.h).add(m)}t.abs=function(){return P(this)?N(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],R=0,k=0;k<=E;k++){var V=R+(this.i(k)&65535)+(C.i(k)&65535),x=(V>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);R=x>>>16,V&=65535,x&=65535,S[k]=x<<16|V}return new s(S,S[S.length-1]&-2147483648?-1:0)};function T(C,E){return C.add(N(E))}t.j=function(C){if(w(this)||w(C))return p;if(P(this))return P(C)?N(this).j(N(C)):N(N(this).j(C));if(P(C))return N(this.j(N(C)));if(0>this.l(v)&&0>C.l(v))return f(this.m()*C.m());for(var E=this.g.length+C.g.length,S=[],R=0;R<2*E;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<C.g.length;k++){var V=this.i(R)>>>16,x=this.i(R)&65535,oe=C.i(k)>>>16,We=C.i(k)&65535;S[2*R+2*k]+=x*We,I(S,2*R+2*k),S[2*R+2*k+1]+=V*We,I(S,2*R+2*k+1),S[2*R+2*k+1]+=x*oe,I(S,2*R+2*k+1),S[2*R+2*k+2]+=V*oe,I(S,2*R+2*k+2)}for(R=0;R<E;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=E;R<2*E;R++)S[R]=0;return new s(S,0)};function I(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function A(C,E){this.g=C,this.h=E}function D(C,E){if(w(E))throw Error("division by zero");if(w(C))return new A(p,p);if(P(C))return E=D(N(C),E),new A(N(E.g),N(E.h));if(P(E))return E=D(C,N(E)),new A(N(E.g),E.h);if(30<C.g.length){if(P(C)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var S=m,R=E;0>=R.l(C);)S=L(S),R=L(R);var k=b(S,1),V=b(R,1);for(R=b(R,2),S=b(S,2);!w(R);){var x=V.add(R);0>=x.l(C)&&(k=k.add(S),V=x),R=b(R,1),S=b(S,1)}return E=T(C,k.j(E)),new A(k,E)}for(k=p;0<=C.l(E);){for(S=Math.max(1,Math.floor(C.m()/E.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),V=f(S),x=V.j(E);P(x)||0<x.l(C);)S-=R,V=f(S),x=V.j(E);w(V)&&(V=m),k=k.add(V),C=T(C,x)}return new A(k,C)}t.A=function(C){return D(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)&C.i(R);return new s(S,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)|C.i(R);return new s(S,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)^C.i(R);return new s(S,this.h^C.h)};function L(C){for(var E=C.g.length+1,S=[],R=0;R<E;R++)S[R]=C.i(R)<<1|C.i(R-1)>>>31;return new s(S,C.h)}function b(C,E){var S=E>>5;E%=32;for(var R=C.g.length-S,k=[],V=0;V<R;V++)k[V]=0<E?C.i(V+S)>>>E|C.i(V+S+1)<<32-E:C.i(V+S);return new s(k,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,xr=s}).apply(typeof Ay<"u"?Ay:typeof self<"u"?self:typeof window<"u"?window:{});var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,Po,NE,Dl,Rd,kE,ME,DE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ml=="object"&&ml];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var _=0;_<d.length-1;_++){var F=d[_];if(!(F in y))break e;y=y[F]}d=d[d.length-1],_=y[d],g=g(_),g!=_&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,_=!1,F={next:function(){if(!_&&y<d.length){var U=y++;return{value:g(U,d[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,y){return d.call.apply(d.bind,arguments)}function p(d,g,y){if(!d)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,_),d.apply(g,F)}}return function(){return d.apply(g,arguments)}}function m(d,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var _=y.slice();return _.push.apply(_,arguments),d.apply(this,_)}}function w(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(_,F,U){for(var q=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)q[ye-2]=arguments[ye];return g.prototype[F].apply(_,q)}}function P(d){const g=d.length;if(0<g){const y=Array(g);for(let _=0;_<g;_++)y[_]=d[_];return y}return[]}function N(d,g){for(let y=1;y<arguments.length;y++){const _=arguments[y];if(u(_)){const F=d.length||0,U=_.length||0;d.length=F+U;for(let q=0;q<U;q++)d[F+q]=_[q]}else d.push(_)}}class T{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function I(d){return/^[\s\xa0]*$/.test(d)}function A(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function D(d){return D[" "](d),d}D[" "]=function(){};var L=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function b(d,g,y){for(const _ in d)g.call(y,d[_],_,d)}function C(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function E(d){const g={};for(const y in d)g[y]=d[y];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,g){let y,_;for(let F=1;F<arguments.length;F++){_=arguments[F];for(y in _)d[y]=_[y];for(let U=0;U<S.length;U++)y=S[U],Object.prototype.hasOwnProperty.call(_,y)&&(d[y]=_[y])}}function k(d){var g=1;d=d.split(":");const y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function V(d){l.setTimeout(()=>{throw d},0)}function x(){var d=W;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,y){const _=We.get();_.set(g,y),this.h?this.h.next=_:this.g=_,this.h=_}}var We=new T(()=>new ln,d=>d.reset());class ln{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,H=!1,W=new oe,ee=()=>{const d=l.Promise.resolve(void 0);Tt=()=>{d.then(Ee)}};var Ee=()=>{for(var d;d=x();){try{d.h.call(d.g)}catch(y){V(y)}var g=We;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}H=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return d}();function Ft(d,g){if(Ce.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,_=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(L){e:{try{D(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ft.aa.h.call(this)}}w(Ft,Ce);var te={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ve(d,g,y,_,F){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!_,this.ha=F,this.key=++fe,this.da=this.fa=!1}function He(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function It(d){this.src=d,this.g={},this.h=0}It.prototype.add=function(d,g,y,_,F){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var q=St(d,g,_,F);return-1<q?(g=d[q],y||(g.fa=!1)):(g=new ve(g,this.src,U,!!_,F),g.fa=y,d.push(g)),g};function hr(d,g){var y=g.type;if(y in d.g){var _=d.g[y],F=Array.prototype.indexOf.call(_,g,void 0),U;(U=0<=F)&&Array.prototype.splice.call(_,F,1),U&&(He(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function St(d,g,y,_){for(var F=0;F<d.length;++F){var U=d[F];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==_)return F}return-1}var pr="closure_lm_"+(1e6*Math.random()|0),Xi={};function wh(d,g,y,_,F){if(Array.isArray(g)){for(var U=0;U<g.length;U++)wh(d,g[U],y,_,F);return null}return y=Rh(y),d&&d[re]?d.K(g,y,f(_)?!!_.capture:!1,F):QT(d,g,y,!1,_,F)}function QT(d,g,y,_,F,U){if(!g)throw Error("Invalid event type");var q=f(F)?!!F.capture:!!F,ye=uu(d);if(ye||(d[pr]=ye=new It(d)),y=ye.add(g,y,_,q,U),y.proxy)return y;if(_=XT(),y.proxy=_,_.src=d,_.listener=y,d.addEventListener)Wt||(F=q),F===void 0&&(F=!1),d.addEventListener(g.toString(),_,F);else if(d.attachEvent)d.attachEvent(Ah(g.toString()),_);else if(d.addListener&&d.removeListener)d.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return y}function XT(){function d(y){return g.call(d.src,d.listener,y)}const g=ZT;return d}function Ch(d,g,y,_,F){if(Array.isArray(g))for(var U=0;U<g.length;U++)Ch(d,g[U],y,_,F);else _=f(_)?!!_.capture:!!_,y=Rh(y),d&&d[re]?(d=d.i,g=String(g).toString(),g in d.g&&(U=d.g[g],y=St(U,y,_,F),-1<y&&(He(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete d.g[g],d.h--)))):d&&(d=uu(d))&&(g=d.g[g.toString()],d=-1,g&&(d=St(g,y,_,F)),(y=-1<d?g[d]:null)&&au(y))}function au(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[re])hr(g.i,d);else{var y=d.type,_=d.proxy;g.removeEventListener?g.removeEventListener(y,_,d.capture):g.detachEvent?g.detachEvent(Ah(y),_):g.addListener&&g.removeListener&&g.removeListener(_),(y=uu(g))?(hr(y,d),y.h==0&&(y.src=null,g[pr]=null)):He(d)}}}function Ah(d){return d in Xi?Xi[d]:Xi[d]="on"+d}function ZT(d,g){if(d.da)d=!0;else{g=new Ft(g,this);var y=d.listener,_=d.ha||d.src;d.fa&&au(d),d=y.call(_,g)}return d}function uu(d){return d=d[pr],d instanceof It?d:null}var cu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rh(d){return typeof d=="function"?d:(d[cu]||(d[cu]=function(g){return d.handleEvent(g)}),d[cu])}function nt(){pe.call(this),this.i=new It(this),this.M=this,this.F=null}w(nt,pe),nt.prototype[re]=!0,nt.prototype.removeEventListener=function(d,g,y,_){Ch(this,d,g,y,_)};function ht(d,g){var y,_=d.F;if(_)for(y=[];_;_=_.F)y.push(_);if(d=d.M,_=g.type||g,typeof g=="string")g=new Ce(g,d);else if(g instanceof Ce)g.target=g.target||d;else{var F=g;g=new Ce(_,d),R(g,F)}if(F=!0,y)for(var U=y.length-1;0<=U;U--){var q=g.g=y[U];F=ks(q,_,!0,g)&&F}if(q=g.g=d,F=ks(q,_,!0,g)&&F,F=ks(q,_,!1,g)&&F,y)for(U=0;U<y.length;U++)q=g.g=y[U],F=ks(q,_,!1,g)&&F}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],_=0;_<y.length;_++)He(y[_]);delete d.g[g],d.h--}}this.F=null},nt.prototype.K=function(d,g,y,_){return this.i.add(String(d),g,!1,y,_)},nt.prototype.L=function(d,g,y,_){return this.i.add(String(d),g,!0,y,_)};function ks(d,g,y,_){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,U=0;U<g.length;++U){var q=g[U];if(q&&!q.da&&q.capture==y){var ye=q.listener,Je=q.ha||q.src;q.fa&&hr(d.i,q),F=ye.call(Je,_)!==!1&&F}}return F&&!_.defaultPrevented}function Ph(d,g,y){if(typeof d=="function")y&&(d=m(d,y));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function xh(d){d.g=Ph(()=>{d.g=null,d.i&&(d.i=!1,xh(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class jT extends pe{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xh(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(d){pe.call(this),this.h=d,this.g={}}w(Zi,pe);var Nh=[];function kh(d){b(d.g,function(g,y){this.g.hasOwnProperty(y)&&au(g)},d),d.g={}}Zi.prototype.N=function(){Zi.aa.N.call(this),kh(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var du=l.JSON.stringify,eI=l.JSON.parse,tI=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function fu(){}fu.prototype.h=null;function Mh(d){return d.h||(d.h=d.i())}function Dh(){}var ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hu(){Ce.call(this,"d")}w(hu,Ce);function pu(){Ce.call(this,"c")}w(pu,Ce);var mr={},Vh=null;function Ms(){return Vh=Vh||new nt}mr.La="serverreachability";function Lh(d){Ce.call(this,mr.La,d)}w(Lh,Ce);function eo(d){const g=Ms();ht(g,new Lh(g))}mr.STAT_EVENT="statevent";function Fh(d,g){Ce.call(this,mr.STAT_EVENT,d),this.stat=g}w(Fh,Ce);function pt(d){const g=Ms();ht(g,new Fh(g,d))}mr.Ma="timingevent";function Uh(d,g){Ce.call(this,mr.Ma,d),this.size=g}w(Uh,Ce);function to(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function nI(d,g,y,_,F,U){d.info(function(){if(d.g)if(U)for(var q="",ye=U.split("&"),Je=0;Je<ye.length;Je++){var ue=ye[Je].split("=");if(1<ue.length){var rt=ue[0];ue=ue[1];var it=rt.split("_");q=2<=it.length&&it[1]=="type"?q+(rt+"="+ue+"&"):q+(rt+"=redacted&")}}else q=null;else q=U;return"XMLHTTP REQ ("+_+") [attempt "+F+"]: "+g+`
`+y+`
`+q})}function rI(d,g,y,_,F,U,q){d.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+F+"]: "+g+`
`+y+`
`+U+" "+q})}function zr(d,g,y,_){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+oI(d,y)+(_?" "+_:"")})}function iI(d,g){d.info(function(){return"TIMEOUT: "+g})}no.prototype.info=function(){};function oI(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var _=y[d];if(!(2>_.length)){var F=_[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var q=1;q<F.length;q++)F[q]=""}}}}return du(y)}catch{return g}}var Ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mu;function Vs(){}w(Vs,fu),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},mu=new Vs;function Fn(d,g,y,_){this.j=d,this.i=g,this.l=y,this.R=_||1,this.U=new Zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oh}function Oh(){this.i=null,this.g="",this.h=!1}var Bh={},gu={};function yu(d,g,y){d.L=1,d.v=bs(yn(g)),d.m=y,d.P=!0,Gh(d,null)}function Gh(d,g){d.F=Date.now(),Ls(d),d.A=yn(d.v);var y=d.A,_=d.R;Array.isArray(_)||(_=[String(_)]),tp(y.i,"t",_),d.C=0,y=d.j.J,d.h=new Oh,d.g=_p(d.j,y?g:null,!d.m),0<d.O&&(d.M=new jT(m(d.Y,d,d.g),d.O)),g=d.U,y=d.g,_=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Nh[0]=F.toString()),F=Nh);for(var U=0;U<F.length;U++){var q=wh(y,F[U],_||g.handleEvent,!1,g.h||g);if(!q)break;g.g[q.key]=q}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),eo(),nI(d.i,d.u,d.A,d.l,d.R,d.m)}Fn.prototype.ca=function(d){d=d.target;const g=this.M;g&&vn(d)==3?g.j():this.Y(d)},Fn.prototype.Y=function(d){try{if(d==this.g)e:{const it=vn(this.g);var g=this.g.Ba();const Wr=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||ap(this.g)))){this.J||it!=4||g==7||(g==8||0>=Wr?eo(3):eo(2)),vu(this);var y=this.g.Z();this.X=y;t:if(Hh(this)){var _=ap(this.g);d="";var F=_.length,U=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),ro(this);var q="";break t}this.h.i=new l.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,d+=this.h.i.decode(_[g],{stream:!(U&&g==F-1)});_.length=0,this.h.g+=d,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=y==200,rI(this.i,this.u,this.A,this.l,this.R,it,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Je=this.g;if((ye=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(ye)){var ue=ye;break t}}ue=null}if(y=ue)zr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_u(this,y);else{this.o=!1,this.s=3,pt(12),gr(this),ro(this);break e}}if(this.P){y=!0;let Jt;for(;!this.J&&this.C<q.length;)if(Jt=sI(this,q),Jt==gu){it==4&&(this.s=4,pt(14),y=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Bh){this.s=4,pt(15),zr(this.i,this.l,q,"[Invalid Chunk]"),y=!1;break}else zr(this.i,this.l,Jt,null),_u(this,Jt);if(Hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||q.length!=0||this.h.h||(this.s=1,pt(16),y=!1),this.o=this.o&&y,!y)zr(this.i,this.l,q,"[Invalid Chunked Response]"),gr(this),ro(this);else if(0<q.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Cu(rt),rt.M=!0,pt(11))}}else zr(this.i,this.l,q,null),_u(this,q);it==4&&gr(this),this.o&&!this.J&&(it==4?mp(this.j,this):(this.o=!1,Ls(this)))}else SI(this.g),y==400&&0<q.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),gr(this),ro(this)}}}catch{}finally{}};function Hh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function sI(d,g){var y=d.C,_=g.indexOf(`
`,y);return _==-1?gu:(y=Number(g.substring(y,_)),isNaN(y)?Bh:(_+=1,_+y>g.length?gu:(g=g.slice(_,_+y),d.C=_+y,g)))}Fn.prototype.cancel=function(){this.J=!0,gr(this)};function Ls(d){d.S=Date.now()+d.I,qh(d,d.I)}function qh(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=to(m(d.ba,d),g)}function vu(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Fn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(iI(this.i,this.A),this.L!=2&&(eo(),pt(17)),gr(this),this.s=2,ro(this)):qh(this,this.S-d)};function ro(d){d.j.G==0||d.J||mp(d.j,d)}function gr(d){vu(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,kh(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function _u(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||Eu(y.h,d))){if(!d.K&&Eu(y.h,d)&&y.G==3){try{var _=y.Da.g.parse(g)}catch{_=null}if(Array.isArray(_)&&_.length==3){var F=_;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)zs(y),Hs(y);else break e;wu(y),pt(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=to(m(y.Za,y),6e3));if(1>=Kh(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else vr(y,11)}else if((d.K||y.g==d)&&zs(y),!I(g))for(F=y.Da.g.parse(g),g=0;g<F.length;g++){let ue=F[g];if(y.T=ue[0],ue=ue[1],y.G==2)if(ue[0]=="c"){y.K=ue[1],y.ia=ue[2];const rt=ue[3];rt!=null&&(y.la=rt,y.j.info("VER="+y.la));const it=ue[4];it!=null&&(y.Aa=it,y.j.info("SVER="+y.Aa));const Wr=ue[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(_=1.5*Wr,y.L=_,y.j.info("backChannelRequestTimeoutMs_="+_)),_=y;const Jt=d.g;if(Jt){const Ks=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var U=_.h;U.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Tu(U,U.h),U.h=null))}if(_.D){const Au=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(_.ya=Au,Te(_.I,_.D,Au))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),_=y;var q=d;if(_.qa=vp(_,_.J?_.ia:null,_.W),q.K){Wh(_.h,q);var ye=q,Je=_.L;Je&&(ye.I=Je),ye.B&&(vu(ye),Ls(ye)),_.g=q}else hp(_);0<y.i.length&&qs(y)}else ue[0]!="stop"&&ue[0]!="close"||vr(y,7);else y.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?vr(y,7):Su(y):ue[0]!="noop"&&y.l&&y.l.ta(ue),y.v=0)}}eo(4)}catch{}}var lI=class{constructor(d,g){this.g=d,this.map=g}};function zh(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $h(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Kh(d){return d.h?1:d.g?d.g.size:0}function Eu(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Tu(d,g){d.g?d.g.add(g):d.h=g}function Wh(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}zh.prototype.cancel=function(){if(this.i=Jh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Jh(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.D);return g}return P(d.i)}function aI(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,_=0;_<y;_++)g.push(d[_]);return g}g=[],y=0;for(_ in d)g[y++]=d[_];return g}function uI(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(const _ in d)g[y++]=_;return g}}}function Yh(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=uI(d),_=aI(d),F=_.length,U=0;U<F;U++)g.call(void 0,_[U],y&&y[U],d)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cI(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var _=d[y].indexOf("="),F=null;if(0<=_){var U=d[y].substring(0,_);F=d[y].substring(_+1)}else U=d[y];g(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function yr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof yr){this.h=d.h,Fs(this,d.j),this.o=d.o,this.g=d.g,Us(this,d.s),this.l=d.l;var g=d.i,y=new so;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Xh(this,y),this.m=d.m}else d&&(g=String(d).match(Qh))?(this.h=!1,Fs(this,g[1]||"",!0),this.o=io(g[2]||""),this.g=io(g[3]||"",!0),Us(this,g[4]),this.l=io(g[5]||"",!0),Xh(this,g[6]||"",!0),this.m=io(g[7]||"")):(this.h=!1,this.i=new so(null,this.h))}yr.prototype.toString=function(){var d=[],g=this.j;g&&d.push(oo(g,Zh,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(oo(g,Zh,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(oo(y,y.charAt(0)=="/"?hI:fI,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",oo(y,mI)),d.join("")};function yn(d){return new yr(d)}function Fs(d,g,y){d.j=y?io(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Us(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Xh(d,g,y){g instanceof so?(d.i=g,gI(d.i,d.h)):(y||(g=oo(g,pI)),d.i=new so(g,d.h))}function Te(d,g,y){d.i.set(g,y)}function bs(d){return Te(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function io(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function oo(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,dI),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function dI(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zh=/[#\/\?@]/g,fI=/[#\?:]/g,hI=/[#\?]/g,pI=/[#\?@]/g,mI=/#/g;function so(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Un(d){d.g||(d.g=new Map,d.h=0,d.i&&cI(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=so.prototype,t.add=function(d,g){Un(this),this.i=null,d=$r(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function jh(d,g){Un(d),g=$r(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ep(d,g){return Un(d),g=$r(d,g),d.g.has(g)}t.forEach=function(d,g){Un(this),this.g.forEach(function(y,_){y.forEach(function(F){d.call(g,F,_,this)},this)},this)},t.na=function(){Un(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let _=0;_<g.length;_++){const F=d[_];for(let U=0;U<F.length;U++)y.push(g[_])}return y},t.V=function(d){Un(this);let g=[];if(typeof d=="string")ep(this,d)&&(g=g.concat(this.g.get($r(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return Un(this),this.i=null,d=$r(this,d),ep(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function tp(d,g,y){jh(d,g),0<y.length&&(d.i=null,d.g.set($r(d,g),P(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var _=g[y];const U=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var F=U;q[_]!==""&&(F+="="+encodeURIComponent(String(q[_]))),d.push(F)}}return this.i=d.join("&")};function $r(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function gI(d,g){g&&!d.j&&(Un(d),d.i=null,d.g.forEach(function(y,_){var F=_.toLowerCase();_!=F&&(jh(this,_),tp(this,F,y))},d)),d.j=g}function yI(d,g){const y=new no;if(l.Image){const _=new Image;_.onload=v(bn,y,"TestLoadImage: loaded",!0,g,_),_.onerror=v(bn,y,"TestLoadImage: error",!1,g,_),_.onabort=v(bn,y,"TestLoadImage: abort",!1,g,_),_.ontimeout=v(bn,y,"TestLoadImage: timeout",!1,g,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=d}else g(!1)}function vI(d,g){const y=new no,_=new AbortController,F=setTimeout(()=>{_.abort(),bn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:_.signal}).then(U=>{clearTimeout(F),U.ok?bn(y,"TestPingServer: ok",!0,g):bn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),bn(y,"TestPingServer: error",!1,g)})}function bn(d,g,y,_,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),_(y)}catch{}}function _I(){this.g=new tI}function EI(d,g,y){const _=y||"";try{Yh(d,function(F,U){let q=F;f(F)&&(q=du(F)),g.push(_+U+"="+encodeURIComponent(q))})}catch(F){throw g.push(_+"type="+encodeURIComponent("_badmap")),F}}function Os(d){this.l=d.Ub||null,this.j=d.eb||!1}w(Os,fu),Os.prototype.g=function(){return new Bs(this.l,this.j)},Os.prototype.i=function(d){return function(){return d}}({});function Bs(d,g){nt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Bs,nt),t=Bs.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ao(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;np(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function np(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?lo(this):ao(this),this.readyState==3&&np(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,lo(this))},t.Qa=function(d){this.g&&(this.response=d,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ao(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function ao(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function rp(d){let g="";return b(d,function(y,_){g+=_,g+=":",g+=y,g+=`\r
`}),g}function Iu(d,g,y){e:{for(_ in y){var _=!1;break e}_=!0}_||(y=rp(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Te(d,g,y))}function ke(d){nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ke,nt);var TI=/^https?$/i,II=["POST","PUT"];t=ke.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mu.g(),this.v=this.o?Mh(this.o):Mh(mu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){ip(this,U);return}if(d=y||"",y=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var F in _)y.set(F,_[F]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())y.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),F=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(II,g,void 0))||_||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,q]of y)this.g.setRequestHeader(U,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lp(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){ip(this,U)}};function ip(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,op(d),Gs(d)}function op(d){d.A||(d.A=!0,ht(d,"complete"),ht(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ht(this,"complete"),ht(this,"abort"),Gs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sp(this):this.bb())},t.bb=function(){sp(this)};function sp(d){if(d.h&&typeof s<"u"&&(!d.v[1]||vn(d)!=4||d.Z()!=2)){if(d.u&&vn(d)==4)Ph(d.Ea,0,d);else if(ht(d,"readystatechange"),vn(d)==4){d.h=!1;try{const q=d.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var _;if(_=q===0){var F=String(d.D).match(Qh)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),_=!TI.test(F?F.toLowerCase():"")}y=_}if(y)ht(d,"complete"),ht(d,"success");else{d.m=6;try{var U=2<vn(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",op(d)}}finally{Gs(d)}}}}function Gs(d,g){if(d.g){lp(d);const y=d.g,_=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||ht(d,"ready");try{y.onreadystatechange=_}catch{}}}function lp(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function vn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),eI(g)}};function ap(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function SI(d){const g={};d=(d.g&&2<=vn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<d.length;_++){if(I(d[_]))continue;var y=k(d[_]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[F]||[];g[F]=U,U.push(y)}C(g,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function up(d){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uo("baseRetryDelayMs",5e3,d),this.cb=uo("retryDelaySeedMs",1e4,d),this.Wa=uo("forwardChannelMaxRetries",2,d),this.wa=uo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new zh(d&&d.concurrentRequestLimit),this.Da=new _I,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=up.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,_){pt(0),this.W=d,this.H=g||{},y&&_!==void 0&&(this.H.OSID=y,this.H.OAID=_),this.F=this.X,this.I=vp(this,null,this.W),qs(this)};function Su(d){if(cp(d),d.G==3){var g=d.U++,y=yn(d.I);if(Te(y,"SID",d.K),Te(y,"RID",g),Te(y,"TYPE","terminate"),co(d,y),g=new Fn(d,d.j,g),g.L=2,g.v=bs(yn(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=_p(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ls(g)}yp(d)}function Hs(d){d.g&&(Cu(d),d.g.cancel(),d.g=null)}function cp(d){Hs(d),d.u&&(l.clearTimeout(d.u),d.u=null),zs(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function qs(d){if(!$h(d.h)&&!d.s){d.s=!0;var g=d.Ga;Tt||ee(),H||(Tt(),H=!0),W.add(g,d),d.B=0}}function wI(d,g){return Kh(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=to(m(d.Ga,d,g),gp(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new Fn(this,this.j,d);let U=this.o;if(this.S&&(U?(U=E(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var _=this.i[y];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(g+=_,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=fp(this,F,g),y=yn(this.I),Te(y,"RID",d),Te(y,"CVER",22),this.D&&Te(y,"X-HTTP-Session-Id",this.D),co(this,y),U&&(this.O?g="headers="+encodeURIComponent(String(rp(U)))+"&"+g:this.m&&Iu(y,this.m,U)),Tu(this.h,F),this.Ua&&Te(y,"TYPE","init"),this.P?(Te(y,"$req",g),Te(y,"SID","null"),F.T=!0,yu(F,y,null)):yu(F,y,g),this.G=2}}else this.G==3&&(d?dp(this,d):this.i.length==0||$h(this.h)||dp(this))};function dp(d,g){var y;g?y=g.l:y=d.U++;const _=yn(d.I);Te(_,"SID",d.K),Te(_,"RID",y),Te(_,"AID",d.T),co(d,_),d.m&&d.o&&Iu(_,d.m,d.o),y=new Fn(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=fp(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Tu(d.h,y),yu(y,_,g)}function co(d,g){d.H&&b(d.H,function(y,_){Te(g,_,y)}),d.l&&Yh({},function(y,_){Te(g,_,y)})}function fp(d,g,y){y=Math.min(d.i.length,y);var _=d.l?m(d.l.Na,d.l,d):null;e:{var F=d.i;let U=-1;for(;;){const q=["count="+y];U==-1?0<y?(U=F[0].g,q.push("ofs="+U)):U=0:q.push("ofs="+U);let ye=!0;for(let Je=0;Je<y;Je++){let ue=F[Je].g;const rt=F[Je].map;if(ue-=U,0>ue)U=Math.max(0,F[Je].g-100),ye=!1;else try{EI(rt,q,"req"+ue+"_")}catch{_&&_(rt)}}if(ye){_=q.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,_}function hp(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Tt||ee(),H||(Tt(),H=!0),W.add(g,d),d.v=0}}function wu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=to(m(d.Fa,d),gp(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,pp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=to(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Hs(this),pp(this))};function Cu(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function pp(d){d.g=new Fn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=yn(d.qa);Te(g,"RID","rpc"),Te(g,"SID",d.K),Te(g,"AID",d.T),Te(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Te(g,"TO",d.ja),Te(g,"TYPE","xmlhttp"),co(d,g),d.m&&d.o&&Iu(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=bs(yn(g)),y.m=null,y.P=!0,Gh(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Hs(this),wu(this),pt(19))};function zs(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function mp(d,g){var y=null;if(d.g==g){zs(d),Cu(d),d.g=null;var _=2}else if(Eu(d.h,g))y=g.D,Wh(d.h,g),_=1;else return;if(d.G!=0){if(g.o)if(_==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var F=d.B;_=Ms(),ht(_,new Uh(_,y)),qs(d)}else hp(d);else if(F=g.s,F==3||F==0&&0<g.X||!(_==1&&wI(d,g)||_==2&&wu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),F){case 1:vr(d,5);break;case 4:vr(d,10);break;case 3:vr(d,6);break;default:vr(d,2)}}}function gp(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function vr(d,g){if(d.j.info("Error code "+g),g==2){var y=m(d.fb,d),_=d.Xa;const F=!_;_=new yr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fs(_,"https"),bs(_),F?yI(_.toString(),y):vI(_.toString(),y)}else pt(2);d.G=0,d.l&&d.l.sa(g),yp(d),cp(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function yp(d){if(d.G=0,d.ka=[],d.l){const g=Jh(d.h);(g.length!=0||d.i.length!=0)&&(N(d.ka,g),N(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function vp(d,g,y){var _=y instanceof yr?yn(y):new yr(y);if(_.g!="")g&&(_.g=g+"."+_.g),Us(_,_.s);else{var F=l.location;_=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var U=new yr(null);_&&Fs(U,_),g&&(U.g=g),F&&Us(U,F),y&&(U.l=y),_=U}return y=d.D,g=d.ya,y&&g&&Te(_,y,g),Te(_,"VER",d.la),co(d,_),_}function _p(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new ke(new Os({eb:y})):new ke(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ep(){}t=Ep.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $s(){}$s.prototype.g=function(d,g){return new xt(d,g)};function xt(d,g){nt.call(this),this.g=new up(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!I(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Kr(this)}w(xt,nt),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Su(this.g)},xt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=du(d),d=y);g.i.push(new lI(g.Ya++,d)),g.G==3&&qs(g)},xt.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,xt.aa.N.call(this)};function Tp(d){hu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}w(Tp,hu);function Ip(){pu.call(this),this.status=1}w(Ip,pu);function Kr(d){this.g=d}w(Kr,Ep),Kr.prototype.ua=function(){ht(this.g,"a")},Kr.prototype.ta=function(d){ht(this.g,new Tp(d))},Kr.prototype.sa=function(d){ht(this.g,new Ip)},Kr.prototype.ra=function(){ht(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,DE=function(){return new $s},ME=function(){return Ms()},kE=mr,Rd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,Dl=Ds,bh.COMPLETE="complete",NE=bh,Dh.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Po=Dh,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,xE=ke}).apply(typeof ml<"u"?ml:typeof self<"u"?self:typeof window<"u"?window:{});const Ry="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new IE("@firebase/firestore");function Io(){return Fr.logLevel}function K(t,...e){if(Fr.logLevel<=le.DEBUG){const n=e.map(Jf);Fr.debug(`Firestore (${Wi}): ${t}`,...n)}}function kn(t,...e){if(Fr.logLevel<=le.ERROR){const n=e.map(Jf);Fr.error(`Firestore (${Wi}): ${t}`,...n)}}function Di(t,...e){if(Fr.logLevel<=le.WARN){const n=e.map(Jf);Fr.warn(`Firestore (${Wi}): ${t}`,...n)}}function Jf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Wi}) INTERNAL ASSERTION FAILED: `+t;throw kn(e),new Error(e)}function ge(t,e){t||Q()}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class gD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yD{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new VE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new at(e)}}class vD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _D{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new vD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ED{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ge(this.o===void 0);const r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new ED(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ID(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Vi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ge(0,0))}static max(){return new Z(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends fs{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends fs{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return SD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(De.fromString(e))}static fromName(e){return new Y(De.fromString(e).popFirst(5))}static empty(){return new Y(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new De(e.slice()))}}function wD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new sr(i,Y.empty(),e)}function CD(t){return new sr(t.readTime,t.key,-1)}class sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sr(Z.min(),Y.empty(),-1)}static max(){return new sr(Z.max(),Y.empty(),-1)}}function AD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cs(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RD)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const f=u;n(e[f]).next(h=>{s[f]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function xD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function As(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yf.oe=-1;function Xa(t){return t==null}function _a(t){return t===0&&1/t==-1/0}function ND(t){return typeof t=="number"&&Number.isInteger(t)&&!_a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gl(this.root,e,this.comparator,!0)}}class gl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=i??Qe.EMPTY,this.right=o??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Qe(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xy(this.data.getIterator())}getIteratorFrom(e){return new xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new jt([])}unionWith(e){let n=new je(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UE("Invalid base64 string: "+o):o}}(e);return new tt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const kD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(ge(!!t),typeof t=="string"){let e=0;const n=kD.exec(t);if(ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xf(t){const e=t.mapValue.fields.__previous_value__;return Qf(e)?Xf(e):e}function hs(t){const e=lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,i,o,s,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}}class ps{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ps("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ps&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl={mapValue:{}};function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qf(t)?4:VD(t)?9007199254740991:DD(t)?10:11:Q()}function mn(t,e){if(t===e)return!0;const n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hs(t).isEqual(hs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=lr(i.timestampValue),l=lr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ur(i.bytesValue).isEqual(Ur(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ve(i.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ve(i.integerValue)===Ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ve(i.doubleValue),l=Ve(o.doubleValue);return s===l?_a(s)===_a(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Vi(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Py(s)!==Py(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!mn(s[u],l[u])))return!1;return!0}(t,e);default:return Q()}}function ms(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function Li(t,e){if(t===e)return 0;const n=br(t),r=br(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Ve(o.integerValue||o.doubleValue),u=Ve(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ny(t.timestampValue,e.timestampValue);case 4:return Ny(hs(t),hs(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(o,s){const l=Ur(o),u=Ur(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let f=0;f<l.length&&f<u.length;f++){const h=ce(l[f],u[f]);if(h!==0)return h}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=ce(Ve(o.latitude),Ve(s.latitude));return l!==0?l:ce(Ve(o.longitude),Ve(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ky(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,f,h;const p=o.fields||{},m=s.fields||{},v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=(u=m.value)===null||u===void 0?void 0:u.arrayValue,P=ce(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:ky(v,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===yl.mapValue&&s===yl.mapValue)return 0;if(o===yl.mapValue)return 1;if(s===yl.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),f=s.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=ce(u[p],h[p]);if(m!==0)return m;const v=Li(l[u[p]],f[h[p]]);if(v!==0)return v}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Ny(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=lr(t),r=lr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function ky(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Li(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Fi(t){return Pd(t)}function Pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Pd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Pd(n.fields[s])}`;return i+"}"}(t.mapValue):Q()}function xd(t){return!!t&&"integerValue"in t}function Zf(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Dy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vl(t){return!!t&&"mapValue"in t}function DD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=Xe.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Go(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ji(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ot(Go(this.value))}}function bE(t){const e=[];return Ji(t.fields,(n,r)=>{const i=new Xe([n]);if(Vl(r)){const o=bE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,Z.min(),Z.min(),Z.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,i){return new ct(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new ct(e,2,n,Z.min(),Z.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,Z.min(),Z.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.position=e,this.inclusive=n}}function Vy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=Li(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ly(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n="asc"){this.field=e,this.dir=n}}function LD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class Oe extends OE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UD(e,n,r):n==="array-contains"?new BD(e,r):n==="in"?new GD(e,r):n==="not-in"?new HD(e,r):n==="array-contains-any"?new qD(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bD(e,r):new OD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Li(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(Li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends OE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gn(e,n)}matches(e){return BE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BE(t){return t.op==="and"}function GE(t){return FD(t)&&BE(t)}function FD(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Nd(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(GE(t))return t.filters.map(e=>Nd(e)).join(",");{const e=t.filters.map(n=>Nd(n)).join(",");return`${t.op}(${e})`}}function HE(t,e){return t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&HE(s,i.filters[l]),!0):!1}(t,e):void Q()}function qE(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(qE).join(" ,")+"}"}(t):"Filter"}class UD extends Oe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class bD extends Oe{constructor(e,n){super(e,"in",n),this.keys=zE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OD extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=zE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class BD extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zf(n)&&ms(n.arrayValue,this.value)}}class GD extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ms(this.value.arrayValue,n)}}class HD extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ms(this.value.arrayValue,n)}}class qD extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ms(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function Fy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new zD(t,e,n,r,i,o,s)}function jf(t){const e=j(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.ue=n}return e.ue}function eh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ly(t.startAt,e.startAt)&&Ly(t.endAt,e.endAt)}function kd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $D(t,e,n,r,i,o,s,l){return new Za(t,e,n,r,i,o,s,l)}function th(t){return new Za(t)}function Uy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KD(t){return t.collectionGroup!==null}function Ho(t){const e=j(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new je(Xe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ta(o,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new Ta(Xe.keyField(),r))}return e.ce}function hn(t){const e=j(t);return e.le||(e.le=WD(e,Ho(t))),e.le}function WD(t,e){if(t.limitType==="F")return Fy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ta(i.field,o)});const n=t.endAt?new Ea(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ea(t.startAt.position,t.startAt.inclusive):null;return Fy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Md(t,e,n){return new Za(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ja(t,e){return eh(hn(t),hn(e))&&t.limitType===e.limitType}function $E(t){return`${jf(hn(t))}|lt:${t.limitType}`}function Zr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qE(i)).join(", ")}]`),Xa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fi(i)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function eu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ho(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const f=Vy(s,l,u);return s.inclusive?f<=0:f<0}(r.startAt,Ho(r),i)||r.endAt&&!function(s,l,u){const f=Vy(s,l,u);return s.inclusive?f>=0:f>0}(r.endAt,Ho(r),i))}(t,e)}function JD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KE(t){return(e,n)=>{let r=!1;for(const i of Ho(t)){const o=YD(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YD(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),f=l.data.field(o);return u!==null&&f!==null?Li(u,f):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new xe(Y.comparator);function Mn(){return QD}const WE=new xe(Y.comparator);function xo(...t){let e=WE;for(const n of t)e=e.insert(n.key,n);return e}function JE(t){let e=WE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ar(){return qo()}function YE(){return qo()}function qo(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const XD=new xe(Y.comparator),ZD=new je(Y.comparator);function ie(...t){let e=ZD;for(const n of t)e=e.add(n);return e}const jD=new je(ce);function e2(){return jD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_a(e)?"-0":e}}function QE(t){return{integerValue:""+t}}function t2(t,e){return ND(e)?QE(e):nh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this._=void 0}}function n2(t,e,n){return t instanceof Ia?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qf(o)&&(o=Xf(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof gs?ZE(t,e):t instanceof ys?jE(t,e):function(i,o){const s=XE(i,o),l=by(s)+by(i.Pe);return xd(s)&&xd(i.Pe)?QE(l):nh(i.serializer,l)}(t,e)}function r2(t,e,n){return t instanceof gs?ZE(t,e):t instanceof ys?jE(t,e):n}function XE(t,e){return t instanceof Sa?function(r){return xd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ia extends tu{}class gs extends tu{constructor(e){super(),this.elements=e}}function ZE(t,e){const n=eT(e);for(const r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ys extends tu{constructor(e){super(),this.elements=e}}function jE(t,e){let n=eT(e);for(const r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}class Sa extends tu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function by(t){return Ve(t.integerValue||t.doubleValue)}function eT(t){return Zf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gs&&i instanceof gs||r instanceof ys&&i instanceof ys?Vi(r.elements,i.elements,mn):r instanceof Sa&&i instanceof Sa?mn(r.Pe,i.Pe):r instanceof Ia&&i instanceof Ia}(t.transform,e.transform)}class o2{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nu{}function tT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rT(t.key,wn.none()):new Rs(t.key,t.data,wn.none());{const n=t.data,r=Ot.empty();let i=new je(Xe.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hr(t.key,r,new jt(i.toArray()),wn.none())}}function s2(t,e,n){t instanceof Rs?function(i,o,s){const l=i.value.clone(),u=By(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(i,o,s){if(!Ll(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=By(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(nT(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function zo(t,e,n,r){return t instanceof Rs?function(o,s,l,u){if(!Ll(o.precondition,s))return l;const f=o.value.clone(),h=Gy(o.fieldTransforms,u,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(o,s,l,u){if(!Ll(o.precondition,s))return l;const f=Gy(o.fieldTransforms,u,s),h=s.data;return h.setAll(nT(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return Ll(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function l2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=XE(r.transform,i||null);o!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,o))}return n||null}function Oy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vi(r,i,(o,s)=>i2(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rs extends nu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hr extends nu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function By(t,e,n){const r=new Map;ge(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,r2(s,l,n[i]))}return r}function Gy(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,n2(o,s,e))}return r}class rT extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a2 extends nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&s2(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=tT(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Vi(this.mutations,e.mutations,(n,r)=>Oy(n,r))&&Vi(this.baseMutations,e.baseMutations,(n,r)=>Oy(n,r))}}class rh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length);let i=function(){return XD}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new rh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,se;function f2(t){switch(t){default:return Q();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function iT(t){if(t===void 0)return kn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Fe.OK:return B.OK;case Fe.CANCELLED:return B.CANCELLED;case Fe.UNKNOWN:return B.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return B.INTERNAL;case Fe.UNAVAILABLE:return B.UNAVAILABLE;case Fe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Fe.NOT_FOUND:return B.NOT_FOUND;case Fe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Fe.ABORTED:return B.ABORTED;case Fe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Fe.DATA_LOSS:return B.DATA_LOSS;default:return Q()}}(se=Fe||(Fe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new xr([4294967295,4294967295],0);function Hy(t){const e=h2().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function qy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([n,r],0),new xr([i,o],0)]}class ih{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new No(`Invalid padding: ${n}`);if(r<0)throw new No(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new No(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new No(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=xr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(xr.fromNumber(r)));return i.compare(p2)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hy(e),[r,i]=qy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new ih(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=Hy(e),[r,i]=qy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class No extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ps.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ru(Z.min(),i,new xe(ce),Mn(),ie())}}class Ps{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ps(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class oT{constructor(e,n){this.targetId=e,this.me=n}}class sT{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zy{constructor(){this.fe=0,this.ge=Ky(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Ps(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ky()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=$y(),this.Qe=new xe(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(kd(o))if(r===0){const s=new Y(o.path);this.Ue(n,s,ct.newNoDocument(s,Z.min()))}else ge(r===1);else{const s=this.Ye(n);if(s!==r){const l=this.Ze(e),u=l?this.Xe(l,e,s):1;if(u!==0){this.je(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=Ur(r).toUint8Array()}catch(u){if(u instanceof UE)return Di("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ih(s,i,o)}catch(u){return Di(u instanceof No?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&kd(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ct.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new ru(e,n,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=$y(),this.Qe=new xe(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new je(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $y(){return new xe(Y.comparator)}function Ky(){return new xe(Y.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class _2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dd(t,e){return t.useProto3Json||Xa(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E2(t,e){return wa(t,e.toTimestamp())}function pn(t){return ge(!!t),Z.fromTimestamp(function(n){const r=lr(n);return new Ge(r.seconds,r.nanos)}(t))}function oh(t,e){return Vd(t,e).canonicalString()}function Vd(t,e){const n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aT(t){const e=De.fromString(t);return ge(hT(e)),e}function Ld(t,e){return oh(t.databaseId,e.path)}function ac(t,e){const n=aT(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(cT(n))}function uT(t,e){return oh(t.databaseId,e)}function T2(t){const e=aT(t);return e.length===4?De.emptyPath():cT(e)}function Fd(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cT(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wy(t,e,n){return{name:Ld(t,e),fields:n.value.mapValue.fields}}function I2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,h){return f.useProto3Json?(ge(h===void 0||typeof h=="string"),tt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(f){const h=f.code===void 0?B.UNKNOWN:iT(f.code);return new J(h,f.message||"")}(s);n=new sT(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ac(t,r.document.name),o=pn(r.document.updateTime),s=r.document.createTime?pn(r.document.createTime):Z.min(),l=new Ot({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Fl(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ac(t,r.document),o=r.readTime?pn(r.readTime):Z.min(),s=ct.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Fl([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ac(t,r.document),o=r.removedTargetIds||[];n=new Fl([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new d2(i,o),l=r.targetId;n=new oT(l,s)}}return n}function S2(t,e){let n;if(e instanceof Rs)n={update:Wy(t,e.key,e.value)};else if(e instanceof rT)n={delete:Ld(t,e.key)};else if(e instanceof Hr)n={update:Wy(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof a2))return Q();n={verify:Ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Ia)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ys)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sa)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:E2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(t,e.precondition)),n}function w2(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?pn(i.updateTime):pn(o);return s.isEqual(Z.min())&&(s=pn(o)),new o2(s,i.transformResults||[])}(n,e))):[]}function C2(t,e){return{documents:[uT(t,e.path)]}}function A2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uT(t,i);const o=function(f){if(f.length!==0)return fT(gn.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(f){if(f.length!==0)return f.map(h=>function(m){return{field:jr(m.field),direction:x2(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Dd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:i}}function R2(t){let e=T2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=dT(p);return m instanceof gn&&GE(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(w){return new Ta(ei(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Xa(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,v=p.values||[];return new Ea(v,m)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const m=!p.before,v=p.values||[];return new Ea(v,m)}(n.endAt)),$D(e,i,s,o,l,"F",u,f)}function P2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ei(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ei(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ei(n.unaryFilter.field);return Oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ei(n.unaryFilter.field);return Oe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(ei(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>dT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function x2(t){return g2[t]}function N2(t){return y2[t]}function k2(t){return v2[t]}function jr(t){return{fieldPath:t.canonicalString()}}function ei(t){return Xe.fromServerFormat(t.fieldPath)}function fT(t){return t instanceof Oe?function(n){if(n.op==="=="){if(Dy(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NAN"}};if(My(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dy(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NAN"}};if(My(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(n.field),op:N2(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(i=>fT(i));return r.length===1?r[0]:{compositeFilter:{op:k2(n.op),filters:r}}}(t):Q()}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n,r,i,o=Z.min(),s=Z.min(),l=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Wn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.ct=e}}function V2(t){const e=R2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.un=new F2}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(sr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class F2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(De.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ui(0)}static kn(){return new Ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zo(r.mutation,i,jt.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Ar();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=xo();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Mn();const s=qo(),l=function(){return qo()}();return n.forEach((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Hr)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),zo(h.mutation,f,h.mutation.getFieldMask(),Ge.now())):s.set(f.key,jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>{var p;return l.set(f,new b2(h,(p=s.get(f))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=qo();let i=new xe((s,l)=>s-l),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let h=r.get(u)||jt.empty();h=l.applyToLocalView(f,h),r.set(u,h);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,h=u.value,p=YE();h.forEach(m=>{if(!o.has(m)){const v=tT(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Ar());let l=-1,u=o;return s.next(f=>O.forEach(f,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,ie())).next(h=>({batchId:l,changes:JE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=xo();return this.indexManager.getCollectionParents(e,o).next(l=>O.forEach(l,u=>{const f=function(p,m){return new Za(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,ct.newInvalidDocument(h)))});let l=xo();return s.forEach((u,f)=>{const h=o.get(u);h!==void 0&&zo(h.mutation,f,jt.empty(),Ge.now()),eu(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:V2(i.bundledQuery),readTime:pn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.overlays=new xe(Y.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ar();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Ar(),o=n.length+1,s=new Y(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Ar(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Ar(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=i)););return O.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new c2(n,r));let o=this.Ir.get(n);o===void 0&&(o=ie(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.Tr=new je(qe.Er),this.dr=new je(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new De([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new De([])),r=new qe(n,e),i=new qe(n,e+1);let o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new je(qe.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new u2(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new qe(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ce);return n.forEach(i=>{const o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Y.isDocumentKey(o)||(o=o.child(""));const s=new qe(new Y(o),0);let l=new je(ce);return this.br.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(u.wr)),!0)},s),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.Mr=e,this.docs=function(){return new xe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ct.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Mn();const s=n.path,l=new Y(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||AD(CD(h),r)<=0||(i.has(h.key)||eu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $2(this)}getSize(e){return O.resolve(this.size)}}class $2 extends U2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.persistence=e,this.Nr=new Yi(n=>jf(n),eh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sh,this.targetCount=0,this.kr=Ui.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ui(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yf(0),this.Kr=!1,this.Kr=!0,this.$r=new H2,this.referenceDelegate=e(this),this.Ur=new K2(this),this.indexManager=new L2,this.remoteDocumentCache=function(i){return new z2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new D2(n),this.Gr=new B2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new G2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new q2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new J2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class J2 extends PD{constructor(e){super(),this.currentSequenceNumber=e}}class lh{constructor(e){this.persistence=e,this.Jr=new sh,this.Yr=null}static Zr(e){return new lh(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=Y.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ah(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return X1()?8:xD(Y1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Y2;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Io()<=le.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Zr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Io()<=le.DEBUG&&K("QueryEngine","Query:",Zr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Io()<=le.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Zr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):O.resolve())}Yi(e,n){if(Uy(n))return O.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Md(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ie(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.ts(n,l);return this.ns(n,f,s,u.readTime)?this.Yi(e,Md(n,null,"F")):this.rs(e,f,n,u)}))})))}Zi(e,n,r,i){return Uy(n)||i.isEqual(Z.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?O.resolve(null):(Io()<=le.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(n)),this.rs(e,s,n,wD(i,-1)).next(l=>l))})}ts(e,n){let r=new je(KE(e));return n.forEach((i,o)=>{eu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Io()<=le.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Zr(n)),this.Ji.getDocumentsMatchingQuery(e,n,sr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(ce),this._s=new Yi(o=>jf(o),eh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Z2(t,e,n,r){return new X2(t,e,n,r)}async function pT(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=ie();for(const f of i){s.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(f=>({hs:f,removedBatchIds:s,addedBatchIds:l}))})})}function j2(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,h){const p=f.batch,m=p.keys();let v=O.resolve();return m.forEach(w=>{v=v.next(()=>h.getEntry(u,w)).next(P=>{const N=f.docVersions.get(w);ge(N!==null),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),h.addEntry(P)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mT(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eV(t,e){const n=j(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(tt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(P,N,T){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,v,h)&&l.push(n.Ur.updateTargetData(o,v))});let u=Mn(),f=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(tV(o,s,e.documentUpdates).next(h=>{u=h.Ps,f=h.Is})),!r.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return O.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.os=i,o))}function tV(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Mn();return n.forEach((l,u)=>{const f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function nV(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rV(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Wn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ud(t,e,n){const r=j(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!As(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Jy(t,e,n){const r=j(t);let i=Z.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,f,h){const p=j(u),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(f,h)}(r,s,hn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:ie())).next(l=>(iV(r,JD(e),l),{documents:l,Ts:o})))}function iV(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Yy{constructor(){this.activeTargetIds=e2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oV{constructor(){this.so=new Yy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl=null;function uc(){return vl===null?vl=function(){return 268435456+Math.round(2147483648*Math.random())}():vl++,"0x"+vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class uV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const l=uc(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,s),this.No(n,u,f,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw Di("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,l){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=lV[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=uc();return new Promise((s,l)=>{const u=new xE;u.setWithCredentials(!0),u.listenOnce(NE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Dl.NO_ERROR:const h=u.getResponseJson();K(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Dl.TIMEOUT:K(lt,`RPC '${e}' ${o} timed out`),l(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case Dl.HTTP_ERROR:const p=u.getStatus();if(K(lt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const w=function(N){const T=N.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(T)>=0?T:B.UNKNOWN}(v.status);l(new J(w,v.message))}else l(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(B.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{K(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);K(lt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",f,r,15)})}Bo(e,n,r){const i=uc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=DE(),l=ME(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");K(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=s.createWebChannel(h,u);let m=!1,v=!1;const w=new aV({Io:N=>{v?K(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(K(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),K(lt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),P=(N,T,I)=>{N.listen(T,A=>{try{I(A)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,Po.EventType.OPEN,()=>{v||(K(lt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),P(p,Po.EventType.CLOSE,()=>{v||(v=!0,K(lt,`RPC '${e}' stream ${i} transport closed`),w.So())}),P(p,Po.EventType.ERROR,N=>{v||(v=!0,Di(lt,`RPC '${e}' stream ${i} transport errored:`,N),w.So(new J(B.UNAVAILABLE,"The operation could not be completed")))}),P(p,Po.EventType.MESSAGE,N=>{var T;if(!v){const I=N.data[0];ge(!!I);const A=I,D=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(D){K(lt,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let b=function(S){const R=Fe[S];if(R!==void 0)return iT(R)}(L),C=D.message;b===void 0&&(b=B.INTERNAL,C="Unknown error status: "+L+" with message "+D.message),v=!0,w.So(new J(b,C)),p.close()}else K(lt,`RPC '${e}' stream ${i} received:`,I),w.bo(I)}}),P(l,kE.STAT_EVENT,N=>{N.stat===Rd.PROXY?K(lt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Rd.NOPROXY&&K(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function cc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return new _2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r,i,o,s,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cV extends yT{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=I2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?pn(s.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Fd(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=kd(u)?{documents:C2(o,u)}:{query:A2(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=lT(o,s.resumeToken);const f=Dd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Z.min())>0){l.readTime=wa(o,s.snapshotVersion.toTimestamp());const f=Dd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=P2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Fd(this.serializer),n.removeTarget=e,this.a_(n)}}class dV extends yT{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=w2(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Fd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>S2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Vd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(B.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,Vd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{qr(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const f=j(u);f.L_.add(4),await xs(f),f.q_.set("Unknown"),f.L_.delete(4),await ou(f)}(this))})}),this.q_=new hV(r,i)}}async function ou(t){if(qr(t))for(const e of t.B_)await e(!0)}async function xs(t){for(const e of t.B_)await e(!1)}function vT(t,e){const n=j(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),fh(n)?dh(n):Qi(n).r_()&&ch(n,e))}function uh(t,e){const n=j(t),r=Qi(n);n.N_.delete(e),r.r_()&&_T(n,e),n.N_.size===0&&(r.r_()?r.o_():qr(n)&&n.q_.set("Unknown"))}function ch(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qi(t).A_(e)}function _T(t,e){t.Q_.xe(e),Qi(t).R_(e)}function dh(t){t.Q_=new m2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qi(t).start(),t.q_.v_()}function fh(t){return qr(t)&&!Qi(t).n_()&&t.N_.size>0}function qr(t){return j(t).L_.size===0}function ET(t){t.Q_=void 0}async function mV(t){t.q_.set("Online")}async function gV(t){t.N_.forEach((e,n)=>{ch(t,e)})}async function yV(t,e){ET(t),fh(t)?(t.q_.M_(e),dh(t)):t.q_.set("Unknown")}async function vV(t,e,n){if(t.q_.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ca(t,r)}else if(e instanceof Fl?t.Q_.Ke(e):e instanceof oT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await mT(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.N_.get(f);h&&o.N_.set(f,h.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,f)=>{const h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),_T(o,u);const p=new Wn(h.target,u,f,h.sequenceNumber);ch(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ca(t,r)}}async function Ca(t,e,n){if(!As(e))throw e;t.L_.add(1),await xs(t),t.q_.set("Offline"),n||(n=()=>mT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ou(t)})}function TT(t,e){return e().catch(n=>Ca(t,n,e))}async function su(t){const e=j(t),n=ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_V(e);)try{const i=await nV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,EV(e,i)}catch(i){await Ca(e,i)}IT(e)&&ST(e)}function _V(t){return qr(t)&&t.O_.length<10}function EV(t,e){t.O_.push(e);const n=ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function IT(t){return qr(t)&&!ar(t).n_()&&t.O_.length>0}function ST(t){ar(t).start()}async function TV(t){ar(t).p_()}async function IV(t){const e=ar(t);for(const n of t.O_)e.m_(n.mutations)}async function SV(t,e,n){const r=t.O_.shift(),i=rh.from(r,e,n);await TT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await su(t)}async function wV(t,e){e&&ar(t).V_&&await async function(r,i){if(function(s){return f2(s)&&s!==B.ABORTED}(i.code)){const o=r.O_.shift();ar(r).s_(),await TT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await su(r)}}(t,e),IT(t)&&ST(t)}async function Xy(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=qr(n);n.L_.add(3),await xs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ou(n)}async function CV(t,e){const n=j(t);e?(n.L_.delete(2),await ou(n)):e||(n.L_.add(2),await xs(n),n.q_.set("Unknown"))}function Qi(t){return t.K_||(t.K_=function(n,r,i){const o=j(n);return o.w_(),new cV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:mV.bind(null,t),Ro:gV.bind(null,t),mo:yV.bind(null,t),d_:vV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),fh(t)?dh(t):t.q_.set("Unknown")):(await t.K_.stop(),ET(t))})),t.K_}function ar(t){return t.U_||(t.U_=function(n,r,i){const o=j(n);return o.w_(),new dV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TV.bind(null,t),mo:wV.bind(null,t),f_:IV.bind(null,t),g_:SV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await su(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new hh(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(t,e){if(kn("AsyncQueue",`${e}: ${t}`),As(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new wi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.W_=new xe(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bi{constructor(e,n,r,i,o,s,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new bi(e,n,wi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ja(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RV{constructor(){this.queries=jy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=j(n),o=i.queries;i.queries=jy(),o.forEach((s,l)=>{for(const u of l.j_)u.onError(r)})})(this,new J(B.ABORTED,"Firestore shutting down"))}}function jy(){return new Yi(t=>$E(t),ja)}async function PV(t,e){const n=j(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new AV,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=ph(s,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&mh(n)}async function xV(t,e){const n=j(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NV(t,e){const n=j(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&mh(n)}function kV(t,e,n){const r=j(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function mh(t){t.Y_.forEach(e=>{e.next()})}var bd,ev;(ev=bd||(bd={})).ea="default",ev.Cache="cache";class MV{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class DV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=KE(e),this.Ra=new wi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=eu(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;m&&v?m.data.isEqual(v.data)?w!==P&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||f&&this.Aa(v,f)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||f)&&(l=!0)),N&&(v?(s=s.add(v),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(v,w){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return P(v)-P(w)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,f=u!==this.Ea;return this.Ea=u,s.length!==0||f?{snapshot:new bi(this.query,e.Ra,o,s,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new CT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LV{constructor(e){this.key=e,this.va=!1}}class FV{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Yi(l=>$E(l),ja),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(Y.comparator),this.Na=new Map,this.La=new sh,this.Ba={},this.ka=new Map,this.qa=Ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function UV(t,e,n=!0){const r=kT(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await AT(r,e,n,!0),i}async function bV(t,e){const n=kT(t);await AT(n,e,!0,!1)}async function AT(t,e,n,r){const i=await rV(t.localStore,hn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await OV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&vT(t.remoteStore,i),l}async function OV(t,e,n,r,i){t.Ka=(p,m,v)=>async function(P,N,T,I){let A=N.view.ma(T);A.ns&&(A=await Jy(P.localStore,N.query,!1).then(({documents:C})=>N.view.ma(C,A)));const D=I&&I.targetChanges.get(N.targetId),L=I&&I.targetMismatches.get(N.targetId)!=null,b=N.view.applyChanges(A,P.isPrimaryClient,D,L);return nv(P,N.targetId,b.wa),b.snapshot}(t,p,m,v);const o=await Jy(t.localStore,e,!0),s=new DV(e,o.Ts),l=s.ma(o.documents),u=Ps.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,u);nv(t,n,f.wa);const h=new VV(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function BV(t,e,n){const r=j(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ja(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ud(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uh(r.remoteStore,i.targetId),Od(r,i.targetId)}).catch(Cs)):(Od(r,i.targetId),await Ud(r.localStore,i.targetId,!0))}async function GV(t,e){const n=j(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uh(n.remoteStore,r.targetId))}async function HV(t,e,n){const r=YV(t);try{const i=await function(s,l){const u=j(s),f=Ge.now(),h=l.reduce((v,w)=>v.add(w.key),ie());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Mn(),P=ie();return u.cs.getEntries(v,h).next(N=>{w=N,w.forEach((T,I)=>{I.isValidDocument()||(P=P.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(N=>{p=N;const T=[];for(const I of l){const A=l2(I,p.get(I.key).overlayedDocument);A!=null&&T.push(new Hr(I.key,A,bE(A.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,f,T,l)}).next(N=>{m=N;const T=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(v,N.batchId,T)})}).then(()=>({batchId:m.batchId,changes:JE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let f=s.Ba[s.currentUser.toKey()];f||(f=new xe(ce)),f=f.insert(l,u),s.Ba[s.currentUser.toKey()]=f}(r,i.batchId,n),await Ns(r,i.changes),await su(r.remoteStore)}catch(i){const o=ph(i,"Failed to persist write");n.reject(o)}}async function RT(t,e){const n=j(t);try{const r=await eV(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ge(s.va):i.removedDocuments.size>0&&(ge(s.va),s.va=!1))}),await Ns(n,r,e)}catch(r){await Cs(r)}}function tv(t,e,n){const r=j(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=j(s);u.onlineState=l;let f=!1;u.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(l)&&(f=!0)}),f&&mh(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qV(t,e,n){const r=j(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new xe(Y.comparator);s=s.insert(o,ct.newNoDocument(o,Z.min()));const l=ie().add(o),u=new ru(Z.min(),new Map,new xe(ce),s,l);await RT(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),gh(r)}else await Ud(r.localStore,e,!1).then(()=>Od(r,e,n)).catch(Cs)}async function zV(t,e){const n=j(t),r=e.batch.batchId;try{const i=await j2(n.localStore,e);xT(n,r,null),PT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,i)}catch(i){await Cs(i)}}async function $V(t,e,n){const r=j(t);try{const i=await function(s,l){const u=j(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,l).next(p=>(ge(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,e);xT(r,e,n),PT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ns(r,i)}catch(i){await Cs(i)}}function PT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xT(t,e,n){const r=j(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Od(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||NT(t,r)})}function NT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(uh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gh(t))}function nv(t,e,n){for(const r of n)r instanceof wT?(t.La.addReference(r.key,e),KV(t,r)):r instanceof CT?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||NT(t,r.key)):Q()}function KV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),gh(t))}function gh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(De.fromString(e)),r=t.qa.next();t.Na.set(r,new LV(n)),t.Oa=t.Oa.insert(n,r),vT(t.remoteStore,new Wn(hn(th(n.path)),r,"TargetPurposeLimboResolution",Yf.oe))}}async function Ns(t,e,n){const r=j(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{s.push(r.Ka(u,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){i.push(f);const p=ah.Wi(u.targetId,f);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(u,f){const h=j(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(f,m=>O.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>O.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!As(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const m=p.targetId;if(!p.fromCache){const v=h.os.get(m),w=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(m,P)}}}(r.localStore,o))}async function WV(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await pT(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new J(B.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.hs)}}function JV(t,e){const n=j(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const l=n.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function kT(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qV.bind(null,e),e.Ca.d_=NV.bind(null,e.eventManager),e.Ca.$a=kV.bind(null,e.eventManager),e}function YV(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$V.bind(null,e),e}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Z2(this.persistence,new Q2,e.initialUser,this.serializer)}Ga(e){return new W2(lh.Zr,this.serializer)}Wa(e){return new oV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WV.bind(null,this.syncEngine),await CV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RV}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),r=function(o){return new uV(o)}(e.databaseInfo);return function(o,s,l,u){return new fV(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new pV(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>tv(this.syncEngine,n,0),function(){return Qy.D()?new Qy:new sV}())}createSyncEngine(e,n){return function(i,o,s,l,u,f,h){const p=new FV(i,o,s,l,u,f);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=j(i);K("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await xs(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=LE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{K("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ph(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dc(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZV(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xy(e.remoteStore,i)),t._onlineComponents=e}async function ZV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await dc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await dc(t,new Aa)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await dc(t,new Aa);return t._offlineComponents}async function MT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await rv(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await rv(t,new Bd))),t._onlineComponents}function jV(t){return MT(t).then(e=>e.syncEngine)}async function iv(t){const e=await MT(t),n=e.eventManager;return n.onListen=UV.bind(null,e.syncEngine),n.onUnlisten=BV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tL(t,e,n,r){if(e===!0&&r===!0)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sv(t){if(!Y.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mD;switch(r.type){case"firstParty":return new _D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ov.get(n);r&&(K("ComponentProvider","Removing Datastore"),ov.delete(n),r.terminate())}(this),Promise.resolve()}}function nL(t,e,n,r={}){var i;const o=(t=Ci(t,vh))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=at.MOCK_USER;else{l=J1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(f)}t._authCredentials=new gD(new VE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lu(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class vs extends lu{constructor(e,n,r){super(e,n,th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Y(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function VT(t,e,...n){if(t=us(t),arguments.length===1&&(e=LE.newId()),eL("doc","path",e),t instanceof vh){const r=De.fromString(e,...n);return sv(r),new qt(t,null,new Y(r))}{if(!(t instanceof qt||t instanceof vs))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return sv(r),new qt(t.firestore,t instanceof vs?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gT(this,"async_queue_retry"),this.Vu=()=>{const r=cc();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=cc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=cc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!As(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=hh.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function uv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ra extends vh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new av,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new av(e),this._firestoreClient=void 0,await e}}}function rL(t,e){const n=typeof t=="object"?t:rD(),r=typeof t=="string"?t:"(default)",i=jM(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=K1("firestore");o&&nL(i,...o)}return i}function LT(t){if(t._terminated)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iL(t),t._firestoreClient}function iL(t){var e,n,r;const i=t._freezeSettings(),o=function(l,u,f,h){return new MD(l,u,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new XV(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oi(tt.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oi(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=/^__.*__$/;class sL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rs(e,this.data,n,this.fieldTransforms)}}function UT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Ih{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ih(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UT(this.Cu)&&oL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iu(e)}Qu(e,n,r,i=!1){return new Ih({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aL(t){const e=t._freezeSettings(),n=iu(t._databaseId);return new lL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uL(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);GT("Data must be an object, but it was:",s,r);const l=OT(r,s);let u,f;if(o.merge)u=new jt(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=cL(e,p,n);if(!s.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fL(h,m)||h.push(m)}u=new jt(h),f=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=s.fieldTransforms;return new sL(new Ot(l),u,f)}function bT(t,e){if(BT(t=us(t)))return GT("Unsupported field value:",e,t),OT(t,e);if(t instanceof FT)return function(r,i){if(!UT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=bT(l,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=us(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ge.fromDate(r);return{timestampValue:wa(i.serializer,o)}}if(r instanceof Ge){const o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wa(i.serializer,o)}}if(r instanceof Eh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oi)return{bytesValue:lT(i.serializer,r._byteString)};if(r instanceof qt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:oh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Th)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return nh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yh(r)}`)}(t,e)}function OT(t,e){const n={};return FE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(r,i)=>{const o=bT(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function BT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Eh||t instanceof Oi||t instanceof qt||t instanceof FT||t instanceof Th)}function GT(t,e,n){if(!BT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=yh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function cL(t,e,n){if((e=us(e))instanceof _h)return e._internalPath;if(typeof e=="string")return HT(t,e);throw Pa("Field path arguments must be of type string or ",t,!1,void 0,n)}const dL=new RegExp("[~\\*/\\[\\]]");function HT(t,e,n){if(e.search(dL)>=0)throw Pa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _h(...e.split("."))._internalPath}catch{throw Pa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pa(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,l+t+u)}function fL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hL extends qT{data(){return super.data()}}function zT(t,e){return typeof e=="string"?HT(t,e):e instanceof _h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mL{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ji(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ve(s.doubleValue));return new Th(o)}convertGeoPoint(e){return new Eh(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hs(e));default:return null}}convertTimestamp(e){const n=lr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);ge(hT(r));const i=new ps(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||kn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $T extends qT{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ul extends $T{data(e={}){return super.data(e)}}class yL{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ko(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ul(this._firestore,this._userDataWriter,r.key,r,new ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new Ul(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ko(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Ul(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ko(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:vL(l.type),doc:u,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class KT extends mL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function _L(t,e,n){t=Ci(t,qt);const r=Ci(t.firestore,Ra),i=gL(t.converter,e);return TL(r,[uL(aL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wn.none())])}function EL(t,...e){var n,r,i;t=us(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||uv(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(uv(e[s])){const p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,f,h;if(t instanceof qt)f=Ci(t.firestore,Ra),h=th(t._key.path),u={next:p=>{e[s]&&e[s](IL(f,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Ci(t,lu);f=Ci(p.firestore,Ra),h=p._query;const m=new KT(f);u={next:v=>{e[s]&&e[s](new yL(f,m,p,v))},error:e[s+1],complete:e[s+2]},pL(t._query)}return function(m,v,w,P){const N=new QV(P),T=new MV(v,N,w);return m.asyncQueue.enqueueAndForget(async()=>PV(await iv(m),T)),()=>{N.Za(),m.asyncQueue.enqueueAndForget(async()=>xV(await iv(m),T))}}(LT(f),h,l,u)}function TL(t,e){return function(r,i){const o=new Nr;return r.asyncQueue.enqueueAndForget(async()=>HV(await jV(r),i,o)),o.promise}(LT(t),e)}function IL(t,e,n){const r=n.docs.get(e._key),i=new KT(t);return new $T(t,i,e._key,r,new ko(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Wi=i})(nD),va(new cs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Ra(new yD(r.getProvider("auth-internal")),new TD(r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(f.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Si(Ry,"4.7.3",e),Si(Ry,"4.7.3","esm2017")})();var Yr={VITE_FIREBASE_API_KEY:"AIzaSyAaX3eVVAnxFxUg4LXJPGPCw67RPKmCLTw",VITE_FIREBASE_AUTH_DOMAIN:"coffe-track.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"coffe-track",VITE_FIREBASE_STORAGE_BUCKET:"coffe-track.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"1089989641871",VITE_FIREBASE_APP_ID:"1:1089989641871:web:ea52134e07e9cb7d5552fa"};const fc={apiKey:Yr.VITE_FIREBASE_API_KEY,authDomain:Yr.VITE_FIREBASE_AUTH_DOMAIN,projectId:Yr.VITE_FIREBASE_PROJECT_ID,storageBucket:Yr.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Yr.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Yr.VITE_FIREBASE_APP_ID},WT="kahve_takip",JT="oda_2012_listesi",bl="office-coffee-data";let _s=null,Sh=!1;if(fc.apiKey&&fc.projectId)try{const t=CE(fc);_s=rL(t),Sh=!0,console.log(" Firebase environment deikenleri ile balatld.")}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn(" Firebase config bulunamad. Uygulama sadece LocalStorage modunda alacak.");const Qr=async(t,e)=>{const n={people:t,expenses:e,lastUpdated:new Date().toISOString()};try{localStorage.setItem(bl,JSON.stringify(n))}catch(r){console.error("LocalStorage save error:",r)}if(Sh&&_s)try{await _L(VT(_s,WT,JT),n)}catch(r){console.error("Firebase save error:",r)}},SL=t=>{const e=()=>{const r=localStorage.getItem(bl);if(r)try{const i=JSON.parse(r);Array.isArray(i)?t(i,[]):t(i.people||[],i.expenses||[])}catch(i){console.error("Local data parse error",i)}};if(e(),Sh&&_s)return EL(VT(_s,WT,JT),i=>{if(i.exists()){const o=i.data(),s=o.people||(Array.isArray(o)?o:[]),l=o.expenses||[];localStorage.setItem(bl,JSON.stringify({people:s,expenses:l,lastUpdated:new Date().toISOString()})),console.log(" Firebase'den gncel veri geldi."),t(s,l)}},i=>{console.error("Firebase dinleme hatas:",i)});const n=r=>{r.key===bl&&r.newValue&&e()};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)};var wL={VITE_ADMIN_PASSWORD:"2012"};const cv="office-coffee-settings",dv=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2),CL=()=>{const[t,e]=he.useState([]),[n,r]=he.useState([]),[i,o]=he.useState("income"),[s,l]=he.useState(!0),[u,f]=he.useState(!1),[h,p]=he.useState(!1),[m,v]=he.useState(""),[w,P]=he.useState(!1),[N,T]=he.useState(""),[I,A]=he.useState(""),[D,L]=he.useState(""),[b,C]=he.useState(200),[E,S]=he.useState(0),[R,k]=he.useState(!1),[V,x]=he.useState(null),[oe,We]=he.useState(!1);he.useEffect(()=>{const te=localStorage.getItem(cv);if(te)try{const fe=JSON.parse(te);C(fe.price||200),S(fe.consumption||0)}catch(fe){console.error("Failed to load settings",fe)}l(!0);const re=SL((fe,ve)=>{const He=fe.map(It=>It.totalPaid===void 0?{...It,totalPaid:It.hasPaid?200:0,lastPaymentDate:It.datePaid}:It);e(He),r(ve),l(!1)});return()=>re()},[]),he.useEffect(()=>{localStorage.setItem(cv,JSON.stringify({price:b,consumption:E}))},[b,E]);const ln=he.useMemo(()=>{const te=t.reduce((ve,He)=>ve+(He.totalPaid||0),0),re=n.reduce((ve,He)=>ve+He.amount,0),fe=t.filter(ve=>ve.totalPaid>0).length;return{totalPeople:t.length,contributorsCount:fe,zeroContributionCount:t.length-fe,totalCollected:te,totalSpent:re,remainingBalance:te-re}},[t,n]),Tt=te=>{te.preventDefault();const re=wL.VITE_ADMIN_PASSWORD;m===re?(f(!0),p(!1),v(""),P(!1)):P(!0)},H=()=>{f(!1),k(!1)},W=te=>{if(te.preventDefault(),!!u)if(i==="income"){if(!N.trim())return;const re={id:dv(),name:N.trim(),totalPaid:0},fe=[...t,re];e(fe),Qr(fe,n),T("")}else{if(!I.trim()||!D)return;const re={id:dv(),description:I.trim(),amount:Number(D),date:new Date().toISOString()},fe=[...n,re];r(fe),Qr(t,fe),A(""),L("")}},ee=(te,re)=>{if(!u)return;const fe=t.map(ve=>ve.id===te?{...ve,totalPaid:(ve.totalPaid||0)+re,lastPaymentDate:new Date().toISOString()}:ve);e(fe),Qr(fe,n)},Ee=te=>{if(u&&window.confirm("Kii silinecek. Onaylyor musunuz?")){const re=t.filter(fe=>fe.id!==te);e(re),Qr(re,n)}},pe=te=>{if(u&&window.confirm("Harcama kayd silinecek. Onaylyor musunuz?")){const re=n.filter(fe=>fe.id!==te);r(re),Qr(t,re)}},Ce=(te,re)=>{if(!u)return;const fe=t.map(ve=>ve.id===te?{...ve,satisfaction:re}:ve);e(fe),Qr(fe,n)},Wt=()=>{let re="\uFEFF";if(i==="income"){const It=`sim,Toplam denen,Son deme Tarihi,Not
`,hr=t.map(St=>{const pr=St.lastPaymentDate?new Date(St.lastPaymentDate).toLocaleDateString("tr-TR"):"-",Xi=St.satisfaction?St.satisfaction.replace(/"/g,'""'):"-";return`"${St.name}","${St.totalPaid}","${pr}","${Xi}"`}).join(`
`);re+=It+hr}else{const It=`Aklama,Tarih,Tutar
`,hr=n.map(St=>{const pr=new Date(St.date).toLocaleDateString("tr-TR");return`"${St.description}","${pr}","${St.amount}"`}).join(`
`);re+=It+hr}const fe=new Blob([re],{type:"text/csv;charset=utf-8;"}),ve=URL.createObjectURL(fe),He=document.createElement("a");He.setAttribute("href",ve),He.setAttribute("download",`KAHVE_${i==="income"?"GELIR":"GIDER"}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(He),He.click(),document.body.removeChild(He)},Ft=async()=>{We(!0),x(null);const te=t.filter(ve=>ve.totalPaid===0),re=t.filter(ve=>ve.totalPaid>0).sort((ve,He)=>He.totalPaid-ve.totalPaid),fe=await F1(te,re);x(fe),We(!1)};return M.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] text-[#332B26] font-sans selection:bg-[#FAEDCD] selection:text-[#7F5539]",children:[M.jsxs("div",{className:"w-full bg-white/80 backdrop-blur-sm border-b border-theme-100 py-2 px-4 flex justify-between items-center text-[10px] uppercase tracking-widest shadow-sm sticky top-0 z-50",children:[M.jsx("span",{className:"text-theme-400 font-bold",children:"zmir B.B.  Oda 2012"}),M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("div",{className:"flex items-center gap-2",children:s?M.jsxs(M.Fragment,{children:[M.jsx(ju,{size:12,className:"animate-spin text-accent-DEFAULT"})," Ykleniyor"]}):M.jsxs(M.Fragment,{children:[M.jsx(pC,{size:12,className:"text-[#A5A58D]"})," Sistem Aktif"]})}),u?M.jsxs("button",{onClick:H,className:"flex items-center gap-1 text-[#E5989B] hover:text-[#D4A373] transition-colors font-bold",children:[M.jsx(iC,{size:12})," IKI"]}):M.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-1 text-theme-400 hover:text-accent-DEFAULT transition-colors font-bold",children:[M.jsx(Mm,{size:12})," GR"]})]})]}),h&&M.jsx("div",{className:"fixed inset-0 z-[60] bg-black/20 backdrop-blur-sm flex items-center justify-center p-4",children:M.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm border border-theme-100 animate-in zoom-in-95",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsxs("h3",{className:"font-bold text-theme-800 flex items-center gap-2",children:[M.jsx(Mm,{size:18,className:"text-accent-DEFAULT"})," Ynetici Girii"]}),M.jsx("button",{onClick:()=>p(!1),className:"text-theme-400 hover:text-theme-600",children:M.jsx(C0,{size:20})})]}),M.jsxs("form",{onSubmit:Tt,children:[M.jsx("input",{type:"password",value:m,onChange:te=>v(te.target.value),placeholder:"ifre",className:`w-full bg-[#F9F7F5] border ${w?"border-red-300":"border-theme-200"} rounded-xl p-3 mb-4 focus:outline-none focus:border-accent-DEFAULT text-center tracking-widest font-mono text-lg`,autoFocus:!0}),M.jsx("button",{type:"submit",className:"w-full bg-theme-800 text-white py-3 rounded-xl font-bold hover:bg-accent-DEFAULT transition-colors",children:"Giri Yap"})]})]})}),M.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-6 py-10",children:[M.jsxs("header",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-6",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("div",{className:"bg-gradient-to-br from-[#D4A373] to-[#B08968] p-4 rounded-3xl text-white shadow-lg shadow-[#D4A373]/30",children:M.jsx(ua,{size:40,strokeWidth:1.5})}),M.jsxs("div",{children:[M.jsx("h2",{className:"text-xs font-bold text-accent-DEFAULT uppercase tracking-[0.2em] mb-1",children:"Ofis i Dayanma"}),M.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-theme-800 tracking-tight leading-none",children:["Filtre Kahve",M.jsx("br",{}),M.jsx("span",{className:"text-[#B0A090]",children:"Fonu."})]})]})]}),M.jsxs("div",{className:"flex gap-2",children:[u&&M.jsx("button",{onClick:()=>k(!R),className:"px-5 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider bg-white text-theme-500 border border-theme-100 hover:border-accent-DEFAULT hover:text-accent-DEFAULT transition-all flex items-center gap-2",children:M.jsx(Vm,{size:16})}),M.jsxs("button",{onClick:Wt,className:"px-5 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider bg-white text-theme-500 border border-theme-100 hover:border-accent-DEFAULT hover:text-accent-DEFAULT transition-all flex items-center gap-2",children:[M.jsx(nC,{size:16})," Excel"]})]})]}),M.jsx(_C,{}),R&&u&&M.jsxs("div",{className:"mb-8 bg-white p-6 border border-theme-100 shadow-xl rounded-2xl animate-in fade-in slide-in-from-top-2",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-theme-50",children:[M.jsx(Vm,{size:18,className:"text-accent-DEFAULT"}),M.jsx("span",{className:"font-bold uppercase tracking-widest text-theme-500 text-sm",children:"Parametreler"})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[M.jsxs("div",{className:"group",children:[M.jsx("label",{className:"block text-xs font-bold text-theme-400 uppercase tracking-wider mb-2",children:"nerilen deme Tutar (TL)"}),M.jsx("input",{type:"number",value:b,onChange:te=>C(Number(te.target.value)),className:"w-full bg-[#F9F7F5] border border-theme-200 rounded-xl outline-none py-3 px-4 text-lg font-mono text-theme-800"}),M.jsx("p",{className:"text-[10px] text-theme-300 mt-1",children:'Listede "Ekle" butonuna basldnda varsaylan olarak gelecek tutar.'})]}),M.jsxs("div",{className:"group",children:[M.jsx("label",{className:"block text-xs font-bold text-theme-400 uppercase tracking-wider mb-2",children:"Aylk Hedef (Gr)"}),M.jsx("input",{type:"number",value:E,onChange:te=>S(Number(te.target.value)),className:"w-full bg-[#F9F7F5] border border-theme-200 rounded-xl outline-none py-3 px-4 text-lg font-mono text-theme-800"})]})]}),M.jsx("div",{className:"mt-6 flex justify-end",children:M.jsx("button",{onClick:()=>k(!1),className:"bg-theme-800 text-white hover:bg-accent-DEFAULT px-8 py-3 rounded-xl font-bold uppercase tracking-wider transition-colors text-xs shadow-lg shadow-theme-200",children:"Kaydet & Kapat"})})]}),M.jsx(mC,{stats:ln}),M.jsxs("div",{className:"flex gap-4 mb-4 border-b border-theme-200",children:[M.jsx("button",{onClick:()=>o("income"),className:`pb-2 px-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${i==="income"?"border-accent-DEFAULT text-accent-DEFAULT":"border-transparent text-theme-400 hover:text-theme-600"}`,children:"deme Listesi"}),M.jsx("button",{onClick:()=>o("expense"),className:`pb-2 px-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${i==="expense"?"border-[#E5989B] text-[#E5989B]":"border-transparent text-theme-400 hover:text-theme-600"}`,children:"Harcamalar"})]}),u&&M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8",children:[M.jsx("div",{className:"lg:col-span-2",children:M.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[i==="income"?M.jsx("input",{type:"text",value:N,onChange:te=>T(te.target.value),placeholder:"Yeni Kii Ekle...",className:"flex-1 bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-accent-DEFAULT focus:ring-2 focus:ring-accent-light transition-all font-bold text-sm tracking-wide shadow-sm"}):M.jsxs("div",{className:"flex-1 flex gap-2",children:[M.jsx("input",{type:"text",value:I,onChange:te=>A(te.target.value),placeholder:"Ne alnd? (rn: Filtre kad)",className:"flex-[2] bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-[#E5989B] focus:ring-2 focus:ring-[#FFE5E5] transition-all font-bold text-sm tracking-wide shadow-sm"}),M.jsx("input",{type:"number",value:D,onChange:te=>L(te.target.value),placeholder:"Tutar",className:"flex-1 bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-[#E5989B] focus:ring-2 focus:ring-[#FFE5E5] transition-all font-bold text-sm tracking-wide shadow-sm"})]}),M.jsx("button",{type:"submit",className:`text-white px-8 rounded-2xl transition-colors shadow-md shadow-theme-200 ${i==="income"?"bg-theme-800 hover:bg-accent-DEFAULT":"bg-[#E5989B] hover:bg-[#D4A373]"}`,children:M.jsx(aC,{size:24})})]})}),M.jsx("div",{className:"lg:col-span-1",children:M.jsxs("button",{onClick:Ft,disabled:oe||t.length===0,className:"w-full h-full flex items-center justify-between px-6 py-4 bg-white border border-theme-200 rounded-2xl hover:border-accent-DEFAULT hover:shadow-md transition-all group disabled:opacity-50",children:[M.jsxs("div",{className:"text-left",children:[M.jsx("span",{className:"block text-[10px] font-bold uppercase text-theme-400 tracking-widest group-hover:text-accent-DEFAULT transition-colors",children:"Yapay Zeka"}),M.jsx("span",{className:"font-bold text-theme-600 text-sm",children:"Mesaj Olutur"})]}),oe?M.jsx(ju,{className:"animate-spin text-accent-DEFAULT"}):M.jsx(ec,{size:20,className:"text-[#E5989B] group-hover:text-[#D4A373]"})]})})]}),!u&&M.jsx("div",{className:"mb-6 flex justify-end",children:M.jsxs("button",{onClick:Ft,disabled:oe||t.length===0,className:"flex items-center gap-2 px-4 py-2 bg-white border border-theme-200 rounded-xl hover:border-accent-DEFAULT transition-all group disabled:opacity-50 text-xs font-bold text-theme-500 uppercase tracking-wider",children:[oe?M.jsx(ju,{size:16,className:"animate-spin text-accent-DEFAULT"}):M.jsx(ec,{size:16,className:"text-[#E5989B]"}),oe?"Yazyor...":"Yapay Zeka Mesaj"]})}),V&&M.jsxs("div",{className:"mb-8 bg-[#FFF0F3] text-[#6D3B3E] p-8 rounded-2xl border border-[#FFCCD5] relative overflow-hidden animate-in zoom-in-95",children:[M.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:M.jsx(ec,{size:120})}),M.jsxs("p",{className:"font-medium text-xl font-serif italic relative z-10 leading-relaxed",children:['"',V,'"']})]}),i==="income"?M.jsx(yC,{people:t,onAddPayment:ee,onDelete:Ee,onRate:Ce,defaultAmount:b,isAdmin:u}):M.jsx(vC,{expenses:n,onDelete:pe,isAdmin:u}),M.jsxs("footer",{className:"mt-16 border-t border-theme-200 pt-8 text-center",children:[M.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-white rounded-full mb-4 shadow-sm border border-theme-50",children:M.jsx(ua,{size:20,className:"text-accent-DEFAULT"})}),M.jsx("p",{className:"text-xs font-bold text-theme-400 uppercase tracking-[0.2em]",children:"zmir Bykehir Belediyesi  Oda 2012"}),M.jsx("p",{className:"text-[10px] text-theme-300 mt-2",children:"Afiyet Olsun."})]})]})]})},YT=document.getElementById("root");if(!YT)throw new Error("Could not find root element to mount to");const AL=hc.createRoot(YT);AL.render(M.jsx(GI.StrictMode,{children:M.jsx(CL,{})}));
