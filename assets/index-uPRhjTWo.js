(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function SI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uv={exports:{}},Sa={},cv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),wI=Symbol.for("react.portal"),CI=Symbol.for("react.fragment"),AI=Symbol.for("react.strict_mode"),RI=Symbol.for("react.profiler"),PI=Symbol.for("react.provider"),NI=Symbol.for("react.context"),xI=Symbol.for("react.forward_ref"),kI=Symbol.for("react.suspense"),MI=Symbol.for("react.memo"),DI=Symbol.for("react.lazy"),_p=Symbol.iterator;function VI(t){return t===null||typeof t!="object"?null:(t=_p&&t[_p]||t["@@iterator"],typeof t=="function"?t:null)}var dv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fv=Object.assign,hv={};function Di(t,e,n){this.props=t,this.context=e,this.refs=hv,this.updater=n||dv}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pv(){}pv.prototype=Di.prototype;function Ud(t,e,n){this.props=t,this.context=e,this.refs=hv,this.updater=n||dv}var bd=Ud.prototype=new pv;bd.constructor=Ud;fv(bd,Di.prototype);bd.isPureReactComponent=!0;var Ep=Array.isArray,mv=Object.prototype.hasOwnProperty,Od={current:null},gv={key:!0,ref:!0,__self:!0,__source:!0};function yv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)mv.call(e,r)&&!gv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:fs,type:t,key:o,ref:s,props:i,_owner:Od.current}}function LI(t,e){return{$$typeof:fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bd(t){return typeof t=="object"&&t!==null&&t.$$typeof===fs}function FI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tp=/\/+/g;function Cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FI(""+t.key):e.toString(36)}function hl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case fs:case wI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Cu(s,0):r,Ep(i)?(n="",t!=null&&(n=t.replace(Tp,"$&/")+"/"),hl(i,e,n,"",function(f){return f})):i!=null&&(Bd(i)&&(i=LI(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Tp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Cu(o,l);s+=hl(o,e,n,u,i)}else if(u=VI(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Cu(o,l++),s+=hl(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Gs(t,e,n){if(t==null)return t;var r=[],i=0;return hl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function UI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},pl={transition:null},bI={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:pl,ReactCurrentOwner:Od};function vv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Gs,forEach:function(t,e,n){Gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gs(t,function(){e++}),e},toArray:function(t){return Gs(t,function(e){return e})||[]},only:function(t){if(!Bd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Di;re.Fragment=CI;re.Profiler=RI;re.PureComponent=Ud;re.StrictMode=AI;re.Suspense=kI;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;re.act=vv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Od.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)mv.call(e,u)&&!gv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:fs,type:t.type,key:i,ref:o,props:r,_owner:s}};re.createContext=function(t){return t={$$typeof:NI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PI,_context:t},t.Consumer=t};re.createElement=yv;re.createFactory=function(t){var e=yv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:xI,render:t}};re.isValidElement=Bd;re.lazy=function(t){return{$$typeof:DI,_payload:{_status:-1,_result:t},_init:UI}};re.memo=function(t,e){return{$$typeof:MI,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};re.unstable_act=vv;re.useCallback=function(t,e){return gt.current.useCallback(t,e)};re.useContext=function(t){return gt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};re.useEffect=function(t,e){return gt.current.useEffect(t,e)};re.useId=function(){return gt.current.useId()};re.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return gt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};re.useRef=function(t){return gt.current.useRef(t)};re.useState=function(t){return gt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return gt.current.useTransition()};re.version="18.3.1";cv.exports=re;var Te=cv.exports;const OI=SI(Te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=Te,GI=Symbol.for("react.element"),HI=Symbol.for("react.fragment"),qI=Object.prototype.hasOwnProperty,zI=BI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$I={key:!0,ref:!0,__self:!0,__source:!0};function _v(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)qI.call(e,r)&&!$I.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:GI,type:t,key:o,ref:s,props:i,_owner:zI.current}}Sa.Fragment=HI;Sa.jsx=_v;Sa.jsxs=_v;uv.exports=Sa;var F=uv.exports,uc={},Ev={exports:{}},Nt={},Tv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,K){var Q=O.length;O.push(K);e:for(;0<Q;){var ge=Q-1>>>1,he=O[ge];if(0<i(he,K))O[ge]=K,O[Q]=he,Q=ge;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var K=O[0],Q=O.pop();if(Q!==K){O[0]=Q;e:for(var ge=0,he=O.length,se=he>>>1;ge<se;){var St=2*(ge+1)-1,Gt=O[St],Ht=St+1,qt=O[Ht];if(0>i(Gt,Q))Ht<he&&0>i(qt,Gt)?(O[ge]=qt,O[Ht]=Q,ge=Ht):(O[ge]=Gt,O[St]=Q,ge=St);else if(Ht<he&&0>i(qt,Q))O[ge]=qt,O[Ht]=Q,ge=Ht;else break e}}return K}function i(O,K){var Q=O.sortIndex-K.sortIndex;return Q!==0?Q:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],f=[],h=1,p=null,m=3,v=!1,S=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=O)r(f),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(f)}}function M(O){if(P=!1,A(O),!S)if(n(u)!==null)S=!0,te(V);else{var K=n(f);K!==null&&ne(M,K.startTime-O)}}function V(O,K){S=!1,P&&(P=!1,I(E),E=-1),v=!0;var Q=m;try{for(A(K),p=n(u);p!==null&&(!(p.expirationTime>K)||O&&!k());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,m=p.priorityLevel;var he=ge(p.expirationTime<=K);K=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(u)&&r(u),A(K)}else r(u);p=n(u)}if(p!==null)var se=!0;else{var St=n(f);St!==null&&ne(M,St.startTime-K),se=!1}return se}finally{p=null,m=Q,v=!1}}var b=!1,C=null,E=-1,w=5,R=-1;function k(){return!(t.unstable_now()-R<w)}function D(){if(C!==null){var O=t.unstable_now();R=O;var K=!0;try{K=C(!0,O)}finally{K?N():(b=!1,C=null)}}else b=!1}var N;if(typeof T=="function")N=function(){T(D)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ze=fe.port2;fe.port1.onmessage=D,N=function(){Ze.postMessage(null)}}else N=function(){x(D,0)};function te(O){C=O,b||(b=!0,N())}function ne(O,K){E=x(function(){O(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){S||v||(S=!0,te(V))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Q=m;m=K;try{return O()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=m;m=O;try{return K()}finally{m=Q}},t.unstable_scheduleCallback=function(O,K,Q){var ge=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ge+Q:ge):Q=ge,O){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,O={id:h++,callback:K,priorityLevel:O,startTime:Q,expirationTime:he,sortIndex:-1},Q>ge?(O.sortIndex=Q,e(f,O),n(u)===null&&O===n(f)&&(P?(I(E),E=-1):P=!0,ne(M,Q-ge))):(O.sortIndex=he,e(u,O),S||v||(S=!0,te(V))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var K=m;return function(){var Q=m;m=K;try{return O.apply(this,arguments)}finally{m=Q}}}})(Iv);Tv.exports=Iv;var KI=Tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI=Te,Pt=KI;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sv=new Set,Uo={};function Mr(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(Uo[t]=e,t=0;t<e.length;t++)Sv.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,JI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ip={},Sp={};function YI(t){return cc.call(Sp,t)?!0:cc.call(Ip,t)?!1:JI.test(t)?Sp[t]=!0:(Ip[t]=!0,!1)}function QI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XI(t,e,n,r){if(e===null||typeof e>"u"||QI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gd=/[\-:]([a-z])/g;function Hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gd,Hd);Qe[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gd,Hd);Qe[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gd,Hd);Qe[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qd(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XI(e,n,i,r)&&(n=null),r||i===null?YI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=WI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),zd=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),wv=Symbol.for("react.provider"),Cv=Symbol.for("react.context"),$d=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Kd=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Av=Symbol.for("react.offscreen"),wp=Symbol.iterator;function ro(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Au;function mo(t){if(Au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Au=e&&e[1]||""}return`
`+Au+t}var Ru=!1;function Pu(t,e){if(!t||Ru)return"";Ru=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Ru=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mo(t):""}function ZI(t){switch(t.tag){case 5:return mo(t.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return t=Pu(t.type,!1),t;case 11:return t=Pu(t.type.render,!1),t;case 1:return t=Pu(t.type,!0),t;default:return""}}function pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Jr:return"Portal";case dc:return"Profiler";case zd:return"StrictMode";case fc:return"Suspense";case hc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cv:return(t.displayName||"Context")+".Consumer";case wv:return(t._context.displayName||"Context")+".Provider";case $d:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kd:return e=t.displayName||null,e!==null?e:pc(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return pc(t(e))}catch{}}return null}function jI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(e);case 8:return e===zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eS(t){var e=Rv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qs(t){t._valueTracker||(t._valueTracker=eS(t))}function Pv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mc(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nv(t,e){e=e.checked,e!=null&&qd(t,"checked",e,!1)}function gc(t,e){Nv(t,e);var n=jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&yc(t,e.type,jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ap(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yc(t,e,n){(e!=="number"||Dl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var go=Array.isArray;function ai(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(go(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jn(n)}}function xv(t,e){var n=jn(e.value),r=jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zs,Mv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tS=["Webkit","ms","Moz","O"];Object.keys(wo).forEach(function(t){tS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wo[e]=wo[t]})});function Dv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wo.hasOwnProperty(t)&&wo[t]?(""+e).trim():e+"px"}function Vv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nS=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ec(t,e){if(e){if(nS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=null;function Wd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sc=null,ui=null,ci=null;function Np(t){if(t=ms(t)){if(typeof Sc!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Pa(e),Sc(t.stateNode,t.type,e))}}function Lv(t){ui?ci?ci.push(t):ci=[t]:ui=t}function Fv(){if(ui){var t=ui,e=ci;if(ci=ui=null,Np(t),e)for(t=0;t<e.length;t++)Np(e[t])}}function Uv(t,e){return t(e)}function bv(){}var Nu=!1;function Ov(t,e,n){if(Nu)return t(e,n);Nu=!0;try{return Uv(t,e,n)}finally{Nu=!1,(ui!==null||ci!==null)&&(bv(),Fv())}}function Oo(t,e){var n=t.stateNode;if(n===null)return null;var r=Pa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var wc=!1;if(En)try{var io={};Object.defineProperty(io,"passive",{get:function(){wc=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{wc=!1}function rS(t,e,n,r,i,o,s,l,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var Co=!1,Vl=null,Ll=!1,Cc=null,iS={onError:function(t){Co=!0,Vl=t}};function oS(t,e,n,r,i,o,s,l,u){Co=!1,Vl=null,rS.apply(iS,arguments)}function sS(t,e,n,r,i,o,s,l,u){if(oS.apply(this,arguments),Co){if(Co){var f=Vl;Co=!1,Vl=null}else throw Error(H(198));Ll||(Ll=!0,Cc=f)}}function Dr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xp(t){if(Dr(t)!==t)throw Error(H(188))}function lS(t){var e=t.alternate;if(!e){if(e=Dr(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return xp(i),t;if(o===r)return xp(i),e;o=o.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Gv(t){return t=lS(t),t!==null?Hv(t):null}function Hv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hv(t);if(e!==null)return e;t=t.sibling}return null}var qv=Pt.unstable_scheduleCallback,kp=Pt.unstable_cancelCallback,aS=Pt.unstable_shouldYield,uS=Pt.unstable_requestPaint,Me=Pt.unstable_now,cS=Pt.unstable_getCurrentPriorityLevel,Jd=Pt.unstable_ImmediatePriority,zv=Pt.unstable_UserBlockingPriority,Fl=Pt.unstable_NormalPriority,dS=Pt.unstable_LowPriority,$v=Pt.unstable_IdlePriority,wa=null,sn=null;function fS(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(wa,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:mS,hS=Math.log,pS=Math.LN2;function mS(t){return t>>>=0,t===0?32:31-(hS(t)/pS|0)|0}var $s=64,Ks=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=yo(l):(o&=s,o!==0&&(r=yo(o)))}else s=n&~i,s!==0?r=yo(s):o!==0&&(r=yo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qt(e),i=1<<n,r|=t[n],e&=~i;return r}function gS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Qt(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=gS(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Ac(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kv(){var t=$s;return $s<<=1,!($s&4194240)&&($s=64),t}function xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function vS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Yd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function Wv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jv,Qd,Yv,Qv,Xv,Rc=!1,Ws=[],qn=null,zn=null,$n=null,Bo=new Map,Go=new Map,Un=[],_S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mp(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(e.pointerId)}}function oo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ms(e),e!==null&&Qd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ES(t,e,n,r,i){switch(e){case"focusin":return qn=oo(qn,t,e,n,r,i),!0;case"dragenter":return zn=oo(zn,t,e,n,r,i),!0;case"mouseover":return $n=oo($n,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Bo.set(o,oo(Bo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Go.set(o,oo(Go.get(o)||null,t,e,n,r,i)),!0}return!1}function Zv(t){var e=gr(t.target);if(e!==null){var n=Dr(e);if(n!==null){if(e=n.tag,e===13){if(e=Bv(n),e!==null){t.blockedOn=e,Xv(t.priority,function(){Yv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ic=r,n.target.dispatchEvent(r),Ic=null}else return e=ms(n),e!==null&&Qd(e),t.blockedOn=n,!1;e.shift()}return!0}function Dp(t,e,n){ml(t)&&n.delete(e)}function TS(){Rc=!1,qn!==null&&ml(qn)&&(qn=null),zn!==null&&ml(zn)&&(zn=null),$n!==null&&ml($n)&&($n=null),Bo.forEach(Dp),Go.forEach(Dp)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,Rc||(Rc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,TS)))}function Ho(t){function e(i){return so(i,t)}if(0<Ws.length){so(Ws[0],t);for(var n=1;n<Ws.length;n++){var r=Ws[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&so(qn,t),zn!==null&&so(zn,t),$n!==null&&so($n,t),Bo.forEach(e),Go.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Zv(n),n.blockedOn===null&&Un.shift()}var di=Pn.ReactCurrentBatchConfig,bl=!0;function IS(t,e,n,r){var i=pe,o=di.transition;di.transition=null;try{pe=1,Xd(t,e,n,r)}finally{pe=i,di.transition=o}}function SS(t,e,n,r){var i=pe,o=di.transition;di.transition=null;try{pe=4,Xd(t,e,n,r)}finally{pe=i,di.transition=o}}function Xd(t,e,n,r){if(bl){var i=Pc(t,e,n,r);if(i===null)Bu(t,e,r,Ol,n),Mp(t,r);else if(ES(i,t,e,n,r))r.stopPropagation();else if(Mp(t,r),e&4&&-1<_S.indexOf(t)){for(;i!==null;){var o=ms(i);if(o!==null&&Jv(o),o=Pc(t,e,n,r),o===null&&Bu(t,e,r,Ol,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Bu(t,e,r,null,n)}}var Ol=null;function Pc(t,e,n,r){if(Ol=null,t=Wd(r),t=gr(t),t!==null)if(e=Dr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ol=t,null}function jv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cS()){case Jd:return 1;case zv:return 4;case Fl:case dS:return 16;case $v:return 536870912;default:return 16}default:return 16}}var On=null,Zd=null,gl=null;function e_(){if(gl)return gl;var t,e=Zd,n=e.length,r,i="value"in On?On.value:On.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return gl=i.slice(t,1<r?1-r:void 0)}function yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Js(){return!0}function Vp(){return!1}function xt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Js:Vp,this.isPropagationStopped=Vp,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=xt(Vi),ps=Ae({},Vi,{view:0,detail:0}),wS=xt(ps),ku,Mu,lo,Ca=Ae({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(ku=t.screenX-lo.screenX,Mu=t.screenY-lo.screenY):Mu=ku=0,lo=t),ku)},movementY:function(t){return"movementY"in t?t.movementY:Mu}}),Lp=xt(Ca),CS=Ae({},Ca,{dataTransfer:0}),AS=xt(CS),RS=Ae({},ps,{relatedTarget:0}),Du=xt(RS),PS=Ae({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),NS=xt(PS),xS=Ae({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kS=xt(xS),MS=Ae({},Vi,{data:0}),Fp=xt(MS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LS[t])?!!e[t]:!1}function ef(){return FS}var US=Ae({},ps,{key:function(t){if(t.key){var e=DS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(t){return t.type==="keypress"?yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bS=xt(US),OS=Ae({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=xt(OS),BS=Ae({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),GS=xt(BS),HS=Ae({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qS=xt(HS),zS=Ae({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=xt(zS),KS=[9,13,27,32],tf=En&&"CompositionEvent"in window,Ao=null;En&&"documentMode"in document&&(Ao=document.documentMode);var WS=En&&"TextEvent"in window&&!Ao,t_=En&&(!tf||Ao&&8<Ao&&11>=Ao),bp=" ",Op=!1;function n_(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function JS(t,e){switch(t){case"compositionend":return r_(e);case"keypress":return e.which!==32?null:(Op=!0,bp);case"textInput":return t=e.data,t===bp&&Op?null:t;default:return null}}function YS(t,e){if(Qr)return t==="compositionend"||!tf&&n_(t,e)?(t=e_(),gl=Zd=On=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return t_&&e.locale!=="ko"?null:e.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QS[t.type]:e==="textarea"}function i_(t,e,n,r){Lv(r),e=Bl(e,"onChange"),0<e.length&&(n=new jd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,qo=null;function XS(t){m_(t,0)}function Aa(t){var e=jr(t);if(Pv(e))return t}function ZS(t,e){if(t==="change")return e}var o_=!1;if(En){var Vu;if(En){var Lu="oninput"in document;if(!Lu){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),Lu=typeof Gp.oninput=="function"}Vu=Lu}else Vu=!1;o_=Vu&&(!document.documentMode||9<document.documentMode)}function Hp(){Ro&&(Ro.detachEvent("onpropertychange",s_),qo=Ro=null)}function s_(t){if(t.propertyName==="value"&&Aa(qo)){var e=[];i_(e,qo,t,Wd(t)),Ov(XS,e)}}function jS(t,e,n){t==="focusin"?(Hp(),Ro=e,qo=n,Ro.attachEvent("onpropertychange",s_)):t==="focusout"&&Hp()}function ew(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Aa(qo)}function tw(t,e){if(t==="click")return Aa(e)}function nw(t,e){if(t==="input"||t==="change")return Aa(e)}function rw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:rw;function zo(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cc.call(e,i)||!en(t[i],e[i]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,e){var n=qp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qp(n)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a_(){for(var t=window,e=Dl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dl(t.document)}return e}function nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iw(t){var e=a_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&l_(n.ownerDocument.documentElement,n)){if(r!==null&&nf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=zp(n,o);var s=zp(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ow=En&&"documentMode"in document&&11>=document.documentMode,Xr=null,Nc=null,Po=null,xc=!1;function $p(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xc||Xr==null||Xr!==Dl(r)||(r=Xr,"selectionStart"in r&&nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Po&&zo(Po,r)||(Po=r,r=Bl(Nc,"onSelect"),0<r.length&&(e=new jd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xr)))}function Ys(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zr={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Fu={},u_={};En&&(u_=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Ra(t){if(Fu[t])return Fu[t];if(!Zr[t])return t;var e=Zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in u_)return Fu[t]=e[n];return t}var c_=Ra("animationend"),d_=Ra("animationiteration"),f_=Ra("animationstart"),h_=Ra("transitionend"),p_=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(t,e){p_.set(t,e),Mr(e,[t])}for(var Uu=0;Uu<Kp.length;Uu++){var bu=Kp[Uu],sw=bu.toLowerCase(),lw=bu[0].toUpperCase()+bu.slice(1);ir(sw,"on"+lw)}ir(c_,"onAnimationEnd");ir(d_,"onAnimationIteration");ir(f_,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(h_,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function Wp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sS(r,e,void 0,t),t.currentTarget=null}function m_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Wp(i,l,f),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Wp(i,l,f),o=u}}}if(Ll)throw t=Cc,Ll=!1,Cc=null,t}function Ee(t,e){var n=e[Lc];n===void 0&&(n=e[Lc]=new Set);var r=t+"__bubble";n.has(r)||(g_(e,t,2,!1),n.add(r))}function Ou(t,e,n){var r=0;e&&(r|=4),g_(n,t,r,e)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[Qs]){t[Qs]=!0,Sv.forEach(function(n){n!=="selectionchange"&&(aw.has(n)||Ou(n,!1,t),Ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qs]||(e[Qs]=!0,Ou("selectionchange",!1,e))}}function g_(t,e,n,r){switch(jv(e)){case 1:var i=IS;break;case 4:i=SS;break;default:i=Xd}n=i.bind(null,e,n,t),i=void 0,!wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Bu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=gr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Ov(function(){var f=o,h=Wd(n),p=[];e:{var m=p_.get(t);if(m!==void 0){var v=jd,S=t;switch(t){case"keypress":if(yl(n)===0)break e;case"keydown":case"keyup":v=bS;break;case"focusin":S="focus",v=Du;break;case"focusout":S="blur",v=Du;break;case"beforeblur":case"afterblur":v=Du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=AS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=GS;break;case c_:case d_:case f_:v=NS;break;case h_:v=qS;break;case"scroll":v=wS;break;case"wheel":v=$S;break;case"copy":case"cut":case"paste":v=kS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Up}var P=(e&4)!==0,x=!P&&t==="scroll",I=P?m!==null?m+"Capture":null:m;P=[];for(var T=f,A;T!==null;){A=T;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,I!==null&&(M=Oo(T,I),M!=null&&P.push(Ko(T,M,A)))),x)break;T=T.return}0<P.length&&(m=new v(m,S,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Ic&&(S=n.relatedTarget||n.fromElement)&&(gr(S)||S[Tn]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(S=n.relatedTarget||n.toElement,v=f,S=S?gr(S):null,S!==null&&(x=Dr(S),S!==x||S.tag!==5&&S.tag!==6)&&(S=null)):(v=null,S=f),v!==S)){if(P=Lp,M="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=Up,M="onPointerLeave",I="onPointerEnter",T="pointer"),x=v==null?m:jr(v),A=S==null?m:jr(S),m=new P(M,T+"leave",v,n,h),m.target=x,m.relatedTarget=A,M=null,gr(h)===f&&(P=new P(I,T+"enter",S,n,h),P.target=A,P.relatedTarget=x,M=P),x=M,v&&S)t:{for(P=v,I=S,T=0,A=P;A;A=Gr(A))T++;for(A=0,M=I;M;M=Gr(M))A++;for(;0<T-A;)P=Gr(P),T--;for(;0<A-T;)I=Gr(I),A--;for(;T--;){if(P===I||I!==null&&P===I.alternate)break t;P=Gr(P),I=Gr(I)}P=null}else P=null;v!==null&&Jp(p,m,v,P,!1),S!==null&&x!==null&&Jp(p,x,S,P,!0)}}e:{if(m=f?jr(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var V=ZS;else if(Bp(m))if(o_)V=nw;else{V=ew;var b=jS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=tw);if(V&&(V=V(t,f))){i_(p,V,n,h);break e}b&&b(t,m,f),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&yc(m,"number",m.value)}switch(b=f?jr(f):window,t){case"focusin":(Bp(b)||b.contentEditable==="true")&&(Xr=b,Nc=f,Po=null);break;case"focusout":Po=Nc=Xr=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,$p(p,n,h);break;case"selectionchange":if(ow)break;case"keydown":case"keyup":$p(p,n,h)}var C;if(tf)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qr?n_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(t_&&n.locale!=="ko"&&(Qr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qr&&(C=e_()):(On=h,Zd="value"in On?On.value:On.textContent,Qr=!0)),b=Bl(f,E),0<b.length&&(E=new Fp(E,t,null,n,h),p.push({event:E,listeners:b}),C?E.data=C:(C=r_(n),C!==null&&(E.data=C)))),(C=WS?JS(t,n):YS(t,n))&&(f=Bl(f,"onBeforeInput"),0<f.length&&(h=new Fp("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=C))}m_(p,e)})}function Ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Oo(t,n),o!=null&&r.unshift(Ko(t,o,i)),o=Oo(t,e),o!=null&&r.push(Ko(t,o,i))),t=t.return}return r}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Oo(n,o),u!=null&&s.unshift(Ko(n,u,l))):i||(u=Oo(n,o),u!=null&&s.push(Ko(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var uw=/\r\n?/g,cw=/\u0000|\uFFFD/g;function Yp(t){return(typeof t=="string"?t:""+t).replace(uw,`
`).replace(cw,"")}function Xs(t,e,n){if(e=Yp(e),Yp(t)!==e&&n)throw Error(H(425))}function Gl(){}var kc=null,Mc=null;function Dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vc=typeof setTimeout=="function"?setTimeout:void 0,dw=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,fw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(t){return Qp.resolve(null).then(t).catch(hw)}:Vc;function hw(t){setTimeout(function(){throw t})}function Gu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ho(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Li=Math.random().toString(36).slice(2),on="__reactFiber$"+Li,Wo="__reactProps$"+Li,Tn="__reactContainer$"+Li,Lc="__reactEvents$"+Li,pw="__reactListeners$"+Li,mw="__reactHandles$"+Li;function gr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xp(t);t!==null;){if(n=t[on])return n;t=Xp(t)}return e}t=n,n=t.parentNode}return null}function ms(t){return t=t[on]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Pa(t){return t[Wo]||null}var Fc=[],ei=-1;function or(t){return{current:t}}function Ie(t){0>ei||(t.current=Fc[ei],Fc[ei]=null,ei--)}function ve(t,e){ei++,Fc[ei]=t.current,t.current=e}var er={},ut=or(er),Et=or(!1),wr=er;function Ei(t,e){var n=t.type.contextTypes;if(!n)return er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function Hl(){Ie(Et),Ie(ut)}function Zp(t,e,n){if(ut.current!==er)throw Error(H(168));ve(ut,e),ve(Et,n)}function y_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,jI(t)||"Unknown",i));return Ae({},n,r)}function ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||er,wr=ut.current,ve(ut,t),ve(Et,Et.current),!0}function jp(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=y_(t,e,wr),r.__reactInternalMemoizedMergedChildContext=t,Ie(Et),Ie(ut),ve(ut,t)):Ie(Et),ve(Et,n)}var mn=null,Na=!1,Hu=!1;function v_(t){mn===null?mn=[t]:mn.push(t)}function gw(t){Na=!0,v_(t)}function sr(){if(!Hu&&mn!==null){Hu=!0;var t=0,e=pe;try{var n=mn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,Na=!1}catch(i){throw mn!==null&&(mn=mn.slice(t+1)),qv(Jd,sr),i}finally{pe=e,Hu=!1}}return null}var ti=[],ni=0,zl=null,$l=0,kt=[],Mt=0,Cr=null,gn=1,yn="";function fr(t,e){ti[ni++]=$l,ti[ni++]=zl,zl=t,$l=e}function __(t,e,n){kt[Mt++]=gn,kt[Mt++]=yn,kt[Mt++]=Cr,Cr=t;var r=gn;t=yn;var i=32-Qt(r)-1;r&=~(1<<i),n+=1;var o=32-Qt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,gn=1<<32-Qt(e)+i|n<<i|r,yn=o+t}else gn=1<<o|n<<i|r,yn=t}function rf(t){t.return!==null&&(fr(t,1),__(t,1,0))}function of(t){for(;t===zl;)zl=ti[--ni],ti[ni]=null,$l=ti[--ni],ti[ni]=null;for(;t===Cr;)Cr=kt[--Mt],kt[Mt]=null,yn=kt[--Mt],kt[Mt]=null,gn=kt[--Mt],kt[Mt]=null}var Rt=null,At=null,Se=!1,Jt=null;function E_(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function em(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,At=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,At=null,!0):!1;default:return!1}}function Uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bc(t){if(Se){var e=At;if(e){var n=e;if(!em(t,e)){if(Uc(t))throw Error(H(418));e=Kn(n.nextSibling);var r=Rt;e&&em(t,e)?E_(r,n):(t.flags=t.flags&-4097|2,Se=!1,Rt=t)}}else{if(Uc(t))throw Error(H(418));t.flags=t.flags&-4097|2,Se=!1,Rt=t}}}function tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Zs(t){if(t!==Rt)return!1;if(!Se)return tm(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dc(t.type,t.memoizedProps)),e&&(e=At)){if(Uc(t))throw T_(),Error(H(418));for(;e;)E_(t,e),e=Kn(e.nextSibling)}if(tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=Rt?Kn(t.stateNode.nextSibling):null;return!0}function T_(){for(var t=At;t;)t=Kn(t.nextSibling)}function Ti(){At=Rt=null,Se=!1}function sf(t){Jt===null?Jt=[t]:Jt.push(t)}var yw=Pn.ReactCurrentBatchConfig;function ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function js(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nm(t){var e=t._init;return e(t._payload)}function I_(t){function e(I,T){if(t){var A=I.deletions;A===null?(I.deletions=[T],I.flags|=16):A.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function r(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function i(I,T){return I=Qn(I,T),I.index=0,I.sibling=null,I}function o(I,T,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<T?(I.flags|=2,T):A):(I.flags|=2,T)):(I.flags|=1048576,T)}function s(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,T,A,M){return T===null||T.tag!==6?(T=Yu(A,I.mode,M),T.return=I,T):(T=i(T,A),T.return=I,T)}function u(I,T,A,M){var V=A.type;return V===Yr?h(I,T,A.props.children,M,A.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ln&&nm(V)===T.type)?(M=i(T,A.props),M.ref=ao(I,T,A),M.return=I,M):(M=wl(A.type,A.key,A.props,null,I.mode,M),M.ref=ao(I,T,A),M.return=I,M)}function f(I,T,A,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Qu(A,I.mode,M),T.return=I,T):(T=i(T,A.children||[]),T.return=I,T)}function h(I,T,A,M,V){return T===null||T.tag!==7?(T=Tr(A,I.mode,M,V),T.return=I,T):(T=i(T,A),T.return=I,T)}function p(I,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Yu(""+T,I.mode,A),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hs:return A=wl(T.type,T.key,T.props,null,I.mode,A),A.ref=ao(I,null,T),A.return=I,A;case Jr:return T=Qu(T,I.mode,A),T.return=I,T;case Ln:var M=T._init;return p(I,M(T._payload),A)}if(go(T)||ro(T))return T=Tr(T,I.mode,A,null),T.return=I,T;js(I,T)}return null}function m(I,T,A,M){var V=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return V!==null?null:l(I,T,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Hs:return A.key===V?u(I,T,A,M):null;case Jr:return A.key===V?f(I,T,A,M):null;case Ln:return V=A._init,m(I,T,V(A._payload),M)}if(go(A)||ro(A))return V!==null?null:h(I,T,A,M,null);js(I,A)}return null}function v(I,T,A,M,V){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(A)||null,l(T,I,""+M,V);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Hs:return I=I.get(M.key===null?A:M.key)||null,u(T,I,M,V);case Jr:return I=I.get(M.key===null?A:M.key)||null,f(T,I,M,V);case Ln:var b=M._init;return v(I,T,A,b(M._payload),V)}if(go(M)||ro(M))return I=I.get(A)||null,h(T,I,M,V,null);js(T,M)}return null}function S(I,T,A,M){for(var V=null,b=null,C=T,E=T=0,w=null;C!==null&&E<A.length;E++){C.index>E?(w=C,C=null):w=C.sibling;var R=m(I,C,A[E],M);if(R===null){C===null&&(C=w);break}t&&C&&R.alternate===null&&e(I,C),T=o(R,T,E),b===null?V=R:b.sibling=R,b=R,C=w}if(E===A.length)return n(I,C),Se&&fr(I,E),V;if(C===null){for(;E<A.length;E++)C=p(I,A[E],M),C!==null&&(T=o(C,T,E),b===null?V=C:b.sibling=C,b=C);return Se&&fr(I,E),V}for(C=r(I,C);E<A.length;E++)w=v(C,I,E,A[E],M),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?E:w.key),T=o(w,T,E),b===null?V=w:b.sibling=w,b=w);return t&&C.forEach(function(k){return e(I,k)}),Se&&fr(I,E),V}function P(I,T,A,M){var V=ro(A);if(typeof V!="function")throw Error(H(150));if(A=V.call(A),A==null)throw Error(H(151));for(var b=V=null,C=T,E=T=0,w=null,R=A.next();C!==null&&!R.done;E++,R=A.next()){C.index>E?(w=C,C=null):w=C.sibling;var k=m(I,C,R.value,M);if(k===null){C===null&&(C=w);break}t&&C&&k.alternate===null&&e(I,C),T=o(k,T,E),b===null?V=k:b.sibling=k,b=k,C=w}if(R.done)return n(I,C),Se&&fr(I,E),V;if(C===null){for(;!R.done;E++,R=A.next())R=p(I,R.value,M),R!==null&&(T=o(R,T,E),b===null?V=R:b.sibling=R,b=R);return Se&&fr(I,E),V}for(C=r(I,C);!R.done;E++,R=A.next())R=v(C,I,E,R.value,M),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),T=o(R,T,E),b===null?V=R:b.sibling=R,b=R);return t&&C.forEach(function(D){return e(I,D)}),Se&&fr(I,E),V}function x(I,T,A,M){if(typeof A=="object"&&A!==null&&A.type===Yr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Hs:e:{for(var V=A.key,b=T;b!==null;){if(b.key===V){if(V=A.type,V===Yr){if(b.tag===7){n(I,b.sibling),T=i(b,A.props.children),T.return=I,I=T;break e}}else if(b.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ln&&nm(V)===b.type){n(I,b.sibling),T=i(b,A.props),T.ref=ao(I,b,A),T.return=I,I=T;break e}n(I,b);break}else e(I,b);b=b.sibling}A.type===Yr?(T=Tr(A.props.children,I.mode,M,A.key),T.return=I,I=T):(M=wl(A.type,A.key,A.props,null,I.mode,M),M.ref=ao(I,T,A),M.return=I,I=M)}return s(I);case Jr:e:{for(b=A.key;T!==null;){if(T.key===b)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){n(I,T.sibling),T=i(T,A.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=Qu(A,I.mode,M),T.return=I,I=T}return s(I);case Ln:return b=A._init,x(I,T,b(A._payload),M)}if(go(A))return S(I,T,A,M);if(ro(A))return P(I,T,A,M);js(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(n(I,T.sibling),T=i(T,A),T.return=I,I=T):(n(I,T),T=Yu(A,I.mode,M),T.return=I,I=T),s(I)):n(I,T)}return x}var Ii=I_(!0),S_=I_(!1),Kl=or(null),Wl=null,ri=null,lf=null;function af(){lf=ri=Wl=null}function uf(t){var e=Kl.current;Ie(Kl),t._currentValue=e}function Oc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){Wl=t,lf=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},ri===null){if(Wl===null)throw Error(H(308));ri=t,Wl.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return e}var yr=null;function cf(t){yr===null?yr=[t]:yr.push(t)}function w_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cf(e)):(n.next=i.next,i.next=n),e.interleaved=n,In(t,r)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,In(t,n)}return i=r.interleaved,i===null?(e.next=e,cf(r)):(e.next=i.next,i.next=e),r.interleaved=e,In(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}function rm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jl(t,e,n,r){var i=t.updateQueue;Fn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,s===null?o=f:s.next=f,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=f=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,P=l;switch(m=e,v=n,P.tag){case 1:if(S=P.payload,typeof S=="function"){p=S.call(v,p,m);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=P.payload,m=typeof S=="function"?S.call(v,p,m):S,m==null)break e;p=Ae({},p,m);break e;case 2:Fn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=v,u=p):h=h.next=v,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Rr|=s,t.lanes=s,t.memoizedState=p}}function im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var gs={},ln=or(gs),Jo=or(gs),Yo=or(gs);function vr(t){if(t===gs)throw Error(H(174));return t}function ff(t,e){switch(ve(Yo,e),ve(Jo,t),ve(ln,gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_c(e,t)}Ie(ln),ve(ln,e)}function Si(){Ie(ln),Ie(Jo),Ie(Yo)}function A_(t){vr(Yo.current);var e=vr(ln.current),n=_c(e,t.type);e!==n&&(ve(Jo,t),ve(ln,n))}function hf(t){Jo.current===t&&(Ie(ln),Ie(Jo))}var we=or(0);function Yl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qu=[];function pf(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var _l=Pn.ReactCurrentDispatcher,zu=Pn.ReactCurrentBatchConfig,Ar=0,Ce=null,Fe=null,Ge=null,Ql=!1,No=!1,Qo=0,vw=0;function nt(){throw Error(H(321))}function mf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function gf(t,e,n,r,i,o){if(Ar=o,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?Iw:Sw,t=n(r,i),No){o=0;do{if(No=!1,Qo=0,25<=o)throw Error(H(301));o+=1,Ge=Fe=null,e.updateQueue=null,_l.current=ww,t=n(r,i)}while(No)}if(_l.current=Xl,e=Fe!==null&&Fe.next!==null,Ar=0,Ge=Fe=Ce=null,Ql=!1,e)throw Error(H(300));return t}function yf(){var t=Qo!==0;return Qo=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ot(){if(Fe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,Fe=t;else{if(t===null)throw Error(H(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Xo(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=Ot(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Fe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,f=o;do{var h=f.lane;if((Ar&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Ce.lanes|=h,Rr|=h}f=f.next}while(f!==null&&f!==o);u===null?s=r:u.next=l,en(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ce.lanes|=o,Rr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ku(t){var e=Ot(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);en(o,e.memoizedState)||(_t=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function R_(){}function P_(t,e){var n=Ce,r=Ot(),i=e(),o=!en(r.memoizedState,i);if(o&&(r.memoizedState=i,_t=!0),r=r.queue,vf(k_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Zo(9,x_.bind(null,n,r,i,e),void 0,null),He===null)throw Error(H(349));Ar&30||N_(n,e,i)}return i}function N_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function x_(t,e,n,r){e.value=n,e.getSnapshot=r,M_(e)&&D_(t)}function k_(t,e,n){return n(function(){M_(e)&&D_(t)})}function M_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function D_(t){var e=In(t,1);e!==null&&Xt(e,t,1,-1)}function om(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t},e.queue=t,t=t.dispatch=Tw.bind(null,Ce,t),[e.memoizedState,t]}function Zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function V_(){return Ot().memoizedState}function El(t,e,n,r){var i=rn();Ce.flags|=t,i.memoizedState=Zo(1|e,n,void 0,r===void 0?null:r)}function xa(t,e,n,r){var i=Ot();r=r===void 0?null:r;var o=void 0;if(Fe!==null){var s=Fe.memoizedState;if(o=s.destroy,r!==null&&mf(r,s.deps)){i.memoizedState=Zo(e,n,o,r);return}}Ce.flags|=t,i.memoizedState=Zo(1|e,n,o,r)}function sm(t,e){return El(8390656,8,t,e)}function vf(t,e){return xa(2048,8,t,e)}function L_(t,e){return xa(4,2,t,e)}function F_(t,e){return xa(4,4,t,e)}function U_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b_(t,e,n){return n=n!=null?n.concat([t]):null,xa(4,4,U_.bind(null,e,t),n)}function _f(){}function O_(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B_(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function G_(t,e,n){return Ar&21?(en(n,e)||(n=Kv(),Ce.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function _w(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=zu.transition;zu.transition={};try{t(!1),e()}finally{pe=n,zu.transition=r}}function H_(){return Ot().memoizedState}function Ew(t,e,n){var r=Yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q_(t))z_(e,n);else if(n=w_(t,e,n,r),n!==null){var i=pt();Xt(n,t,r,i),$_(n,e,r)}}function Tw(t,e,n){var r=Yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q_(t))z_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,en(l,s)){var u=e.interleaved;u===null?(i.next=i,cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=w_(t,e,i,r),n!==null&&(i=pt(),Xt(n,t,r,i),$_(n,e,r))}}function q_(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function z_(t,e){No=Ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}var Xl={readContext:bt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Iw={readContext:bt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:sm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,U_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ew.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:om,useDebugValue:_f,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=om(!1),e=t[0];return t=_w.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,i=rn();if(Se){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),He===null)throw Error(H(349));Ar&30||N_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sm(k_.bind(null,r,o,t),[t]),r.flags|=2048,Zo(9,x_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=rn(),e=He.identifierPrefix;if(Se){var n=yn,r=gn;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sw={readContext:bt,useCallback:O_,useContext:bt,useEffect:vf,useImperativeHandle:b_,useInsertionEffect:L_,useLayoutEffect:F_,useMemo:B_,useReducer:$u,useRef:V_,useState:function(){return $u(Xo)},useDebugValue:_f,useDeferredValue:function(t){var e=Ot();return G_(e,Fe.memoizedState,t)},useTransition:function(){var t=$u(Xo)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:P_,useId:H_,unstable_isNewReconciler:!1},ww={readContext:bt,useCallback:O_,useContext:bt,useEffect:vf,useImperativeHandle:b_,useInsertionEffect:L_,useLayoutEffect:F_,useMemo:B_,useReducer:Ku,useRef:V_,useState:function(){return Ku(Xo)},useDebugValue:_f,useDeferredValue:function(t){var e=Ot();return Fe===null?e.memoizedState=t:G_(e,Fe.memoizedState,t)},useTransition:function(){var t=Ku(Xo)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:P_,useId:H_,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ka={isMounted:function(t){return(t=t._reactInternals)?Dr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Yn(t),o=vn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Wn(t,o,i),e!==null&&(Xt(e,t,i,r),vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Yn(t),o=vn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wn(t,o,i),e!==null&&(Xt(e,t,i,r),vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Yn(t),i=vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wn(t,i,r),e!==null&&(Xt(e,t,r,n),vl(e,t,r))}};function lm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!zo(n,r)||!zo(i,o):!0}function K_(t,e,n){var r=!1,i=er,o=e.contextType;return typeof o=="object"&&o!==null?o=bt(o):(i=Tt(e)?wr:ut.current,r=e.contextTypes,o=(r=r!=null)?Ei(t,i):er),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ka,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function am(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ka.enqueueReplaceState(e,e.state,null)}function Gc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},df(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=bt(o):(o=Tt(e)?wr:ut.current,i.context=Ei(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Bc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ka.enqueueReplaceState(i,i.state,null),Jl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wi(t,e){try{var n="",r=e;do n+=ZI(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Wu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cw=typeof WeakMap=="function"?WeakMap:Map;function W_(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,Zc=r),Hc(t,e)},n}function J_(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Hc(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function um(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ow.bind(null,t,e,n),e.then(t,t))}function cm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Wn(n,e,1))),n.lanes|=1),t)}var Aw=Pn.ReactCurrentOwner,_t=!1;function ht(t,e,n,r){e.child=t===null?S_(e,null,n,r):Ii(e,t.child,n,r)}function fm(t,e,n,r,i){n=n.render;var o=e.ref;return fi(e,i),r=gf(t,e,n,r,o,i),n=yf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Se&&n&&rf(e),e.flags|=1,ht(t,e,r,i),e.child)}function hm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Rf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Y_(t,e,o,r,i)):(t=wl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:zo,n(s,r)&&t.ref===e.ref)return Sn(t,e,i)}return e.flags|=1,t=Qn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Y_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(zo(o,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,Sn(t,e,i)}return qc(t,e,n,r,i)}function Q_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(oi,Ct),Ct|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(oi,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ve(oi,Ct),Ct|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ve(oi,Ct),Ct|=r;return ht(t,e,i,n),e.child}function X_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qc(t,e,n,r,i){var o=Tt(n)?wr:ut.current;return o=Ei(e,o),fi(e,i),n=gf(t,e,n,r,o,i),r=yf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Se&&r&&rf(e),e.flags|=1,ht(t,e,n,i),e.child)}function pm(t,e,n,r,i){if(Tt(n)){var o=!0;ql(e)}else o=!1;if(fi(e,i),e.stateNode===null)Tl(t,e),K_(e,n,r),Gc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=bt(f):(f=Tt(n)?wr:ut.current,f=Ei(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==f)&&am(e,s,r,f),Fn=!1;var m=e.memoizedState;s.state=m,Jl(e,r,s,i),u=e.memoizedState,l!==r||m!==u||Et.current||Fn?(typeof h=="function"&&(Bc(e,n,h,r),u=e.memoizedState),(l=Fn||lm(e,n,l,r,m,u,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,C_(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:Kt(e.type,l),s.props=f,p=e.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=Tt(n)?wr:ut.current,u=Ei(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&am(e,s,r,u),Fn=!1,m=e.memoizedState,s.state=m,Jl(e,r,s,i);var S=e.memoizedState;l!==p||m!==S||Et.current||Fn?(typeof v=="function"&&(Bc(e,n,v,r),S=e.memoizedState),(f=Fn||lm(e,n,f,r,m,S,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,S,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,S,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),s.props=r,s.state=S,s.context=u,r=f):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return zc(t,e,n,r,o,i)}function zc(t,e,n,r,i,o){X_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&jp(e,n,!1),Sn(t,e,o);r=e.stateNode,Aw.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ii(e,t.child,null,o),e.child=Ii(e,null,l,o)):ht(t,e,l,o),e.memoizedState=r.state,i&&jp(e,n,!0),e.child}function Z_(t){var e=t.stateNode;e.pendingContext?Zp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zp(t,e.context,!1),ff(t,e.containerInfo)}function mm(t,e,n,r,i){return Ti(),sf(i),e.flags|=256,ht(t,e,n,r),e.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function Kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function j_(t,e,n){var r=e.pendingProps,i=we.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(we,i&1),t===null)return bc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Va(s,r,0,null),t=Tr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Kc(n),e.memoizedState=$c,t):Ef(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Rw(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Qn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Qn(l,o):(o=Tr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Kc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=$c,r}return o=t.child,t=o.sibling,r=Qn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=Va({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&sf(r),Ii(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rw(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Wu(Error(H(422))),el(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Va({mode:"visible",children:r.children},i,0,null),o=Tr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ii(e,t.child,null,s),e.child.memoizedState=Kc(s),e.memoizedState=$c,o);if(!(e.mode&1))return el(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(H(419)),r=Wu(o,r,void 0),el(t,e,s,r)}if(l=(s&t.childLanes)!==0,_t||l){if(r=He,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,In(t,i),Xt(r,t,i,-1))}return Af(),r=Wu(Error(H(421))),el(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Bw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,At=Kn(i.nextSibling),Rt=e,Se=!0,Jt=null,t!==null&&(kt[Mt++]=gn,kt[Mt++]=yn,kt[Mt++]=Cr,gn=t.id,yn=t.overflow,Cr=e),e=Ef(e,r.children),e.flags|=4096,e)}function gm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oc(t.return,e,n)}function Ju(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function eE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ht(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gm(t,n,e);else if(t.tag===19)gm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(we,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ju(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ju(e,!0,n,null,o);break;case"together":Ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pw(t,e,n){switch(e.tag){case 3:Z_(e),Ti();break;case 5:A_(e);break;case 1:Tt(e.type)&&ql(e);break;case 4:ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(Kl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?j_(t,e,n):(ve(we,we.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);ve(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,Q_(t,e,n)}return Sn(t,e,n)}var tE,Wc,nE,rE;tE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wc=function(){};nE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vr(ln.current);var o=null;switch(n){case"input":i=mc(t,i),r=mc(t,r),o=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),o=[];break;case"textarea":i=vc(t,i),r=vc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gl)}Ec(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Uo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Ee("scroll",t),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};rE=function(t,e,n,r){n!==r&&(e.flags|=4)};function uo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Nw(t,e,n){var r=e.pendingProps;switch(of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Tt(e.type)&&Hl(),rt(e),null;case 3:return r=e.stateNode,Si(),Ie(Et),Ie(ut),pf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(td(Jt),Jt=null))),Wc(t,e),rt(e),null;case 5:hf(e);var i=vr(Yo.current);if(n=e.type,t!==null&&e.stateNode!=null)nE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return rt(e),null}if(t=vr(ln.current),Zs(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[on]=e,r[Wo]=o,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<vo.length;i++)Ee(vo[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Cp(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":Rp(r,o),Ee("invalid",r)}Ec(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Xs(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Xs(r.textContent,l,t),i=["children",""+l]):Uo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ee("scroll",r)}switch(n){case"input":qs(r),Ap(r,o,!0);break;case"textarea":qs(r),Pp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Gl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[on]=e,t[Wo]=r,tE(t,e,!1,!1),e.stateNode=t;e:{switch(s=Tc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<vo.length;i++)Ee(vo[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":Cp(t,r),i=mc(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Rp(t,r),i=vc(t,r),Ee("invalid",t);break;default:i=r}Ec(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Vv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mv(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&bo(t,u):typeof u=="number"&&bo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Uo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ee("scroll",t):u!=null&&qd(t,o,u,s))}switch(n){case"input":qs(t),Ap(t,r,!1);break;case"textarea":qs(t),Pp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ai(t,!!r.multiple,o,!1):r.defaultValue!=null&&ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)rE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=vr(Yo.current),vr(ln.current),Zs(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(o=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Xs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xs(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return rt(e),null;case 13:if(Ie(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&At!==null&&e.mode&1&&!(e.flags&128))T_(),Ti(),e.flags|=98560,o=!1;else if(o=Zs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[on]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),o=!1}else Jt!==null&&(td(Jt),Jt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?be===0&&(be=3):Af())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Si(),Wc(t,e),t===null&&$o(e.stateNode.containerInfo),rt(e),null;case 10:return uf(e.type._context),rt(e),null;case 17:return Tt(e.type)&&Hl(),rt(e),null;case 19:if(Ie(we),o=e.memoizedState,o===null)return rt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)uo(o,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Yl(t),s!==null){for(e.flags|=128,uo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(we,we.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>Ci&&(e.flags|=128,r=!0,uo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Yl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Se)return rt(e),null}else 2*Me()-o.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,r=!0,uo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=we.current,ve(we,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Cf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function xw(t,e){switch(of(e),e.tag){case 1:return Tt(e.type)&&Hl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(),Ie(Et),Ie(ut),pf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hf(e),null;case 13:if(Ie(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(we),null;case 4:return Si(),null;case 10:return uf(e.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var tl=!1,st=!1,kw=typeof WeakSet=="function"?WeakSet:Set,$=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Jc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var ym=!1;function Mw(t,e){if(kc=bl,t=a_(),nf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,f=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++f===i&&(l=s),m===o&&++h===r&&(u=s),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mc={focusedElem:t,selectionRange:n},bl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var P=S.memoizedProps,x=S.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?P:Kt(e.type,P),x);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(M){Ne(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return S=ym,ym=!1,S}function xo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Jc(e,n,o)}i=i.next}while(i!==r)}}function Ma(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iE(t){var e=t.alternate;e!==null&&(t.alternate=null,iE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[Wo],delete e[Lc],delete e[pw],delete e[mw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oE(t){return t.tag===5||t.tag===3||t.tag===4}function vm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gl));else if(r!==4&&(t=t.child,t!==null))for(Qc(t,e,n),t=t.sibling;t!==null;)Qc(t,e,n),t=t.sibling}function Xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}var $e=null,Wt=!1;function Vn(t,e,n){for(n=n.child;n!==null;)sE(t,e,n),n=n.sibling}function sE(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(wa,n)}catch{}switch(n.tag){case 5:st||ii(n,e);case 6:var r=$e,i=Wt;$e=null,Vn(t,e,n),$e=r,Wt=i,$e!==null&&(Wt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Wt?(t=$e,n=n.stateNode,t.nodeType===8?Gu(t.parentNode,n):t.nodeType===1&&Gu(t,n),Ho(t)):Gu($e,n.stateNode));break;case 4:r=$e,i=Wt,$e=n.stateNode.containerInfo,Wt=!0,Vn(t,e,n),$e=r,Wt=i;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Jc(n,e,s),i=i.next}while(i!==r)}Vn(t,e,n);break;case 1:if(!st&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,Vn(t,e,n),st=r):Vn(t,e,n);break;default:Vn(t,e,n)}}function _m(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kw),e.forEach(function(r){var i=Gw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,Wt=!1;break e;case 3:$e=l.stateNode.containerInfo,Wt=!0;break e;case 4:$e=l.stateNode.containerInfo,Wt=!0;break e}l=l.return}if($e===null)throw Error(H(160));sE(o,s,i),$e=null,Wt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Ne(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lE(e,t),e=e.sibling}function lE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),nn(t),r&4){try{xo(3,t,t.return),Ma(3,t)}catch(P){Ne(t,t.return,P)}try{xo(5,t,t.return)}catch(P){Ne(t,t.return,P)}}break;case 1:$t(e,t),nn(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if($t(e,t),nn(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var i=t.stateNode;try{bo(i,"")}catch(P){Ne(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Nv(i,o),Tc(l,s);var f=Tc(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?Vv(i,p):h==="dangerouslySetInnerHTML"?Mv(i,p):h==="children"?bo(i,p):qd(i,h,p,f)}switch(l){case"input":gc(i,o);break;case"textarea":xv(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?ai(i,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?ai(i,!!o.multiple,o.defaultValue,!0):ai(i,!!o.multiple,o.multiple?[]:"",!1))}i[Wo]=o}catch(P){Ne(t,t.return,P)}}break;case 6:if($t(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Ne(t,t.return,P)}}break;case 3:if($t(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(P){Ne(t,t.return,P)}break;case 4:$t(e,t),nn(t);break;case 13:$t(e,t),nn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Sf=Me())),r&4&&_m(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(st=(f=st)||h,$t(e,t),st=f):$t(e,t),nn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(p=$=h;$!==null;){switch(m=$,v=m.child,m.tag){case 0:case 11:case 14:case 15:xo(4,m,m.return);break;case 1:ii(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(P){Ne(r,n,P)}}break;case 5:ii(m,m.return);break;case 22:if(m.memoizedState!==null){Tm(p);continue}}v!==null?(v.return=m,$=v):Tm(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Dv("display",s))}catch(P){Ne(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(P){Ne(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$t(e,t),nn(t),r&4&&_m(t);break;case 21:break;default:$t(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oE(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bo(i,""),r.flags&=-33);var o=vm(t);Xc(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=vm(t);Qc(t,l,s);break;default:throw Error(H(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dw(t,e,n){$=t,aE(t)}function aE(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||tl;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||st;l=tl;var f=st;if(tl=s,(st=u)&&!f)for($=i;$!==null;)s=$,u=s.child,s.tag===22&&s.memoizedState!==null?Im(i):u!==null?(u.return=s,$=u):Im(i);for(;o!==null;)$=o,aE(o),o=o.sibling;$=i,tl=l,st=f}Em(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$=o):Em(t)}}function Em(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||Ma(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!st)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&im(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}im(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Ho(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}st||e.flags&512&&Yc(e)}catch(m){Ne(e,e.return,m)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Tm(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Im(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ma(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ne(e,i,u)}}var o=e.return;try{Yc(e)}catch(u){Ne(e,o,u)}break;case 5:var s=e.return;try{Yc(e)}catch(u){Ne(e,s,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Vw=Math.ceil,Zl=Pn.ReactCurrentDispatcher,Tf=Pn.ReactCurrentOwner,Lt=Pn.ReactCurrentBatchConfig,ae=0,He=null,Ve=null,Je=0,Ct=0,oi=or(0),be=0,jo=null,Rr=0,Da=0,If=0,ko=null,vt=null,Sf=0,Ci=1/0,pn=null,jl=!1,Zc=null,Jn=null,nl=!1,Bn=null,ea=0,Mo=0,jc=null,Il=-1,Sl=0;function pt(){return ae&6?Me():Il!==-1?Il:Il=Me()}function Yn(t){return t.mode&1?ae&2&&Je!==0?Je&-Je:yw.transition!==null?(Sl===0&&(Sl=Kv()),Sl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:jv(t.type)),t):1}function Xt(t,e,n,r){if(50<Mo)throw Mo=0,jc=null,Error(H(185));hs(t,n,r),(!(ae&2)||t!==He)&&(t===He&&(!(ae&2)&&(Da|=n),be===4&&bn(t,Je)),It(t,r),n===1&&ae===0&&!(e.mode&1)&&(Ci=Me()+500,Na&&sr()))}function It(t,e){var n=t.callbackNode;yS(t,e);var r=Ul(t,t===He?Je:0);if(r===0)n!==null&&kp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kp(n),e===1)t.tag===0?gw(Sm.bind(null,t)):v_(Sm.bind(null,t)),fw(function(){!(ae&6)&&sr()}),n=null;else{switch(Wv(r)){case 1:n=Jd;break;case 4:n=zv;break;case 16:n=Fl;break;case 536870912:n=$v;break;default:n=Fl}n=gE(n,uE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uE(t,e){if(Il=-1,Sl=0,ae&6)throw Error(H(327));var n=t.callbackNode;if(hi()&&t.callbackNode!==n)return null;var r=Ul(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ta(t,r);else{e=r;var i=ae;ae|=2;var o=dE();(He!==t||Je!==e)&&(pn=null,Ci=Me()+500,Er(t,e));do try{Uw();break}catch(l){cE(t,l)}while(!0);af(),Zl.current=o,ae=i,Ve!==null?e=0:(He=null,Je=0,e=be)}if(e!==0){if(e===2&&(i=Ac(t),i!==0&&(r=i,e=ed(t,i))),e===1)throw n=jo,Er(t,0),bn(t,r),It(t,Me()),n;if(e===6)bn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Lw(i)&&(e=ta(t,r),e===2&&(o=Ac(t),o!==0&&(r=o,e=ed(t,o))),e===1))throw n=jo,Er(t,0),bn(t,r),It(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:hr(t,vt,pn);break;case 3:if(bn(t,r),(r&130023424)===r&&(e=Sf+500-Me(),10<e)){if(Ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vc(hr.bind(null,t,vt,pn),e);break}hr(t,vt,pn);break;case 4:if(bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Qt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vw(r/1960))-r,10<r){t.timeoutHandle=Vc(hr.bind(null,t,vt,pn),r);break}hr(t,vt,pn);break;case 5:hr(t,vt,pn);break;default:throw Error(H(329))}}}return It(t,Me()),t.callbackNode===n?uE.bind(null,t):null}function ed(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=ta(t,e),t!==2&&(e=vt,vt=n,e!==null&&td(e)),t}function td(t){vt===null?vt=t:vt.push.apply(vt,t)}function Lw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!en(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bn(t,e){for(e&=~If,e&=~Da,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),r=1<<n;t[n]=-1,e&=~r}}function Sm(t){if(ae&6)throw Error(H(327));hi();var e=Ul(t,0);if(!(e&1))return It(t,Me()),null;var n=ta(t,e);if(t.tag!==0&&n===2){var r=Ac(t);r!==0&&(e=r,n=ed(t,r))}if(n===1)throw n=jo,Er(t,0),bn(t,e),It(t,Me()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,vt,pn),It(t,Me()),null}function wf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Ci=Me()+500,Na&&sr())}}function Pr(t){Bn!==null&&Bn.tag===0&&!(ae&6)&&hi();var e=ae;ae|=1;var n=Lt.transition,r=pe;try{if(Lt.transition=null,pe=1,t)return t()}finally{pe=r,Lt.transition=n,ae=e,!(ae&6)&&sr()}}function Cf(){Ct=oi.current,Ie(oi)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dw(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hl();break;case 3:Si(),Ie(Et),Ie(ut),pf();break;case 5:hf(r);break;case 4:Si();break;case 13:Ie(we);break;case 19:Ie(we);break;case 10:uf(r.type._context);break;case 22:case 23:Cf()}n=n.return}if(He=t,Ve=t=Qn(t.current,null),Je=Ct=e,be=0,jo=null,If=Da=Rr=0,vt=ko=null,yr!==null){for(e=0;e<yr.length;e++)if(n=yr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}yr=null}return t}function cE(t,e){do{var n=Ve;try{if(af(),_l.current=Xl,Ql){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ql=!1}if(Ar=0,Ge=Fe=Ce=null,No=!1,Qo=0,Tf.current=null,n===null||n.return===null){be=1,jo=e,Ve=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=cm(s);if(v!==null){v.flags&=-257,dm(v,s,l,o,e),v.mode&1&&um(o,f,e),e=v,u=f;var S=e.updateQueue;if(S===null){var P=new Set;P.add(u),e.updateQueue=P}else S.add(u);break e}else{if(!(e&1)){um(o,f,e),Af();break e}u=Error(H(426))}}else if(Se&&l.mode&1){var x=cm(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),dm(x,s,l,o,e),sf(wi(u,l));break e}}o=u=wi(u,l),be!==4&&(be=2),ko===null?ko=[o]:ko.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=W_(o,u,e);rm(o,I);break e;case 1:l=u;var T=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Jn===null||!Jn.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=J_(o,l,e);rm(o,M);break e}}o=o.return}while(o!==null)}hE(n)}catch(V){e=V,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function dE(){var t=Zl.current;return Zl.current=Xl,t===null?Xl:t}function Af(){(be===0||be===3||be===2)&&(be=4),He===null||!(Rr&268435455)&&!(Da&268435455)||bn(He,Je)}function ta(t,e){var n=ae;ae|=2;var r=dE();(He!==t||Je!==e)&&(pn=null,Er(t,e));do try{Fw();break}catch(i){cE(t,i)}while(!0);if(af(),ae=n,Zl.current=r,Ve!==null)throw Error(H(261));return He=null,Je=0,be}function Fw(){for(;Ve!==null;)fE(Ve)}function Uw(){for(;Ve!==null&&!aS();)fE(Ve)}function fE(t){var e=mE(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?hE(t):Ve=e,Tf.current=null}function hE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xw(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,Ve=null;return}}else if(n=Nw(n,e,Ct),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);be===0&&(be=5)}function hr(t,e,n){var r=pe,i=Lt.transition;try{Lt.transition=null,pe=1,bw(t,e,n,r)}finally{Lt.transition=i,pe=r}return null}function bw(t,e,n,r){do hi();while(Bn!==null);if(ae&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(vS(t,o),t===He&&(Ve=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,gE(Fl,function(){return hi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Lt.transition,Lt.transition=null;var s=pe;pe=1;var l=ae;ae|=4,Tf.current=null,Mw(t,n),lE(n,t),iw(Mc),bl=!!kc,Mc=kc=null,t.current=n,Dw(n),uS(),ae=l,pe=s,Lt.transition=o}else t.current=n;if(nl&&(nl=!1,Bn=t,ea=i),o=t.pendingLanes,o===0&&(Jn=null),fS(n.stateNode),It(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,t=Zc,Zc=null,t;return ea&1&&t.tag!==0&&hi(),o=t.pendingLanes,o&1?t===jc?Mo++:(Mo=0,jc=t):Mo=0,sr(),null}function hi(){if(Bn!==null){var t=Wv(ea),e=Lt.transition,n=pe;try{if(Lt.transition=null,pe=16>t?16:t,Bn===null)var r=!1;else{if(t=Bn,Bn=null,ea=0,ae&6)throw Error(H(331));var i=ae;for(ae|=4,$=t.current;$!==null;){var o=$,s=o.child;if($.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for($=f;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:xo(8,h,o)}var p=h.child;if(p!==null)p.return=h,$=p;else for(;$!==null;){h=$;var m=h.sibling,v=h.return;if(iE(h),h===f){$=null;break}if(m!==null){m.return=v,$=m;break}$=v}}}var S=o.alternate;if(S!==null){var P=S.child;if(P!==null){S.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}$=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,$=s;else e:for(;$!==null;){if(o=$,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xo(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,$=I;break e}$=o.return}}var T=t.current;for($=T;$!==null;){s=$;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,$=A;else e:for(s=T;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ma(9,l)}}catch(V){Ne(l,l.return,V)}if(l===s){$=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,$=M;break e}$=l.return}}if(ae=i,sr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(wa,t)}catch{}r=!0}return r}finally{pe=n,Lt.transition=e}}return!1}function wm(t,e,n){e=wi(n,e),e=W_(t,e,1),t=Wn(t,e,1),e=pt(),t!==null&&(hs(t,1,e),It(t,e))}function Ne(t,e,n){if(t.tag===3)wm(t,t,n);else for(;e!==null;){if(e.tag===3){wm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=wi(n,t),t=J_(e,t,1),e=Wn(e,t,1),t=pt(),e!==null&&(hs(e,1,t),It(e,t));break}}e=e.return}}function Ow(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(be===4||be===3&&(Je&130023424)===Je&&500>Me()-Sf?Er(t,0):If|=n),It(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):e=1);var n=pt();t=In(t,e),t!==null&&(hs(t,e,n),It(t,n))}function Bw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pE(t,n)}function Gw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),pE(t,n)}var mE;mE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Pw(t,e,n);_t=!!(t.flags&131072)}else _t=!1,Se&&e.flags&1048576&&__(e,$l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var i=Ei(e,ut.current);fi(e,n),i=gf(null,e,r,t,i,n);var o=yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(o=!0,ql(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,df(e),i.updater=ka,e.stateNode=i,i._reactInternals=e,Gc(e,r,t,n),e=zc(null,e,r,!0,o,n)):(e.tag=0,Se&&o&&rf(e),ht(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qw(r),t=Kt(r,t),i){case 0:e=qc(null,e,r,t,n);break e;case 1:e=pm(null,e,r,t,n);break e;case 11:e=fm(null,e,r,t,n);break e;case 14:e=hm(null,e,r,Kt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),qc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),pm(t,e,r,i,n);case 3:e:{if(Z_(e),t===null)throw Error(H(387));r=e.pendingProps,o=e.memoizedState,i=o.element,C_(t,e),Jl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=wi(Error(H(423)),e),e=mm(t,e,r,n,i);break e}else if(r!==i){i=wi(Error(H(424)),e),e=mm(t,e,r,n,i);break e}else for(At=Kn(e.stateNode.containerInfo.firstChild),Rt=e,Se=!0,Jt=null,n=S_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===i){e=Sn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return A_(e),t===null&&bc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Dc(r,i)?s=null:o!==null&&Dc(r,o)&&(e.flags|=32),X_(t,e),ht(t,e,s,n),e.child;case 6:return t===null&&bc(e),null;case 13:return j_(t,e,n);case 4:return ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ii(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),fm(t,e,r,i,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ve(Kl,r._currentValue),r._currentValue=s,o!==null)if(en(o.value,s)){if(o.children===i.children&&!Et.current){e=Sn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=vn(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Oc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(H(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Oc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ht(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fi(e,n),i=bt(i),r=r(i),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,i=Kt(r,e.pendingProps),i=Kt(r.type,i),hm(t,e,r,i,n);case 15:return Y_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),Tl(t,e),e.tag=1,Tt(r)?(t=!0,ql(e)):t=!1,fi(e,n),K_(e,r,i),Gc(e,r,i,n),zc(null,e,r,!0,t,n);case 19:return eE(t,e,n);case 22:return Q_(t,e,n)}throw Error(H(156,e.tag))};function gE(t,e){return qv(t,e)}function Hw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new Hw(t,e,n,r)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qw(t){if(typeof t=="function")return Rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$d)return 11;if(t===Kd)return 14}return 2}function Qn(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Rf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Yr:return Tr(n.children,i,o,e);case zd:s=8,i|=8;break;case dc:return t=Vt(12,n,e,i|2),t.elementType=dc,t.lanes=o,t;case fc:return t=Vt(13,n,e,i),t.elementType=fc,t.lanes=o,t;case hc:return t=Vt(19,n,e,i),t.elementType=hc,t.lanes=o,t;case Av:return Va(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wv:s=10;break e;case Cv:s=9;break e;case $d:s=11;break e;case Kd:s=14;break e;case Ln:s=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Vt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Tr(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Va(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=Av,t.lanes=n,t.stateNode={isHidden:!1},t}function Yu(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Qu(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xu(0),this.expirationTimes=xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pf(t,e,n,r,i,o,s,l,u){return t=new zw(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Vt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},df(o),t}function $w(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yE(t){if(!t)return er;t=t._reactInternals;e:{if(Dr(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Tt(n))return y_(t,n,e)}return e}function vE(t,e,n,r,i,o,s,l,u){return t=Pf(n,r,!0,t,i,o,s,l,u),t.context=yE(null),n=t.current,r=pt(),i=Yn(n),o=vn(r,i),o.callback=e??null,Wn(n,o,i),t.current.lanes=i,hs(t,i,r),It(t,r),t}function La(t,e,n,r){var i=e.current,o=pt(),s=Yn(i);return n=yE(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wn(i,e,s),t!==null&&(Xt(t,i,s,o),vl(t,i,s)),s}function na(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nf(t,e){Cm(t,e),(t=t.alternate)&&Cm(t,e)}function Kw(){return null}var _E=typeof reportError=="function"?reportError:function(t){console.error(t)};function xf(t){this._internalRoot=t}Fa.prototype.render=xf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));La(t,e,null,null)};Fa.prototype.unmount=xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){La(null,t,null,null)}),e[Tn]=null}};function Fa(t){this._internalRoot=t}Fa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&Zv(t)}};function kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Am(){}function Ww(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=na(s);o.call(f)}}var s=vE(e,r,t,0,null,!1,!1,"",Am);return t._reactRootContainer=s,t[Tn]=s.current,$o(t.nodeType===8?t.parentNode:t),Pr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=na(u);l.call(f)}}var u=Pf(t,0,!1,null,null,!1,!1,"",Am);return t._reactRootContainer=u,t[Tn]=u.current,$o(t.nodeType===8?t.parentNode:t),Pr(function(){La(e,u,n,r)}),u}function ba(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=na(s);l.call(u)}}La(e,s,t,i)}else s=Ww(n,e,t,i,r);return na(s)}Jv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yo(e.pendingLanes);n!==0&&(Yd(e,n|1),It(e,Me()),!(ae&6)&&(Ci=Me()+500,sr()))}break;case 13:Pr(function(){var r=In(t,1);if(r!==null){var i=pt();Xt(r,t,1,i)}}),Nf(t,1)}};Qd=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=pt();Xt(e,t,134217728,n)}Nf(t,134217728)}};Yv=function(t){if(t.tag===13){var e=Yn(t),n=In(t,e);if(n!==null){var r=pt();Xt(n,t,e,r)}Nf(t,e)}};Qv=function(){return pe};Xv=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Sc=function(t,e,n){switch(e){case"input":if(gc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pa(r);if(!i)throw Error(H(90));Pv(r),gc(r,i)}}}break;case"textarea":xv(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};Uv=wf;bv=Pr;var Jw={usingClientEntryPoint:!1,Events:[ms,jr,Pa,Lv,Fv,wf]},co={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yw={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gv(t),t===null?null:t.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{wa=rl.inject(Yw),sn=rl}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kf(e))throw Error(H(200));return $w(t,e,null,n)};Nt.createRoot=function(t,e){if(!kf(t))throw Error(H(299));var n=!1,r="",i=_E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pf(t,1,!1,null,null,n,!1,r,i),t[Tn]=e.current,$o(t.nodeType===8?t.parentNode:t),new xf(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Gv(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Pr(t)};Nt.hydrate=function(t,e,n){if(!Ua(e))throw Error(H(200));return ba(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!kf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=_E;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=vE(e,null,t,1,n??null,i,!1,o,s),t[Tn]=e.current,$o(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fa(e)};Nt.render=function(t,e,n){if(!Ua(e))throw Error(H(200));return ba(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!Ua(t))throw Error(H(40));return t._reactRootContainer?(Pr(function(){ba(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};Nt.unstable_batchedUpdates=wf;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ua(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return ba(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function EE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EE)}catch(t){console.error(t)}}EE(),Ev.exports=Nt;var Qw=Ev.exports,Rm=Qw;uc.createRoot=Rm.createRoot,uc.hydrateRoot=Rm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Le=(t,e)=>{const n=Te.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...f},h)=>Te.createElement("svg",{ref:h,...Xw,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${Zw(t)}`,l].join(" "),...f},[...e.map(([p,m])=>Te.createElement(p,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=Le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Le("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Le("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Le("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Le("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Le("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Le("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fC=({stats:t})=>{const e=({label:n,value:r,subtext:i,icon:o,colorClass:s})=>F.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-sm border border-theme-100 transition-all duration-300 group hover:-translate-y-1 hover:shadow-md",children:[F.jsxs("div",{className:"flex justify-between items-start mb-3",children:[F.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-theme-400",children:n}),F.jsx("div",{className:`p-2.5 rounded-xl ${s}`,children:F.jsx(o,{size:18,className:"opacity-80"})})]}),F.jsxs("div",{className:"flex flex-col",children:[F.jsx("span",{className:"text-2xl md:text-3xl font-black text-theme-800 tracking-tight font-sans",children:r}),i&&F.jsx("span",{className:"text-xs font-medium text-theme-400 mt-1",children:i})]})]});return F.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[F.jsx(e,{label:"Toplanan",value:`${t.totalCollected}`,icon:uC,colorClass:"bg-[#E9EDC9] text-[#4A5D23]"}),F.jsx(e,{label:"Harcanan",value:`${t.totalSpent}`,subtext:"Kahve, eker, filtre vb.",icon:lC,colorClass:"bg-[#FFD7BA] text-[#A66828]"}),F.jsx(e,{label:"Kasa (Kalan)",value:`${t.remainingBalance}`,icon:iC,colorClass:`bg-[#B5C9C3] text-[#354F52] ${t.remainingBalance<0?"border-red-200 bg-red-50 text-red-600":""}`}),F.jsx(e,{label:"Beklenen",value:t.unpaidCount,subtext:"Kii demedi",icon:jw,colorClass:"bg-[#E3D5CA] text-[#7F5539]"})]})},hC=({people:t,onTogglePay:e,onDelete:n,onRate:r})=>{const[i,o]=Te.useState(null),[s,l]=Te.useState(""),u=p=>{o(p.id),l(p.satisfaction||"")},f=p=>{r(p,s),o(null)};if(t.length===0)return F.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-theme-200 rounded-2xl",children:[F.jsx("div",{className:"bg-theme-50 p-6 rounded-full border border-theme-100 mb-4",children:F.jsx(ra,{size:32,className:"text-theme-400"})}),F.jsx("p",{className:"text-theme-700 font-bold text-lg",children:"Liste Henz Bo"}),F.jsx("p",{className:"text-theme-400 text-sm mt-1",children:"Ekibe yeni bir kahve sever ekleyin."})]});const h=[...t].sort((p,m)=>p.hasPaid===m.hasPaid?0:p.hasPaid?1:-1);return F.jsxs("div",{className:"bg-white border border-theme-100 shadow-sm rounded-2xl overflow-hidden",children:[F.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-4 bg-[#F9F7F5] border-b border-theme-100 text-xs font-bold uppercase tracking-widest text-theme-400",children:[F.jsx("div",{className:"col-span-1",children:"Durum"}),F.jsx("div",{className:"col-span-4",children:"sim"}),F.jsx("div",{className:"col-span-2",children:"deme Tarihi"}),F.jsx("div",{className:"col-span-4",children:"Gr / Not"}),F.jsx("div",{className:"col-span-1 text-right",children:"Sil"})]}),F.jsx("div",{className:"divide-y divide-theme-50",children:h.map(p=>F.jsxs("div",{className:`group flex flex-col md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center transition-all duration-200 ${p.hasPaid?"bg-white hover:bg-[#F9F7F5]":"bg-[#FFF5F5] hover:bg-[#FFEBEB]"}`,children:[F.jsx("div",{className:"w-full md:col-span-1 flex md:block",children:F.jsx("button",{onClick:()=>e(p.id),className:`w-10 h-10 md:w-8 md:h-8 flex items-center justify-center rounded-lg border transition-all duration-300 shadow-sm ${p.hasPaid?"bg-[#CCD5AE] border-[#B7C496] text-[#4A5D23] hover:bg-[#D4E09B]":"bg-white border-theme-200 text-theme-200 hover:border-accent-DEFAULT hover:text-accent-DEFAULT"}`,children:F.jsx(tC,{size:16,strokeWidth:4})})}),F.jsxs("div",{className:"w-full md:col-span-4 flex items-center gap-3",children:[F.jsx("div",{className:`p-2 rounded-full transition-colors ${p.hasPaid?"bg-theme-100 text-theme-500":"bg-[#FFD7BA] text-[#A66828]"}`,children:F.jsx(aC,{size:16})}),F.jsxs("div",{children:[F.jsx("span",{className:`block font-bold text-sm md:text-base ${p.hasPaid?"text-theme-700":"text-theme-900"}`,children:p.name}),!p.hasPaid&&F.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide text-[#E5989B]",children:"deme Bekleniyor"})]})]}),F.jsxs("div",{className:"w-full md:col-span-2 flex items-center gap-2",children:[F.jsx("span",{className:"md:hidden text-xs font-bold text-theme-400 uppercase w-24",children:"Tarih:"}),F.jsx("span",{className:"text-sm font-mono text-theme-500",children:p.hasPaid&&p.datePaid?new Date(p.datePaid).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"}):"-"})]}),F.jsxs("div",{className:"w-full md:col-span-4 relative",children:[F.jsx("span",{className:"md:hidden text-xs font-bold text-theme-400 uppercase block mb-1",children:"Gr:"}),i===p.id?F.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2",children:[F.jsx("input",{type:"text",value:s,onChange:m=>l(m.target.value),placeholder:"Bir not brakn...",className:"w-full text-sm border border-accent-DEFAULT/50 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-accent-light bg-white text-theme-700",autoFocus:!0,onKeyDown:m=>m.key==="Enter"&&f(p.id)}),F.jsx("button",{onClick:()=>f(p.id),className:"text-[#4A5D23] hover:scale-110 transition-transform",children:F.jsx(sC,{size:18})}),F.jsx("button",{onClick:()=>o(null),className:"text-[#E5989B] hover:scale-110 transition-transform",children:F.jsx(dC,{size:18})})]}):F.jsx("div",{onClick:()=>u(p),className:"group/edit flex items-center gap-2 cursor-pointer py-1",children:p.satisfaction?F.jsxs("span",{className:"text-sm text-theme-600 italic border-b border-dashed border-theme-300 hover:border-accent-DEFAULT",children:['"',p.satisfaction,'"']}):F.jsxs("span",{className:"text-sm text-theme-300 flex items-center gap-1 group-hover/edit:text-accent-DEFAULT transition-colors",children:[F.jsx(rC,{size:14})," ",F.jsx("span",{className:"text-xs",children:"Gr ekle"})]})})]}),F.jsx("div",{className:"w-full md:col-span-1 flex justify-end",children:F.jsx("button",{onClick:()=>n(p.id),className:"p-2 text-theme-300 hover:text-[#E5989B] hover:bg-[#FFF5F5] rounded-lg transition-colors",title:"Kayd Sil",children:F.jsx(TE,{size:16})})})]},p.id))})]})},pC=({expenses:t,onDelete:e})=>{if(t.length===0)return F.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border-2 border-dashed border-theme-200 rounded-2xl",children:[F.jsx("div",{className:"bg-theme-50 p-6 rounded-full border border-theme-100 mb-4",children:F.jsx(km,{size:32,className:"text-theme-400"})}),F.jsx("p",{className:"text-theme-700 font-bold text-lg",children:"Henz Harcama Yok"}),F.jsx("p",{className:"text-theme-400 text-sm mt-1",children:"Yaplan alverileri buraya ekleyebilirsiniz."})]});const n=[...t].sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime());return F.jsxs("div",{className:"bg-white border border-theme-100 shadow-sm rounded-2xl overflow-hidden",children:[F.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-4 bg-[#F9F7F5] border-b border-theme-100 text-xs font-bold uppercase tracking-widest text-theme-400",children:[F.jsx("div",{className:"col-span-6",children:"Aklama"}),F.jsx("div",{className:"col-span-3",children:"Tarih"}),F.jsx("div",{className:"col-span-2 text-right",children:"Tutar"}),F.jsx("div",{className:"col-span-1 text-right",children:"Sil"})]}),F.jsx("div",{className:"divide-y divide-theme-50",children:n.map(r=>F.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center hover:bg-[#F9F7F5] transition-colors group",children:[F.jsxs("div",{className:"w-full md:col-span-6 flex items-center gap-3",children:[F.jsx("div",{className:"p-2 rounded-full bg-[#FFD7BA] text-[#A66828]",children:F.jsx(km,{size:16})}),F.jsx("span",{className:"font-bold text-theme-800 text-sm md:text-base",children:r.description})]}),F.jsxs("div",{className:"w-full md:col-span-3 flex items-center gap-2",children:[F.jsx(eC,{size:14,className:"text-theme-300 md:hidden"}),F.jsx("span",{className:"text-sm font-mono text-theme-500",children:new Date(r.date).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})})]}),F.jsxs("div",{className:"w-full md:col-span-2 flex justify-between md:justify-end items-center",children:[F.jsx("span",{className:"md:hidden text-xs font-bold text-theme-400 uppercase",children:"Tutar:"}),F.jsxs("span",{className:"text-base font-bold text-[#6D3B3E] font-mono bg-[#FFF0F3] px-2 py-1 rounded",children:["-",r.amount]})]}),F.jsx("div",{className:"w-full md:col-span-1 flex justify-end",children:F.jsx("button",{onClick:()=>e(r.id),className:"p-2 text-theme-300 hover:text-[#E5989B] hover:bg-[#FFF5F5] rounded-lg transition-colors",title:"Harcamay Sil",children:F.jsx(TE,{size:16})})})]},r.id))})]})},Dm=["Kahve: Sabahlarn sessiz kahraman.","Bir fincan kahve, bin yln hatrna bedeldir.","Hayat, bir fincan kahve ile balar.","Kahvesiz uyanmak, uyanmak deildir.","Bugn harika eyler olacak, ama nce kahve.","Fikirler kahve ile demlenir.","Ofisin yakt: Filtre Kahve.","Kahve kokusu, mutluluun en somut halidir.","Az laf, ok kahve.","Kahve varsa, zm de vardr.","Pazartesi sendromunun tek ilac taze demlenmi bir kahvedir.","Kahve, beynin 'Bala' dmesidir.","Bir fincan kahve imeden asla nemli bir karar verme.","Kahve: Yetikinler iin sihirli iksir.","Bugn kahveni nasl alrsn? Ben 'srekli' alrm.","Kahve, souk havann en scak dostudur.","yi bir gn, iyi bir kahveyle balar.","Kahve bittiinde, i biter.","Hayat ksa, kahveni scak i.","Kahve: Hug in a mug (Bardaktaki sarlma).","Enerji tasarrufu modu: Kapal. Kahve modu: Ak.","Kahve, ruhun gdasdr (ve ofisin).","Sorunlar kahve telvesinde deil, fincann dibinde z.","Kahve, uykuyla savamann en lezzetli yoludur.","Bir kahve molas, gnn gidiatn deitirir.","Kahve seven insan, kalbi scak insandr.","Kahve: Yasal uyuturucu.","Bugnn mottosu: Kahve ve Sabr.","Kahve, sessizliin en gzel elikisidir.","Kahve, gnn virgldr; nefes aldrr.","Her baarl insann arkasnda... tkettii litrelerce kahve vardr.","Kahve: %1 Kafein, %99 Motivasyon.","Kahve, dertleri eritir, zihni aar.","Kahve, sabahn anahtardr.","Kahve olmadan kod yazlmaz, i yaplmaz.","Kahve, dostluklarn imentosudur.","Scak bir kahve, souk bir dnyada snaktr.","Kahve, kelimelerin akmasn salar.","Kahve: Siyah altn.","Kahve imek iin asla ge deildir (uyuyamamak hari).","Kahve, gnn en drst andr.","Kahve, konsantrasyonun sv halidir.","Kahve, pazartesiyi cumaya balayan kprdr.","Kahve, zihnin arj aletidir.","Kahve, kalbin ritmini, zihnin hzn ayarlar.","Kahve, kt bir gn iyiye evirebilir.","Kahve: indeki devi uyandr.","Kahve, ofisin kalp atdr.","Kahve, hayallerin yaktdr.","Kahve, yorgunluun ba dmandr.","Kahve: Basit mutluluk.","Kahve, karmaann iindeki huzurdur.","Kahve, sohbetin bahanesidir.","Kahve, yalnzln en iyi arkadadr.","Kahve, yaratcln kvlcmdr.","Kahve: Gnee 'Gnaydn' deme ekli.","Kahve, her yudumda bir hikaye anlatr.","Kahve, zaman durdurur, an yaatr.","Kahve: Sv bilgelik.","Kahve, gnn stresini alr, yerine enerji koyar.","Kahve, beynin vitamini.","Kahve: Mutluluun demlenmi hali.","Kahve, sabahn ilk dr.","Kahve, her derde deva (neredeyse).","Kahve, dost meclisinin ba kesidir.","Kahve: Siyah inci.","Kahve, uyankln simgesidir.","Kahve, gnn en tatl kaamadr.","Kahve, zihnin pencerelerini aar.","Kahve: Hayatn tad.","Kahve, her an gzelletirir.","Kahve, sessiz lklarn cevabdr.","Kahve: Ruhu stan tek ey.","Kahve, gnn en gzel rutini.","Kahve, baarnn gizli formldr.","Kahve: Zifiri karanlkta parlayan k.","Kahve, her yudumda yeniden balama ansdr.","Kahve, hayatn ritmidir.","Kahve: Kk mutluluklarn by.","Kahve, zihni berraklatrr.","Kahve, gnn en sadk dostudur.","Kahve: Enerjinin kayna.","Kahve, her sorunun cevab olmasa da, dnmeye yardmc olur.","Kahve, gnn en iyi balangcdr.","Kahve: Tutkunun rengi siyahtr.","Kahve, her damlasnda emek vardr.","Kahve, dostluun scakldr.","Kahve: Gnln ilac.","Kahve, gnn yorgunluunu alr gtrr.","Kahve, yeni fikirlerin doduu yerdir.","Kahve: Hayal gcnn yakt.","Kahve, her sabah yeniden doutur.","Kahve, hayatn karmaasna ksa bir moladr.","Kahve: Saf enerji.","Kahve, gnn en gzel dldr.","Kahve, her yudumda huzur verir.","Kahve: Sessizliin sesi.","Kahve, dostluklarn balad yerdir.","Kahve, gnn en gzel detaydr.","Kahve: Hayatn kendisi."],Vm=()=>{const n=Math.floor(Date.now()/6e5)%Dm.length;return Dm[n]},mC=()=>{const[t,e]=Te.useState("");return Te.useEffect(()=>{e(Vm());const n=setInterval(()=>{e(Vm())},6e4);return()=>clearInterval(n)},[]),t?F.jsxs("div",{className:"w-full bg-white border border-theme-100 rounded-2xl p-8 shadow-sm mb-8 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:shadow-md transition-shadow",children:[F.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-[#E3D5CA] via-[#D4A373] to-[#E3D5CA]"}),F.jsx("div",{className:"absolute -left-6 -top-6 text-theme-100/50 group-hover:text-theme-100 transition-colors",children:F.jsx(Nm,{size:80})}),F.jsxs("div",{className:"flex items-center gap-2 mb-4 text-accent-DEFAULT font-bold text-xs uppercase tracking-widest z-10 bg-accent-light/30 px-3 py-1 rounded-full",children:[F.jsx(ra,{size:14}),F.jsx("span",{children:"Gnn Sz"})]}),F.jsxs("p",{className:"font-serif text-xl md:text-3xl italic text-theme-700 leading-relaxed z-10 max-w-3xl",children:['"',t,'"']}),F.jsx("div",{className:"absolute -right-6 -bottom-6 text-theme-100/50 rotate-180 group-hover:text-theme-100 transition-colors",children:F.jsx(Nm,{size:80})})]}):null};var gC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yC,vC;function _C(){return{geminiUrl:yC,vertexUrl:vC}}function EC(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=_C();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nn{}function z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function c(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let f=0;f<u.length;f++){const h=u[f];c(h,e.slice(o+1),n[f])}else for(const f of u)c(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function TC(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const f=o[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&s.add(f)}nd(t,i,o,0,s)}}function nd(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])nd(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(f=>!f.startsWith("_")&&!i.has(f)),u={};for(const f of l)u[f]=s[f];for(const[f,h]of Object.entries(u)){const p=[];for(const m of n.slice(r))m==="*"?p.push(f):p.push(m);c(s,p,h)}for(const f of l)delete s[f]}}else{const s=t;o in s&&nd(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IC(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function SC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],CC(s)),e}function wC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],AC(s)),e}function CC(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>RC(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function AC(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>PC(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function RC(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],VC(n)),e}function PC(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],LC(n)),e}function NC(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function xC(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function kC(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],MC(s)),e}function MC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function IE(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],DC(s)),e}function DC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function VC(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Mf(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function LC(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Mf(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Lm||(Lm={}));var Fm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Fm||(Fm={}));var Um;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Um||(Um={}));var Gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gn||(Gn={}));var bm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(bm||(bm={}));var Om;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Om||(Om={}));var Bm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Bm||(Bm={}));var Gm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Gm||(Gm={}));var Hm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Hm||(Hm={}));var qm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qm||(qm={}));var zm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(zm||(zm={}));var $m;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})($m||($m={}));var Km;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Km||(Km={}));var Wm;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Wm||(Wm={}));var Jm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Jm||(Jm={}));var Ym;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ym||(Ym={}));var Qm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Qm||(Qm={}));var Xm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xm||(Xm={}));var Zm;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Zm||(Zm={}));var jm;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(jm||(jm={}));var eg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(eg||(eg={}));var ia;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ia||(ia={}));var tg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(tg||(tg={}));var ng;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ng||(ng={}));var rg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rg||(rg={}));var rd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rd||(rd={}));var ig;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ig||(ig={}));var og;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(og||(og={}));var id;(function(t){t.COLLECTION="COLLECTION"})(id||(id={}));var sg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(sg||(sg={}));var lg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lg||(lg={}));var ag;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ag||(ag={}));var ug;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ug||(ug={}));var cg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(cg||(cg={}));var dg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dg||(dg={}));var fg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fg||(fg={}));var hg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hg||(hg={}));var pg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(pg||(pg={}));var mg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(mg||(mg={}));var gg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(gg||(gg={}));var yg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(yg||(yg={}));var vg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(vg||(vg={}));var _g;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(_g||(_g={}));var Eg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Eg||(Eg={}));var Tg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Tg||(Tg={}));var Ig;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Ig||(Ig={}));var Sg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Sg||(Sg={}));var wg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(wg||(wg={}));var Cg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cg||(Cg={}));var Ag;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Ag||(Ag={}));var Rg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rg||(Rg={}));var Pg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Pg||(Pg={}));var Ng;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ng||(Ng={}));var xg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xg||(xg={}));var kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kg||(kg={}));var Mg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Mg||(Mg={}));var si;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(si||(si={}));class od{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class fo{get text(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const m of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[v,S]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(S!==null||S!==void 0)&&p.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,v]of Object.entries(p))m!=="inlineData"&&(v!==null||v!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class Dg{}class Vg{}class FC{}class UC{}class bC{}class OC{}class Lg{}class Fg{}class Ug{}class BC{}class oa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new oa;let i;const o=e;return n?i=wC(o):i=SC(o),Object.assign(r,i),r}}class bg{}class Og{}class Bg{}class Gg{}class GC{}class HC{}class qC{}class Df{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Df,o=kC(e);return Object.assign(r,o),r}}class zC{}class $C{}class KC{}class WC{}class Hg{}class JC{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(l))u!=="text"&&u!=="thought"&&f!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class YC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Vf,o=IE(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function de(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function SE(t,e){const n=de(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function wE(t){return Array.isArray(t)?t.map(e=>sa(e)):[sa(t)]}function sa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function CE(t){const e=sa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function AE(t){const e=sa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function RE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qg(e)):[qg(t)]}function sd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $g(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function at(t){if(t==null)throw new Error("ContentUnion is required");return sd(t)?t:{role:"user",parts:RE(t)}}function Lf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=at(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=at(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>at(n)):[at(e)]}function Ft(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zg(t)||$g(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[at(t)]}const e=[],n=[],r=sd(t[0]);for(const i of t){const o=sd(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(zg(i)||$g(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:RE(n)}),e}function QC(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Gn).includes(n[0].toUpperCase())?n[0].toUpperCase():Gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Gn).includes(r.toUpperCase())?r.toUpperCase():Gn.TYPE_UNSPECIFIED})}}function pi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&QC(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Gn).includes(l.toUpperCase())?l.toUpperCase():Gn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=pi(l);else if(r.includes(s)){const u=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}u.push(pi(f))}e[s]=u}else if(i.includes(s)){const u={};for(const[f,h]of Object.entries(l))u[f]=pi(h);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function Ff(t){return pi(t)}function Uf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function bf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pi(e.response));return t}function Ui(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function XC(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function xn(t,e){if(typeof e!="string")throw new Error("name must be a string");return XC(t,e,"cachedContents")}function PE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function lr(t){return Mf(t)}function ZC(t){return t!=null&&typeof t=="object"&&"name"in t}function jC(t){return t!=null&&typeof t=="object"&&"video"in t}function eA(t){return t!=null&&typeof t=="object"&&"uri"in t}function NE(t){var e;let n;if(ZC(t)&&(n=t.name),!(eA(t)&&(n=t.uri,n===void 0))&&!(jC(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function xE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function kE(t){for(const e of["models","tunedModels","publisherModels"])if(tA(t,e))return t[e];return[]}function tA(t,e){return t!==null&&typeof t=="object"&&e in t}function nA(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function rA(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=nA(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function ME(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function iA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function DE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function bi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function VE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oA(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>OA(s))),c(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["inlinedEmbedContentResponses"],o)}return e}function sA(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function lA(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Cl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&c(e,["state"],VE(i));const o=a(t,["metadata","createTime"]);o!=null&&c(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const f=a(t,["metadata","output"]);return f!=null&&c(e,["dest"],oA(DE(f))),e}function ld(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["state"]);i!=null&&c(e,["state"],VE(i));const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=a(t,["model"]);h!=null&&c(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],aA(p));const m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],sA(DE(m)));const v=a(t,["completionStats"]);return v!=null&&c(e,["completionStats"],v),e}function aA(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function uA(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bA(t,s))),c(n,["requests","requests"],o)}return n}function cA(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function dA(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function fA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function hA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function pA(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],mA(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function mA(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function LE(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KA(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function gA(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function yA(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&c(e,["outputConfig"],lA(iA(i))),n}function Kg(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],uA(t,ME(t,i)));const o=a(e,["config"]);return o!=null&&gA(o,n),n}function vA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["inputConfig"],cA(ME(t,i)));const o=a(e,["config"]);return o!=null&&yA(o,n),n}function _A(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function EA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],de(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],RA(t,i));const o=a(e,["config"]);return o!=null&&_A(o,n),n}function TA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function IA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function SA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function wA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function CA(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=Lf(t,r);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(c(n,["_self"],AA(i,n)),TC(n,{"requests[].*":"requests[].request.*"})),n}function AA(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RA(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&c(n,["requests"],CA(t,i)),n}function PA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function NA(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xA(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);const r=a(t,["mode"]);if(r!=null&&c(e,["mode"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kA(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],LE(at(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const v=a(e,["presencePenalty"]);v!=null&&c(r,["presencePenalty"],v);const S=a(e,["frequencyPenalty"]);S!=null&&c(r,["frequencyPenalty"],S);const P=a(e,["seed"]);P!=null&&c(r,["seed"],P);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const I=a(e,["responseSchema"]);I!=null&&c(r,["responseSchema"],Ff(I));const T=a(e,["responseJsonSchema"]);if(T!=null&&c(r,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(fe=>WA(fe))),c(n,["safetySettings"],N)}const M=a(e,["tools"]);if(n!==void 0&&M!=null){let N=Ui(M);Array.isArray(N)&&(N=N.map(fe=>YA(Fi(fe)))),c(n,["tools"],N)}const V=a(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],JA(V)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],xn(t,b));const C=a(e,["responseModalities"]);C!=null&&c(r,["responseModalities"],C);const E=a(e,["mediaResolution"]);E!=null&&c(r,["mediaResolution"],E);const w=a(e,["speechConfig"]);if(w!=null&&c(r,["speechConfig"],Uf(w)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const k=a(e,["imageConfig"]);k!=null&&c(r,["imageConfig"],UA(k));const D=a(e,["enableEnhancedCivicAnswers"]);if(D!=null&&c(r,["enableEnhancedCivicAnswers"],D),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function MA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>pA(f))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function DA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function VA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],bi(t,r)),n}function LA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function FA(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function UA(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],de(t,r));const i=a(e,["contents"]);if(i!=null){let l=Ft(i);Array.isArray(l)&&(l=l.map(u=>LE(u))),c(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],kA(t,s,a(n,["request"],{}))),n}function OA(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],MA(n));const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function BA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function GA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&c(e,["_query","filter"],o),n}function HA(t){const e={},n=a(t,["config"]);return n!=null&&BA(n,e),e}function qA(t){const e={},n=a(t,["config"]);return n!=null&&GA(n,e),e}function zA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Cl(s))),c(e,["batchJobs"],o)}return e}function $A(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ld(s))),c(e,["batchJobs"],o)}return e}function KA(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],PA(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],NA(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],dA(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function WA(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function JA(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);const r=a(t,["functionCallingConfig"]);return r!=null&&c(e,["functionCallingConfig"],xA(r)),e}function YA(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],LA(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],FA(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(wn||(wn={}));class Vr{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QA extends Nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vr(wn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Kg(this.apiClient,e),r=n._url,i=z("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,f=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const v=p.request;v.systemInstruction=m,p.request=v}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=vA(this.apiClient,e);return l=z("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ld(h))}else{const f=Kg(this.apiClient,e);return l=z("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Cl(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=EA(this.apiClient,e);return o=z("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Cl(u))}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=VA(this.apiClient,e);return l=z("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ld(h))}else{const f=DA(this.apiClient,e);return l=z("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Cl(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=hA(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=fA(this.apiClient,e);s=z("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=qA(e);return l=z("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=$A(h),m=new Hg;return Object.assign(m,p),m})}else{const f=HA(e);return l=z("batches",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=zA(h),m=new Hg;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=IA(this.apiClient,e);return l=z("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>wA(h))}else{const f=TA(this.apiClient,e);return l=z("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>SA(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XA(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Wg(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ER(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function ZA(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Ft(s);Array.isArray(h)&&(h=h.map(p=>Wg(p))),c(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],Wg(at(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>IR(p))),c(e,["tools"],h)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],TR(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function jA(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Ft(s);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],at(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>SR(m))),c(e,["tools"],p)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],f);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&c(e,["encryption_spec","kmsKeyName"],h),n}function eR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],SE(t,r));const i=a(e,["config"]);return i!=null&&ZA(i,n),n}function tR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],SE(t,r));const i=a(e,["config"]);return i!=null&&jA(i,n),n}function nR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],xn(t,r)),n}function rR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],xn(t,r)),n}function iR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function oR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function sR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function lR(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aR(t){const e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);const r=a(t,["mode"]);if(r!=null&&c(e,["mode"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uR(t){const e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function cR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],xn(t,r)),n}function dR(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],xn(t,r)),n}function fR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function hR(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function pR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function mR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function gR(t){const e={},n=a(t,["config"]);return n!=null&&pR(n,e),e}function yR(t){const e={},n=a(t,["config"]);return n!=null&&mR(n,e),e}function vR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function _R(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function ER(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],sR(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],lR(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],XA(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function TR(t){const e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);const r=a(t,["functionCallingConfig"]);return r!=null&&c(e,["functionCallingConfig"],aR(r)),e}function IR(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],fR(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],hR(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function SR(t){const e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);const r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(t,["codeExecution"]);i!=null&&c(e,["codeExecution"],i);const o=a(t,["enterpriseWebSearch"]);o!=null&&c(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>uR(m))),c(e,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);const f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function wR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function CR(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function AR(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],xn(t,r));const i=a(e,["config"]);return i!=null&&wR(i,n),n}function RR(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],xn(t,r));const i=a(e,["config"]);return i!=null&&CR(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PR extends Nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vr(wn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=tR(this.apiClient,e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=eR(this.apiClient,e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=dR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=cR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=rR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=oR(h),m=new Bg;return Object.assign(m,p),m})}else{const f=nR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=iR(h),m=new Bg;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=RR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=AR(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=yR(e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=_R(h),m=new Gg;return Object.assign(m,p),m})}else{const f=gR(e);return l=z("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=vR(h),m=new Gg;return Object.assign(m,p),m})}}}function la(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t){return this instanceof Z?(this.v=t,this):new Z(t)}function Zt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(S){return Promise.resolve(S).then(v,p)}}function l(v,S){r[v]&&(i[v]=function(P){return new Promise(function(x,I){o.push([v,P,x,I])>1||u(v,P)})},S&&(i[v]=S(i[v])))}function u(v,S){try{f(r[v](S))}catch(P){m(o[0][3],P)}}function f(v){v.value instanceof Z?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,S){v(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function jt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jg=="function"?Jg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:FE(n)}function FE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function xR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yg(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!FE(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class kR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new MR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class MR{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),xR(o)}async sendMessage(e){var n;await this.sendPromise;const r=at(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await i,f=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const v=f?[f]:[];this.recordHistory(r,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=at(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Yg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Zt(this,arguments,function*(){var i,o,s,l,u,f;const h=[];try{for(var p=!0,m=jt(e),v;v=yield Z(m.next()),i=v.done,!i;p=!0){l=v.value,p=!1;const S=l;if(NR(S)){const P=(f=(u=S.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content;P!==void 0&&h.push(P)}yield yield Z(S)}}catch(S){o={error:S}}finally{try{!p&&!i&&(s=m.return)&&(yield Z(s.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Yg(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class es extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,es.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DR(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function VR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function LR(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],NE(n)),e}function FR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function UR(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],NE(n)),e}function bR(t){const e={},n=a(t,["uris"]);return n!=null&&c(e,["uris"],n),e}function OR(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function BR(t){const e={},n=a(t,["config"]);return n!=null&&OR(n,e),e}function GR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["files"],o)}return e}function HR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qR extends Nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vr(wn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=BR(e);return o=z("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=GR(u),h=new zC;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DR(e);return o=z("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=VR(u),h=new $C;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UR(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=LR(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=FR(u),h=new KC;return Object.assign(h,f),h})}}async registerFilesInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bR(e);return o=z("files:register",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=HR(u),h=new WC;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Al(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function zR(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sP(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function $R(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function KR(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WR(t){const e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function JR(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const v=a(t,["responseMimeType"]);v!=null&&c(e,["responseMimeType"],v);const S=a(t,["responseModalities"]);S!=null&&c(e,["responseModalities"],S);const P=a(t,["responseSchema"]);P!=null&&c(e,["responseSchema"],P);const x=a(t,["routingConfig"]);x!=null&&c(e,["routingConfig"],x);const I=a(t,["seed"]);I!=null&&c(e,["seed"],I);const T=a(t,["speechConfig"]);T!=null&&c(e,["speechConfig"],T);const A=a(t,["stopSequences"]);A!=null&&c(e,["stopSequences"],A);const M=a(t,["temperature"]);M!=null&&c(e,["temperature"],M);const V=a(t,["thinkingConfig"]);V!=null&&c(e,["thinkingConfig"],V);const b=a(t,["topK"]);b!=null&&c(e,["topK"],b);const C=a(t,["topP"]);if(C!=null&&c(e,["topP"],C),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function QR(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function XR(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],bf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=a(t,["systemInstruction"]);e!==void 0&&S!=null&&c(e,["setup","systemInstruction"],zR(at(S)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let b=Ui(P);Array.isArray(b)&&(b=b.map(C=>aP(Fi(C)))),c(e,["setup","tools"],b)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],lP(x));const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);if(e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ZR(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],JR(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],bf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=a(t,["systemInstruction"]);e!==void 0&&S!=null&&c(e,["setup","systemInstruction"],at(S));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let C=Ui(P);Array.isArray(C)&&(C=C.map(E=>uP(Fi(E)))),c(e,["setup","tools"],C)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],x);const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);e!==void 0&&V!=null&&c(e,["setup","proactivity"],V);const b=a(t,["explicitVadSignal"]);return e!==void 0&&b!=null&&c(e,["setup","explicitVadSignal"],b),n}function jR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],XR(i,n)),n}function eP(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],ZR(i,n)),n}function tP(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function nP(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["weightedPrompts"],r)}return e}function rP(t){const e={},n=a(t,["media"]);if(n!=null){let f=wE(n);Array.isArray(f)&&(f=f.map(h=>Al(h))),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],Al(AE(r)));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],Al(CE(o)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function iP(t){const e={},n=a(t,["media"]);if(n!=null){let f=wE(n);Array.isArray(f)&&(f=f.map(h=>h)),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],AE(r));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],CE(o));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function oP(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&c(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&c(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],cP(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);const f=a(t,["voiceActivityDetectionSignal"]);f!=null&&c(e,["voiceActivityDetectionSignal"],f);const h=a(t,["voiceActivity"]);return h!=null&&c(e,["voiceActivity"],dP(h)),e}function sP(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],$R(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],KR(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Al(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function lP(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aP(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],YR(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],QR(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function uP(t){const e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);const r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(t,["codeExecution"]);i!=null&&c(e,["codeExecution"],i);const o=a(t,["enterpriseWebSearch"]);o!=null&&c(e,["enterpriseWebSearch"],o);const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>WR(m))),c(e,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);const f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function cP(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&c(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&c(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(S=>S)),c(e,["promptTokensDetails"],v)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(S=>S)),c(e,["cacheTokensDetails"],v)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(S=>S)),c(e,["responseTokensDetails"],v)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>S)),c(e,["toolUsePromptTokensDetails"],v)}const m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}function dP(t){const e={},n=a(t,["type"]);return n!=null&&c(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fP(t,e){const n={},r=a(t,["data"]);if(r!=null&&c(n,["data"],r),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function hP(t,e){const n={},r=a(t,["content"]);r!=null&&c(n,["content"],r);const i=a(t,["citationMetadata"]);i!=null&&c(n,["citationMetadata"],pP(i));const o=a(t,["tokenCount"]);o!=null&&c(n,["tokenCount"],o);const s=a(t,["finishReason"]);s!=null&&c(n,["finishReason"],s);const l=a(t,["avgLogprobs"]);l!=null&&c(n,["avgLogprobs"],l);const u=a(t,["groundingMetadata"]);u!=null&&c(n,["groundingMetadata"],u);const f=a(t,["index"]);f!=null&&c(n,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&c(n,["logprobsResult"],h);const p=a(t,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>S)),c(n,["safetyRatings"],v)}const m=a(t,["urlContextMetadata"]);return m!=null&&c(n,["urlContextMetadata"],m),n}function pP(t,e){const n={},r=a(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["citations"],i)}return n}function mP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let s=Ft(o);Array.isArray(s)&&(s=s.map(l=>l)),c(r,["contents"],s)}return r}function gP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["tokensInfo"],o)}return n}function yP(t,e){const n={},r=a(t,["values"]);r!=null&&c(n,["values"],r);const i=a(t,["statistics"]);return i!=null&&c(n,["statistics"],vP(i)),n}function vP(t,e){const n={},r=a(t,["truncated"]);r!=null&&c(n,["truncated"],r);const i=a(t,["token_count"]);return i!=null&&c(n,["tokenCount"],i),n}function Oa(t,e){const n={},r=a(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>RN(s))),c(n,["parts"],o)}const i=a(t,["role"]);return i!=null&&c(n,["role"],i),n}function _P(t,e){const n={},r=a(t,["controlType"]);r!=null&&c(n,["controlType"],r);const i=a(t,["enableControlImageComputation"]);return i!=null&&c(n,["computeControl"],i),n}function EP(t,e){const n={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function TP(t,e,n){const r={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],at(i));const o=a(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>BE(u))),c(e,["tools"],l)}const s=a(t,["generationConfig"]);return e!==void 0&&s!=null&&c(e,["generationConfig"],fN(s)),r}function IP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ft(o);Array.isArray(l)&&(l=l.map(u=>Oa(u))),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&EP(s),r}function SP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ft(o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&TP(s,r),r}function wP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["totalTokens"]);i!=null&&c(n,["totalTokens"],i);const o=a(t,["cachedContentTokenCount"]);return o!=null&&c(n,["cachedContentTokenCount"],o),n}function CP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["totalTokens"]);return i!=null&&c(n,["totalTokens"],i),n}function AP(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function RP(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function PP(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function NP(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function xP(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&c(e,["parameters","guidanceScale"],u);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["parameters","seed"],f);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&c(e,["parameters","includeSafetyAttributes"],m);const v=a(t,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const S=a(t,["language"]);e!==void 0&&S!=null&&c(e,["parameters","language"],S);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","compressionQuality"],x);const I=a(t,["addWatermark"]);e!==void 0&&I!=null&&c(e,["parameters","addWatermark"],I);const T=a(t,["labels"]);e!==void 0&&T!=null&&c(e,["labels"],T);const A=a(t,["editMode"]);e!==void 0&&A!=null&&c(e,["parameters","editMode"],A);const M=a(t,["baseSteps"]);return e!==void 0&&M!=null&&c(e,["parameters","editConfig","baseSteps"],M),r}function kP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>DN(f))),c(r,["instances[0]","referenceImages"],u)}const l=a(e,["config"]);return l!=null&&xP(l,r),r}function MP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ba(s))),c(n,["generatedImages"],o)}return n}function DP(t,e,n){const r={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function VP(t,e,n){const r={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);const s=a(t,["outputDimensionality"]);e!==void 0&&s!=null&&c(e,["parameters","outputDimensionality"],s);const l=a(t,["mimeType"]);e!==void 0&&l!=null&&c(e,["instances[]","mimeType"],l);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&c(e,["parameters","autoTruncate"],u),r}function LP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let u=Lf(t,o);Array.isArray(u)&&(u=u.map(f=>f)),c(r,["requests[]","content"],u)}const s=a(e,["config"]);s!=null&&DP(s,r);const l=a(e,["model"]);return l!==void 0&&c(r,["requests[]","model"],de(t,l)),r}function FP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Lf(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["instances[]","content"],l)}const s=a(e,["config"]);return s!=null&&VP(s,r),r}function UP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),c(n,["embeddings"],s)}const o=a(t,["metadata"]);return o!=null&&c(n,["metadata"],o),n}function bP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>yP(l))),c(n,["embeddings"],s)}const o=a(t,["metadata"]);return o!=null&&c(n,["metadata"],o),n}function OP(t,e){const n={},r=a(t,["endpoint"]);r!=null&&c(n,["name"],r);const i=a(t,["deployedModelId"]);return i!=null&&c(n,["deployedModelId"],i),n}function BP(t,e){const n={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["fileUri"]);r!=null&&c(n,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function GP(t,e){const n={},r=a(t,["id"]);r!=null&&c(n,["id"],r);const i=a(t,["args"]);i!=null&&c(n,["args"],i);const o=a(t,["name"]);if(o!=null&&c(n,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function HP(t,e){const n={},r=a(t,["allowedFunctionNames"]);r!=null&&c(n,["allowedFunctionNames"],r);const i=a(t,["mode"]);if(i!=null&&c(n,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function qP(t,e){const n={},r=a(t,["description"]);r!=null&&c(n,["description"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["parameters"]);o!=null&&c(n,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&c(n,["parametersJsonSchema"],s);const l=a(t,["response"]);l!=null&&c(n,["response"],l);const u=a(t,["responseJsonSchema"]);if(u!=null&&c(n,["responseJsonSchema"],u),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function zP(t,e,n,r){const i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],Oa(at(o)));const s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);const l=a(e,["topP"]);l!=null&&c(i,["topP"],l);const u=a(e,["topK"]);u!=null&&c(i,["topK"],u);const f=a(e,["candidateCount"]);f!=null&&c(i,["candidateCount"],f);const h=a(e,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const p=a(e,["stopSequences"]);p!=null&&c(i,["stopSequences"],p);const m=a(e,["responseLogprobs"]);m!=null&&c(i,["responseLogprobs"],m);const v=a(e,["logprobs"]);v!=null&&c(i,["logprobs"],v);const S=a(e,["presencePenalty"]);S!=null&&c(i,["presencePenalty"],S);const P=a(e,["frequencyPenalty"]);P!=null&&c(i,["frequencyPenalty"],P);const x=a(e,["seed"]);x!=null&&c(i,["seed"],x);const I=a(e,["responseMimeType"]);I!=null&&c(i,["responseMimeType"],I);const T=a(e,["responseSchema"]);T!=null&&c(i,["responseSchema"],Ff(T));const A=a(e,["responseJsonSchema"]);if(A!=null&&c(i,["responseJsonSchema"],A),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=a(e,["safetySettings"]);if(n!==void 0&&M!=null){let fe=M;Array.isArray(fe)&&(fe=fe.map(Ze=>VN(Ze))),c(n,["safetySettings"],fe)}const V=a(e,["tools"]);if(n!==void 0&&V!=null){let fe=Ui(V);Array.isArray(fe)&&(fe=fe.map(Ze=>GN(Fi(Ze)))),c(n,["tools"],fe)}const b=a(e,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],BN(b)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=a(e,["cachedContent"]);n!==void 0&&C!=null&&c(n,["cachedContent"],xn(t,C));const E=a(e,["responseModalities"]);E!=null&&c(i,["responseModalities"],E);const w=a(e,["mediaResolution"]);w!=null&&c(i,["mediaResolution"],w);const R=a(e,["speechConfig"]);if(R!=null&&c(i,["speechConfig"],Uf(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=a(e,["thinkingConfig"]);k!=null&&c(i,["thinkingConfig"],k);const D=a(e,["imageConfig"]);D!=null&&c(i,["imageConfig"],yN(D));const N=a(e,["enableEnhancedCivicAnswers"]);if(N!=null&&c(i,["enableEnhancedCivicAnswers"],N),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function $P(t,e,n,r){const i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],at(o));const s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);const l=a(e,["topP"]);l!=null&&c(i,["topP"],l);const u=a(e,["topK"]);u!=null&&c(i,["topK"],u);const f=a(e,["candidateCount"]);f!=null&&c(i,["candidateCount"],f);const h=a(e,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const p=a(e,["stopSequences"]);p!=null&&c(i,["stopSequences"],p);const m=a(e,["responseLogprobs"]);m!=null&&c(i,["responseLogprobs"],m);const v=a(e,["logprobs"]);v!=null&&c(i,["logprobs"],v);const S=a(e,["presencePenalty"]);S!=null&&c(i,["presencePenalty"],S);const P=a(e,["frequencyPenalty"]);P!=null&&c(i,["frequencyPenalty"],P);const x=a(e,["seed"]);x!=null&&c(i,["seed"],x);const I=a(e,["responseMimeType"]);I!=null&&c(i,["responseMimeType"],I);const T=a(e,["responseSchema"]);T!=null&&c(i,["responseSchema"],Ff(T));const A=a(e,["responseJsonSchema"]);A!=null&&c(i,["responseJsonSchema"],A);const M=a(e,["routingConfig"]);M!=null&&c(i,["routingConfig"],M);const V=a(e,["modelSelectionConfig"]);V!=null&&c(i,["modelConfig"],V);const b=a(e,["safetySettings"]);if(n!==void 0&&b!=null){let O=b;Array.isArray(O)&&(O=O.map(K=>K)),c(n,["safetySettings"],O)}const C=a(e,["tools"]);if(n!==void 0&&C!=null){let O=Ui(C);Array.isArray(O)&&(O=O.map(K=>BE(Fi(K)))),c(n,["tools"],O)}const E=a(e,["toolConfig"]);n!==void 0&&E!=null&&c(n,["toolConfig"],E);const w=a(e,["labels"]);n!==void 0&&w!=null&&c(n,["labels"],w);const R=a(e,["cachedContent"]);n!==void 0&&R!=null&&c(n,["cachedContent"],xn(t,R));const k=a(e,["responseModalities"]);k!=null&&c(i,["responseModalities"],k);const D=a(e,["mediaResolution"]);D!=null&&c(i,["mediaResolution"],D);const N=a(e,["speechConfig"]);N!=null&&c(i,["speechConfig"],Uf(N));const fe=a(e,["audioTimestamp"]);fe!=null&&c(i,["audioTimestamp"],fe);const Ze=a(e,["thinkingConfig"]);Ze!=null&&c(i,["thinkingConfig"],Ze);const te=a(e,["imageConfig"]);if(te!=null&&c(i,["imageConfig"],vN(te)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ne=a(e,["modelArmorConfig"]);return n!==void 0&&ne!=null&&c(n,["modelArmorConfig"],ne),i}function Qg(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ft(o);Array.isArray(l)&&(l=l.map(u=>Oa(u))),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&c(r,["generationConfig"],zP(t,s,r)),r}function Xg(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["contents"]);if(o!=null){let l=Ft(o);Array.isArray(l)&&(l=l.map(u=>u)),c(r,["contents"],l)}const s=a(e,["config"]);return s!=null&&c(r,["generationConfig"],$P(t,s,r)),r}function Zg(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>hP(h))),c(n,["candidates"],f)}const o=a(t,["modelVersion"]);o!=null&&c(n,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&c(n,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(n,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(n,["usageMetadata"],u),n}function jg(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>p)),c(n,["candidates"],h)}const o=a(t,["createTime"]);o!=null&&c(n,["createTime"],o);const s=a(t,["modelVersion"]);s!=null&&c(n,["modelVersion"],s);const l=a(t,["promptFeedback"]);l!=null&&c(n,["promptFeedback"],l);const u=a(t,["responseId"]);u!=null&&c(n,["responseId"],u);const f=a(t,["usageMetadata"]);return f!=null&&c(n,["usageMetadata"],f),n}function KP(t,e,n){const r={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const s=a(t,["guidanceScale"]);if(e!==void 0&&s!=null&&c(e,["parameters","guidanceScale"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const f=a(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&c(e,["parameters","includeSafetyAttributes"],f);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const p=a(t,["language"]);e!==void 0&&p!=null&&c(e,["parameters","language"],p);const m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&c(e,["parameters","outputOptions","mimeType"],m);const v=a(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&c(e,["parameters","outputOptions","compressionQuality"],v),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=a(t,["imageSize"]);if(e!==void 0&&S!=null&&c(e,["parameters","sampleImageSize"],S),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function WP(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&c(e,["parameters","guidanceScale"],u);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["parameters","seed"],f);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&c(e,["parameters","includeSafetyAttributes"],m);const v=a(t,["includeRaiReason"]);e!==void 0&&v!=null&&c(e,["parameters","includeRaiReason"],v);const S=a(t,["language"]);e!==void 0&&S!=null&&c(e,["parameters","language"],S);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","compressionQuality"],x);const I=a(t,["addWatermark"]);e!==void 0&&I!=null&&c(e,["parameters","addWatermark"],I);const T=a(t,["labels"]);e!==void 0&&T!=null&&c(e,["labels"],T);const A=a(t,["imageSize"]);e!==void 0&&A!=null&&c(e,["parameters","sampleImageSize"],A);const M=a(t,["enhancePrompt"]);return e!==void 0&&M!=null&&c(e,["parameters","enhancePrompt"],M),r}function JP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["config"]);return s!=null&&KP(s,r),r}function YP(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["config"]);return s!=null&&WP(s,r),r}function QP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>aN(l))),c(n,["generatedImages"],s)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(n,["positivePromptSafetyAttributes"],bE(o)),n}function XP(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Ba(l))),c(n,["generatedImages"],s)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(n,["positivePromptSafetyAttributes"],OE(o)),n}function ZP(t,e,n){const r={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["resolution"]);e!==void 0&&l!=null&&c(e,["parameters","resolution"],l);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=a(t,["negativePrompt"]);e!==void 0&&f!=null&&c(e,["parameters","negativePrompt"],f);const h=a(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(t,["lastFrame"]);e!==void 0&&p!=null&&c(e,["instances[0]","lastFrame"],Ga(p));const m=a(t,["referenceImages"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(S=>ex(S))),c(e,["instances[0]","referenceImages"],v)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function jP(t,e,n){const r={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=a(t,["fps"]);e!==void 0&&s!=null&&c(e,["parameters","fps"],s);const l=a(t,["durationSeconds"]);e!==void 0&&l!=null&&c(e,["parameters","durationSeconds"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=a(t,["resolution"]);e!==void 0&&h!=null&&c(e,["parameters","resolution"],h);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const m=a(t,["pubsubTopic"]);e!==void 0&&m!=null&&c(e,["parameters","pubsubTopic"],m);const v=a(t,["negativePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","negativePrompt"],v);const S=a(t,["enhancePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S);const P=a(t,["generateAudio"]);e!==void 0&&P!=null&&c(e,["parameters","generateAudio"],P);const x=a(t,["lastFrame"]);e!==void 0&&x!=null&&c(e,["instances[0]","lastFrame"],tn(x));const I=a(t,["referenceImages"]);if(e!==void 0&&I!=null){let M=I;Array.isArray(M)&&(M=M.map(V=>tx(V))),c(e,["instances[0]","referenceImages"],M)}const T=a(t,["mask"]);e!==void 0&&T!=null&&c(e,["instances[0]","mask"],jN(T));const A=a(t,["compressionQuality"]);return e!==void 0&&A!=null&&c(e,["parameters","compressionQuality"],A),r}function eN(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const o=a(t,["done"]);o!=null&&c(n,["done"],o);const s=a(t,["error"]);s!=null&&c(n,["error"],s);const l=a(t,["response","generateVideoResponse"]);return l!=null&&c(n,["response"],iN(l)),n}function tN(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const o=a(t,["done"]);o!=null&&c(n,["done"],o);const s=a(t,["error"]);s!=null&&c(n,["error"],s);const l=a(t,["response"]);return l!=null&&c(n,["response"],oN(l)),n}function nN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["image"]);s!=null&&c(r,["instances[0]","image"],Ga(s));const l=a(e,["video"]);l!=null&&c(r,["instances[0]","video"],GE(l));const u=a(e,["source"]);u!=null&&sN(u,r);const f=a(e,["config"]);return f!=null&&ZP(f,r),r}function rN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["prompt"]);o!=null&&c(r,["instances[0]","prompt"],o);const s=a(e,["image"]);s!=null&&c(r,["instances[0]","image"],tn(s));const l=a(e,["video"]);l!=null&&c(r,["instances[0]","video"],HE(l));const u=a(e,["source"]);u!=null&&lN(u,r);const f=a(e,["config"]);return f!=null&&jP(f,r),r}function iN(t,e){const n={},r=a(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>cN(l))),c(n,["generatedVideos"],s)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(n,["raiMediaFilteredCount"],i);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function oN(t,e){const n={},r=a(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>dN(l))),c(n,["generatedVideos"],s)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(n,["raiMediaFilteredCount"],i);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(n,["raiMediaFilteredReasons"],o),n}function sN(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Ga(o));const s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],GE(s)),r}function lN(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],tn(o));const s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],HE(s)),r}function aN(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["image"],_N(r));const i=a(t,["raiFilteredReason"]);i!=null&&c(n,["raiFilteredReason"],i);const o=a(t,["_self"]);return o!=null&&c(n,["safetyAttributes"],bE(o)),n}function Ba(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["image"],UE(r));const i=a(t,["raiFilteredReason"]);i!=null&&c(n,["raiFilteredReason"],i);const o=a(t,["_self"]);o!=null&&c(n,["safetyAttributes"],OE(o));const s=a(t,["prompt"]);return s!=null&&c(n,["enhancedPrompt"],s),n}function uN(t,e){const n={},r=a(t,["_self"]);r!=null&&c(n,["mask"],UE(r));const i=a(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["labels"],o)}return n}function cN(t,e){const n={},r=a(t,["video"]);return r!=null&&c(n,["video"],XN(r)),n}function dN(t,e){const n={},r=a(t,["_self"]);return r!=null&&c(n,["video"],ZN(r)),n}function fN(t,e){const n={},r=a(t,["modelSelectionConfig"]);r!=null&&c(n,["modelConfig"],r);const i=a(t,["responseJsonSchema"]);i!=null&&c(n,["responseJsonSchema"],i);const o=a(t,["audioTimestamp"]);o!=null&&c(n,["audioTimestamp"],o);const s=a(t,["candidateCount"]);s!=null&&c(n,["candidateCount"],s);const l=a(t,["enableAffectiveDialog"]);l!=null&&c(n,["enableAffectiveDialog"],l);const u=a(t,["frequencyPenalty"]);u!=null&&c(n,["frequencyPenalty"],u);const f=a(t,["logprobs"]);f!=null&&c(n,["logprobs"],f);const h=a(t,["maxOutputTokens"]);h!=null&&c(n,["maxOutputTokens"],h);const p=a(t,["mediaResolution"]);p!=null&&c(n,["mediaResolution"],p);const m=a(t,["presencePenalty"]);m!=null&&c(n,["presencePenalty"],m);const v=a(t,["responseLogprobs"]);v!=null&&c(n,["responseLogprobs"],v);const S=a(t,["responseMimeType"]);S!=null&&c(n,["responseMimeType"],S);const P=a(t,["responseModalities"]);P!=null&&c(n,["responseModalities"],P);const x=a(t,["responseSchema"]);x!=null&&c(n,["responseSchema"],x);const I=a(t,["routingConfig"]);I!=null&&c(n,["routingConfig"],I);const T=a(t,["seed"]);T!=null&&c(n,["seed"],T);const A=a(t,["speechConfig"]);A!=null&&c(n,["speechConfig"],A);const M=a(t,["stopSequences"]);M!=null&&c(n,["stopSequences"],M);const V=a(t,["temperature"]);V!=null&&c(n,["temperature"],V);const b=a(t,["thinkingConfig"]);b!=null&&c(n,["thinkingConfig"],b);const C=a(t,["topK"]);C!=null&&c(n,["topK"],C);const E=a(t,["topP"]);if(E!=null&&c(n,["topP"],E),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function hN(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function pN(t,e,n){const r={},i=a(e,["model"]);return i!=null&&c(r,["_url","name"],de(t,i)),r}function mN(t,e){const n={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=a(t,["enableWidget"]);return r!=null&&c(n,["enableWidget"],r),n}function gN(t,e){const n={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=a(t,["timeRangeFilter"]);return r!=null&&c(n,["timeRangeFilter"],r),n}function yN(t,e){const n={},r=a(t,["aspectRatio"]);r!=null&&c(n,["aspectRatio"],r);const i=a(t,["imageSize"]);if(i!=null&&c(n,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function vN(t,e){const n={},r=a(t,["aspectRatio"]);r!=null&&c(n,["aspectRatio"],r);const i=a(t,["imageSize"]);i!=null&&c(n,["imageSize"],i);const o=a(t,["personGeneration"]);o!=null&&c(n,["personGeneration"],o);const s=a(t,["outputMimeType"]);s!=null&&c(n,["imageOutputOptions","mimeType"],s);const l=a(t,["outputCompressionQuality"]);return l!=null&&c(n,["imageOutputOptions","compressionQuality"],l),n}function _N(t,e){const n={},r=a(t,["bytesBase64Encoded"]);r!=null&&c(n,["imageBytes"],lr(r));const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function UE(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["bytesBase64Encoded"]);i!=null&&c(n,["imageBytes"],lr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function Ga(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=a(t,["imageBytes"]);r!=null&&c(n,["bytesBase64Encoded"],lr(r));const i=a(t,["mimeType"]);return i!=null&&c(n,["mimeType"],i),n}function tn(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["imageBytes"]);i!=null&&c(n,["bytesBase64Encoded"],lr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function EN(t,e,n,r){const i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);const l=a(e,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],xE(t,u)),i}function TN(t,e,n,r){const i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);const l=a(e,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&c(n,["_url","models_url"],xE(t,u)),i}function IN(t,e,n){const r={},i=a(e,["config"]);return i!=null&&EN(t,i,r),r}function SN(t,e,n){const r={},i=a(e,["config"]);return i!=null&&TN(t,i,r),r}function wN(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["_self"]);if(o!=null){let s=kE(o);Array.isArray(s)&&(s=s.map(l=>ad(l))),c(n,["models"],s)}return n}function CN(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["_self"]);if(o!=null){let s=kE(o);Array.isArray(s)&&(s=s.map(l=>ud(l))),c(n,["models"],s)}return n}function AN(t,e){const n={},r=a(t,["maskMode"]);r!=null&&c(n,["maskMode"],r);const i=a(t,["segmentationClasses"]);i!=null&&c(n,["maskClasses"],i);const o=a(t,["maskDilation"]);return o!=null&&c(n,["dilation"],o),n}function ad(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["displayName"]);i!=null&&c(n,["displayName"],i);const o=a(t,["description"]);o!=null&&c(n,["description"],o);const s=a(t,["version"]);s!=null&&c(n,["version"],s);const l=a(t,["_self"]);l!=null&&c(n,["tunedModelInfo"],HN(l));const u=a(t,["inputTokenLimit"]);u!=null&&c(n,["inputTokenLimit"],u);const f=a(t,["outputTokenLimit"]);f!=null&&c(n,["outputTokenLimit"],f);const h=a(t,["supportedGenerationMethods"]);h!=null&&c(n,["supportedActions"],h);const p=a(t,["temperature"]);p!=null&&c(n,["temperature"],p);const m=a(t,["maxTemperature"]);m!=null&&c(n,["maxTemperature"],m);const v=a(t,["topP"]);v!=null&&c(n,["topP"],v);const S=a(t,["topK"]);S!=null&&c(n,["topK"],S);const P=a(t,["thinking"]);return P!=null&&c(n,["thinking"],P),n}function ud(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["name"],r);const i=a(t,["displayName"]);i!=null&&c(n,["displayName"],i);const o=a(t,["description"]);o!=null&&c(n,["description"],o);const s=a(t,["versionId"]);s!=null&&c(n,["version"],s);const l=a(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>OP(v))),c(n,["endpoints"],m)}const u=a(t,["labels"]);u!=null&&c(n,["labels"],u);const f=a(t,["_self"]);f!=null&&c(n,["tunedModelInfo"],qN(f));const h=a(t,["defaultCheckpointId"]);h!=null&&c(n,["defaultCheckpointId"],h);const p=a(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>v)),c(n,["checkpoints"],m)}return n}function RN(t,e){const n={},r=a(t,["mediaResolution"]);r!=null&&c(n,["mediaResolution"],r);const i=a(t,["codeExecutionResult"]);i!=null&&c(n,["codeExecutionResult"],i);const o=a(t,["executableCode"]);o!=null&&c(n,["executableCode"],o);const s=a(t,["fileData"]);s!=null&&c(n,["fileData"],BP(s));const l=a(t,["functionCall"]);l!=null&&c(n,["functionCall"],GP(l));const u=a(t,["functionResponse"]);u!=null&&c(n,["functionResponse"],u);const f=a(t,["inlineData"]);f!=null&&c(n,["inlineData"],fP(f));const h=a(t,["text"]);h!=null&&c(n,["text"],h);const p=a(t,["thought"]);p!=null&&c(n,["thought"],p);const m=a(t,["thoughtSignature"]);m!=null&&c(n,["thoughtSignature"],m);const v=a(t,["videoMetadata"]);return v!=null&&c(n,["videoMetadata"],v),n}function PN(t,e){const n={},r=a(t,["productImage"]);return r!=null&&c(n,["image"],tn(r)),n}function NN(t,e,n){const r={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);const s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const h=a(t,["addWatermark"]);e!==void 0&&h!=null&&c(e,["parameters","addWatermark"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m);const v=a(t,["enhancePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","enhancePrompt"],v);const S=a(t,["labels"]);return e!==void 0&&S!=null&&c(e,["labels"],S),r}function xN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["source"]);o!=null&&MN(o,r);const s=a(e,["config"]);return s!=null&&NN(s,r),r}function kN(t,e){const n={},r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ba(o))),c(n,["generatedImages"],i)}return n}function MN(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],tn(o));const s=a(t,["productImages"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>PN(u))),c(e,["instances[0]","productImages"],l)}return r}function DN(t,e){const n={},r=a(t,["referenceImage"]);r!=null&&c(n,["referenceImage"],tn(r));const i=a(t,["referenceId"]);i!=null&&c(n,["referenceId"],i);const o=a(t,["referenceType"]);o!=null&&c(n,["referenceType"],o);const s=a(t,["maskImageConfig"]);s!=null&&c(n,["maskImageConfig"],AN(s));const l=a(t,["controlImageConfig"]);l!=null&&c(n,["controlImageConfig"],_P(l));const u=a(t,["styleImageConfig"]);u!=null&&c(n,["styleImageConfig"],u);const f=a(t,["subjectImageConfig"]);return f!=null&&c(n,["subjectImageConfig"],f),n}function bE(t,e){const n={},r=a(t,["safetyAttributes","categories"]);r!=null&&c(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);i!=null&&c(n,["scores"],i);const o=a(t,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function OE(t,e){const n={},r=a(t,["safetyAttributes","categories"]);r!=null&&c(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);i!=null&&c(n,["scores"],i);const o=a(t,["contentType"]);return o!=null&&c(n,["contentType"],o),n}function VN(t,e){const n={},r=a(t,["category"]);if(r!=null&&c(n,["category"],r),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&c(n,["threshold"],i),n}function LN(t,e){const n={},r=a(t,["image"]);return r!=null&&c(n,["image"],tn(r)),n}function FN(t,e,n){const r={},i=a(t,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);const o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);const s=a(t,["confidenceThreshold"]);e!==void 0&&s!=null&&c(e,["parameters","confidenceThreshold"],s);const l=a(t,["maskDilation"]);e!==void 0&&l!=null&&c(e,["parameters","maskDilation"],l);const u=a(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&c(e,["parameters","binaryColorThreshold"],u);const f=a(t,["labels"]);return e!==void 0&&f!=null&&c(e,["labels"],f),r}function UN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["source"]);o!=null&&ON(o,r);const s=a(e,["config"]);return s!=null&&FN(s,r),r}function bN(t,e){const n={},r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>uN(o))),c(n,["generatedMasks"],i)}return n}function ON(t,e,n){const r={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],tn(o));const s=a(t,["scribbleImage"]);return e!==void 0&&s!=null&&c(e,["instances[0]","scribble"],LN(s)),r}function BN(t,e){const n={},r=a(t,["retrievalConfig"]);r!=null&&c(n,["retrievalConfig"],r);const i=a(t,["functionCallingConfig"]);return i!=null&&c(n,["functionCallingConfig"],HP(i)),n}function GN(t,e){const n={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["computerUse"]);r!=null&&c(n,["computerUse"],r);const i=a(t,["fileSearch"]);i!=null&&c(n,["fileSearch"],i);const o=a(t,["codeExecution"]);if(o!=null&&c(n,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=a(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),c(n,["functionDeclarations"],p)}const l=a(t,["googleMaps"]);l!=null&&c(n,["googleMaps"],mN(l));const u=a(t,["googleSearch"]);u!=null&&c(n,["googleSearch"],gN(u));const f=a(t,["googleSearchRetrieval"]);f!=null&&c(n,["googleSearchRetrieval"],f);const h=a(t,["urlContext"]);return h!=null&&c(n,["urlContext"],h),n}function BE(t,e){const n={},r=a(t,["retrieval"]);r!=null&&c(n,["retrieval"],r);const i=a(t,["computerUse"]);if(i!=null&&c(n,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=a(t,["codeExecution"]);o!=null&&c(n,["codeExecution"],o);const s=a(t,["enterpriseWebSearch"]);s!=null&&c(n,["enterpriseWebSearch"],s);const l=a(t,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>qP(v))),c(n,["functionDeclarations"],m)}const u=a(t,["googleMaps"]);u!=null&&c(n,["googleMaps"],u);const f=a(t,["googleSearch"]);f!=null&&c(n,["googleSearch"],f);const h=a(t,["googleSearchRetrieval"]);h!=null&&c(n,["googleSearchRetrieval"],h);const p=a(t,["urlContext"]);return p!=null&&c(n,["urlContext"],p),n}function HN(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["createTime"]);i!=null&&c(n,["createTime"],i);const o=a(t,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function qN(t,e){const n={},r=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["createTime"]);i!=null&&c(n,["createTime"],i);const o=a(t,["updateTime"]);return o!=null&&c(n,["updateTime"],o),n}function zN(t,e,n){const r={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),r}function $N(t,e,n){const r={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),r}function KN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","name"],de(t,i));const o=a(e,["config"]);return o!=null&&zN(o,r),r}function WN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["config"]);return o!=null&&$N(o,r),r}function JN(t,e,n){const r={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);const s=a(t,["personGeneration"]);e!==void 0&&s!=null&&c(e,["parameters","personGeneration"],s);const l=a(t,["includeRaiReason"]);e!==void 0&&l!=null&&c(e,["parameters","includeRaiReason"],l);const u=a(t,["outputMimeType"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","mimeType"],u);const f=a(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","compressionQuality"],f);const h=a(t,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const p=a(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=a(t,["labels"]);e!==void 0&&m!=null&&c(e,["labels"],m);const v=a(t,["numberOfImages"]);e!==void 0&&v!=null&&c(e,["parameters","sampleCount"],v);const S=a(t,["mode"]);return e!==void 0&&S!=null&&c(e,["parameters","mode"],S),r}function YN(t,e,n){const r={},i=a(e,["model"]);i!=null&&c(r,["_url","model"],de(t,i));const o=a(e,["image"]);o!=null&&c(r,["instances[0]","image"],tn(o));const s=a(e,["upscaleFactor"]);s!=null&&c(r,["parameters","upscaleConfig","upscaleFactor"],s);const l=a(e,["config"]);return l!=null&&JN(l,r),r}function QN(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ba(s))),c(n,["generatedImages"],o)}return n}function XN(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["uri"],r);const i=a(t,["encodedVideo"]);i!=null&&c(n,["videoBytes"],lr(i));const o=a(t,["encoding"]);return o!=null&&c(n,["mimeType"],o),n}function ZN(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["uri"],r);const i=a(t,["bytesBase64Encoded"]);i!=null&&c(n,["videoBytes"],lr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}function jN(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["_self"],tn(r));const i=a(t,["maskMode"]);return i!=null&&c(n,["maskMode"],i),n}function ex(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["image"],Ga(r));const i=a(t,["referenceType"]);return i!=null&&c(n,["referenceType"],i),n}function tx(t,e){const n={},r=a(t,["image"]);r!=null&&c(n,["image"],tn(r));const i=a(t,["referenceType"]);return i!=null&&c(n,["referenceType"],i),n}function GE(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["uri"],r);const i=a(t,["videoBytes"]);i!=null&&c(n,["encodedVideo"],lr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["encoding"],o),n}function HE(t,e){const n={},r=a(t,["uri"]);r!=null&&c(n,["gcsUri"],r);const i=a(t,["videoBytes"]);i!=null&&c(n,["bytesBase64Encoded"],lr(i));const o=a(t,["mimeType"]);return o!=null&&c(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nx(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function rx(t){const e={},n=a(t,["config"]);return n!=null&&nx(n,e),e}function ix(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function ox(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&ix(r,e),e}function sx(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function lx(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["customMetadata"],o)}const i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&c(e,["chunkingConfig"],i),n}function ax(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],cx(s)),e}function ux(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const i=a(t,["config"]);return i!=null&&lx(i,e),e}function cx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function dx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function fx(t){const e={},n=a(t,["config"]);return n!=null&&dx(n,e),e}function hx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["fileSearchStores"],o)}return e}function qE(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function px(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&qE(r,e),e}function mx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gx="Content-Type",yx="X-Server-Timeout",vx="User-Agent",cd="x-goog-api-client",_x="1.40.0",Ex=`google-genai-sdk/${_x}`,Tx="v1beta1",Ix="v1beta";class Sx{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Tx}else{if(!this.clientOptions.apiKey)throw new es({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Ix,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===id.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&wx(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ey(i),new od(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ey(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Zt(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:h}=yield Z(i.read());if(f){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(h,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const P=JSON.parse(JSON.stringify(S.error)),x=P.status,I=P.code,T=`got status: ${x}. ${JSON.stringify(S)}`;if(I>=400&&I<600)throw new es({message:T,status:I})}}catch(S){if(S.name==="ApiError")throw S}s+=p;let m=-1,v=0;for(;;){m=-1,v=0;for(const x of u){const I=s.indexOf(x);I!==-1&&(m===-1||I<m)&&(m=I,v=x.length)}if(m===-1)break;const S=s.substring(0,m);s=s.substring(m+v);const P=S.trim();if(P.startsWith(l)){const x=P.substring(l.length).trim();try{const I=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Z(new od(I))}catch(I){throw new Error(`exception parsing stream chunk ${x}. ${I}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Ex+" "+this.clientOptions.userAgentExtra;return e[vx]=n,e[cd]=n,e[gx]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(yx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u={file:i},f=this.getFileName(e),h=z("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,f,u,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&qE(r,p);const m=await this.fetchUploadUrl(f,l,u,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=f==null?void 0:f.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function ey(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new es({message:i,status:n}):new Error(i)}}function wx(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const f=s[u],h=l[u];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[u]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[u]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cx="mcp_used/unknown";let Ax=!1;function zE(t){for(const e of t)if(Rx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Ax}function $E(t){var e;const n=(e=t[cd])!==null&&e!==void 0?e:"";t[cd]=(n+` ${Cx}`).trimStart()}function Rx(t){return t!==null&&typeof t=="object"&&t instanceof Of}function Px(t){return Zt(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield Z(n.listTools({cursor:i}));for(const l of s.tools)yield yield Z(l),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class Of{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Of(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,u=(n=void 0,jt(Px(h))),f;f=await u.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),rA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Nx(t,e,n){const r=new YC;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class xx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=Dx(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(A=>{f=A}),p=e.callbacks,m=function(){f({})},v=this.apiClient,S={onopen:m,onmessage:A=>{Nx(v,p.onmessage,A)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(A){}},P=this.webSocketFactory.create(u,Mx(s),S);P.connect(),await h;const T={setup:{model:de(this.apiClient,e.model)}};return P.send(JSON.stringify(T)),new kx(P,this.apiClient)}}class kx{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nP(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=tP(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(si.PLAY)}pause(){this.sendPlaybackControl(si.PAUSE)}stop(){this.sendPlaybackControl(si.STOP)}resetContext(){this.sendPlaybackControl(si.RESET_CONTEXT)}close(){this.conn.close()}}function Mx(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Dx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Lx(t,e,n){const r=new JC;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=oP(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class Fx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new xx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&zE(e.config.tools)&&$E(p);const m=Bx(p);if(this.apiClient.isVertexAI()){const w=this.apiClient.getProject(),R=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),D=!!w&&!!R||!!k;this.apiClient.getCustomBaseUrl()&&!D?h=u:(h=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h))}else{const w=this.apiClient.getApiKey();let R="BidiGenerateContent",k="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",k="access_token"),h=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${R}?${k}=${w}`}let v=()=>{};const S=new Promise(w=>{v=w}),P=e.callbacks,x=function(){var w;(w=P==null?void 0:P.onopen)===null||w===void 0||w.call(P),v({})},I=this.apiClient,T={onopen:x,onmessage:w=>{Lx(I,P.onmessage,w)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(w){}},A=this.webSocketFactory.create(h,Ox(m),T);A.connect(),await S;let M=de(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const w=this.apiClient.getProject(),R=this.apiClient.getLocation();w&&R&&(M=`projects/${w}/locations/${R}/`+M)}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ia.AUDIO]}:e.config.responseModalities=[ia.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],C=[];for(const w of b)if(this.isCallableTool(w)){const R=w;C.push(await R.tool())}else C.push(w);C.length>0&&(e.config.tools=C);const E={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=eP(this.apiClient,E):V=jR(this.apiClient,E),delete V.config,A.send(JSON.stringify(V)),new bx(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ux={turnComplete:!0};class bx{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ft(n.turns),e.isVertexAI()||(r=r.map(i=>Oa(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Vx)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Ux),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:iP(e)}:n={realtimeInput:rP(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ox(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Bx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ty=10;function ny(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(mi(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function mi(t){return"callTool"in t&&typeof t.callTool=="function"}function Gx(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>mi(i)))!==null&&r!==void 0?r:!1}function ry(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(mi(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function iy(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hx extends Nn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Gx(n)||ny(n.config))return await this.generateContentInternal(u);const f=ry(n);if(f.length>0){const P=f.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let h,p;const m=Ft(u.contents),v=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ty;let S=0;for(;S<v&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const P=h.candidates[0].content,x=[];for(const I of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(mi(I)){const A=await I.callTool(h.functionCalls);x.push(...A)}S++,p={role:"user",parts:x},u.contents=Ft(u.contents),u.contents.push(P),u.contents.push(p),iy(u.config)&&(m.push(P),m.push(p))}return iy(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),ny(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=ry(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(f&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Vr(wn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>mi(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&zE(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),$E(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(mi(s)){const l=s,u=await l.tool();for(const f of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:ty;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(f,h,p){return Zt(this,arguments,function*(){for(var m,v,S,P,x,I;l<o;){s&&(l++,s=!1);const V=yield Z(f.processParamsMaybeAddMcpUsage(p)),b=yield Z(f.generateContentStreamInternal(V)),C=[],E=[];try{for(var T=!0,A=(v=void 0,jt(b)),M;M=yield Z(A.next()),m=M.done,!m;T=!0){P=M.value,T=!1;const w=P;if(yield yield Z(w),w.candidates&&(!((x=w.candidates[0])===null||x===void 0)&&x.content)){E.push(w.candidates[0].content);for(const R of(I=w.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(l<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const k=yield Z(h.get(R.functionCall.name).callTool([R.functionCall]));C.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(w){v={error:w}}finally{try{!T&&!m&&(S=A.return)&&(yield Z(S.call(A)))}finally{if(v)throw v.error}}if(C.length>0){s=!0;const w=new fo;w.candidates=[{content:{role:"user",parts:C}}],yield yield Z(w);const R=[];R.push(...E),R.push({role:"user",parts:C});const k=Ft(p.contents).concat(R);p.contents=k}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=Xg(this.apiClient,e);return l=z("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=jg(h),m=new fo;return Object.assign(m,p),m})}else{const f=Qg(this.apiClient,e);return l=z("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Zg(h),m=new fo;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=Xg(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Zt(this,arguments,function*(){var m,v,S,P;try{for(var x=!0,I=jt(p),T;T=yield Z(I.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const A=P,M=jg(yield Z(A.json()),e);M.sdkHttpResponse={headers:A.headers};const V=new fo;Object.assign(V,M),yield yield Z(V)}}catch(A){v={error:A}}finally{try{!x&&!m&&(S=I.return)&&(yield Z(S.call(I)))}finally{if(v)throw v.error}}})})}else{const f=Qg(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Zt(this,arguments,function*(){var m,v,S,P;try{for(var x=!0,I=jt(p),T;T=yield Z(I.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const A=P,M=Zg(yield Z(A.json()),e);M.sdkHttpResponse={headers:A.headers};const V=new fo;Object.assign(V,M),yield yield Z(V)}}catch(A){v={error:A}}finally{try{!x&&!m&&(S=I.return)&&(yield Z(S.call(I)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=FP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=bP(h),m=new Dg;return Object.assign(m,p),m})}else{const f=LP(this.apiClient,e);return l=z("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=UP(h),m=new Dg;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=YP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=XP(h),m=new Vg;return Object.assign(m,p),m})}else{const f=JP(this.apiClient,e);return l=z("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=QP(h),m=new Vg;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=kP(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=MP(u),h=new FC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=YN(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=QN(u),h=new UC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=xN(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=kN(u),h=new bC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=UN(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=bN(u),h=new OC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=pN(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ud(h))}else{const f=hN(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ad(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=SN(this.apiClient,e);return l=z("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=CN(h),m=new Lg;return Object.assign(m,p),m})}else{const f=IN(this.apiClient,e);return l=z("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=wN(h),m=new Lg;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=WN(this.apiClient,e);return l=z("{model}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ud(h))}else{const f=KN(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ad(h))}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=RP(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=NP(h),m=new Fg;return Object.assign(m,p),m})}else{const f=AP(this.apiClient,e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=PP(h),m=new Fg;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=SP(this.apiClient,e);return l=z("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=CP(h),m=new Ug;return Object.assign(m,p),m})}else{const f=IP(this.apiClient,e);return l=z("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=wP(h),m=new Ug;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=mP(this.apiClient,e);return o=z("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=gP(u),h=new BC;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=rN(this.apiClient,e);return l=z("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=tN(h),m=new oa;return Object.assign(m,p),m})}else{const f=nN(this.apiClient,e);return l=z("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=eN(h),m=new oa;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qx extends Nn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=xC(e);return l=z("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=NC(e);return l=z("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=IC(e);return o=z("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zx(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function $x(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ek(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Kx(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&c(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&c(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],jx(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function Wx(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],Kx(t,r,n)),n}function Jx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Yx(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Qx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Xx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Zx(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],bf(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const S=a(t,["systemInstruction"]);e!==void 0&&S!=null&&c(e,["setup","systemInstruction"],$x(at(S)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let b=Ui(P);Array.isArray(b)&&(b=b.map(C=>nk(Fi(C)))),c(e,["setup","tools"],b)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],tk(x));const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&c(e,["setup","realtimeInputConfig"],A);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);if(e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function jx(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],de(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],Zx(i,n)),n}function ek(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],Jx(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],Yx(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],zx(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function tk(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nk(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);const r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);const i=a(t,["codeExecution"]);if(i!=null&&c(e,["codeExecution"],i),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=a(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}const s=a(t,["googleMaps"]);s!=null&&c(e,["googleMaps"],Qx(s));const l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],Xx(l));const u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rk(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function ik(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=rk(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class ok extends Nn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=Wx(this.apiClient,e);o=z("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=ik(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sk(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function lk(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&sk(r,e),e}function ak(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function uk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function ck(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&uk(r,e),e}function dk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fk extends Nn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Vr(wn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ak(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=lk(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ck(e);return o=z("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=dk(u),h=new GC;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hk extends Nn{constructor(e,n=new fk(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Vr(wn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rx(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sx(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ox(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fx(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=hx(u),h=new HC;return Object.assign(h,f),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=px(e);return o=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=mx(u),h=new qC;return Object.assign(h,f),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ux(e);return o=z("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=ax(u),h=new Df;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let KE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return KE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const pk=()=>KE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const fd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bt extends Error{}class mt extends Bt{constructor(e,n,r,i){super(`${mt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ha({message:r,cause:fd(n)});const o=n;return e===400?new JE(e,o,r,i):e===401?new YE(e,o,r,i):e===403?new QE(e,o,r,i):e===404?new XE(e,o,r,i):e===409?new ZE(e,o,r,i):e===422?new jE(e,o,r,i):e===429?new e0(e,o,r,i):e>=500?new t0(e,o,r,i):new mt(e,o,r,i)}}class hd extends mt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ha extends mt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class WE extends Ha{constructor({message:e}={}){super({message:e??"Request timed out."})}}class JE extends mt{}class YE extends mt{}class QE extends mt{}class XE extends mt{}class ZE extends mt{}class jE extends mt{}class e0 extends mt{}class t0 extends mt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mk=/^[a-z][a-z0-9+.-]*:/i,gk=t=>mk.test(t);let pd=t=>(pd=Array.isArray,pd(t));const yk=pd;let vk=yk;const oy=vk;function _k(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ek(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Tk=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bt(`${t} must be an integer`);if(e<0)throw new Bt(`${t} must be a positive integer`);return e},Ik=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sk=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ck=()=>{var t,e,n,r,i;const o=wk();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zr,"X-Stainless-OS":ly(Deno.build.os),"X-Stainless-Arch":sy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zr,"X-Stainless-OS":ly((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":sy((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Ak();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ak(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const sy=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ly=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let il;const Rk=()=>il??(il=Ck());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function n0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Nk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return n0({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function r0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xk(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kk=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i0=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xu(t,e,n){return i0(),new File(t,e??"unknown_file",n)}function Mk(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Dk=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Vk=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&o0(t),Lk=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Fk(t,e,n){if(i0(),t=await t,Vk(t))return t instanceof File?t:Xu([await t.arrayBuffer()],t.name);if(Lk(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Xu(await md(i),e,n)}const r=await md(t);if(e||(e=Mk(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Xu(r,e,n)}async function md(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(o0(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(Dk(t))try{for(var l=!0,u=jt(t),f;f=await u.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const h=i;s.push(...await md(h))}}catch(h){n={error:h}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const h=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${Uk(t)}`)}return s}function Uk(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s0{constructor(e){this._client=e}}s0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ay=Object.freeze(Object.create(null)),bk=(t=l0)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((h,p,m)=>{var v,S,P;/[?#]/.test(p)&&(i=!0);const x=r[m];let I=(i?encodeURIComponent:t)(""+x);return m!==r.length&&(x==null||typeof x=="object"&&x.toString===((P=Object.getPrototypeOf((S=Object.getPrototypeOf((v=x.hasOwnProperty)!==null&&v!==void 0?v:ay))!==null&&S!==void 0?S:ay))===null||P===void 0?void 0:P.toString))&&(I=x+"",o.push({start:h.length+p.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),h+p+(m===r.length?"":I)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=u.exec(l))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((h,p)=>h.start-p.start),o.length>0){let h=0;const p=o.reduce((m,v)=>{const S=" ".repeat(v.start-h),P="^".repeat(v.length);return h=v.start+v.length,m+S+P},"");throw new Bt(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},ol=bk(l0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a0 extends s0{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=la(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Bt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Bt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ol`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(ol`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(ol`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,l=la(o,["api_version"]);return this._client.get(ol`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}a0._key=Object.freeze(["interactions"]);class u0 extends a0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ok(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let sl;function Bf(t){let e;return(sl??(e=new globalThis.TextEncoder,sl=e.encode.bind(e)))(t)}let ll;function uy(t){let e;return(ll??(e=new globalThis.TextDecoder,ll=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qa{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Bf(e):e;this.buffer=Ok([this.buffer,n]);const r=[];let i;for(;(i=Bk(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(uy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=uy(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}qa.NEWLINE_CHARS=new Set([`
`,"\r"]);qa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Bk(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Gk(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aa={off:0,error:200,warn:300,info:400,debug:500},cy=(t,e,n)=>{if(t){if(Ek(aa,t))return t;ft(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(aa))}`)}};function _o(){}function al(t,e,n){return!e||aa[t]>aa[n]?_o:e[t].bind(e)}const Hk={error:_o,warn:_o,info:_o,debug:_o};let dy=new WeakMap;function ft(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Hk;const i=dy.get(n);if(i&&i[0]===r)return i[1];const o={error:al("error",n,r),warn:al("warn",n,r),info:al("info",n,r),debug:al("debug",n,r)};return dy.set(n,[r,o]),o}const pr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class li{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?ft(r):console;function s(){return Zt(this,arguments,function*(){var u,f,h,p;if(i)throw new Bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,S=jt(qk(e,n)),P;P=yield Z(S.next()),u=P.done,!u;v=!0){p=P.value,v=!1;const x=p;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Z(JSON.parse(x.data))}catch(I){throw o.error("Could not parse message into JSON:",x.data),o.error("From chunk:",x.raw),I}}}catch(x){f={error:x}}finally{try{!v&&!u&&(h=S.return)&&(yield Z(h.call(S)))}finally{if(f)throw f.error}}m=!0}catch(x){if(dd(x))return yield Z(void 0);throw x}finally{m||n.abort()}})}return new li(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return Zt(this,arguments,function*(){var u,f,h,p;const m=new qa,v=r0(e);try{for(var S=!0,P=jt(v),x;x=yield Z(P.next()),u=x.done,!u;S=!0){p=x.value,S=!1;const I=p;for(const T of m.decode(I))yield yield Z(T)}}catch(I){f={error:I}}finally{try{!S&&!u&&(h=P.return)&&(yield Z(h.call(P)))}finally{if(f)throw f.error}}for(const I of m.flush())yield yield Z(I)})}function s(){return Zt(this,arguments,function*(){var u,f,h,p;if(i)throw new Bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var v=!0,S=jt(o()),P;P=yield Z(S.next()),u=P.done,!u;v=!0){p=P.value,v=!1;const x=p;m||x&&(yield yield Z(JSON.parse(x)))}}catch(x){f={error:x}}finally{try{!v&&!u&&(h=S.return)&&(yield Z(h.call(S)))}finally{if(f)throw f.error}}m=!0}catch(x){if(dd(x))return yield Z(void 0);throw x}finally{m||n.abort()}})}return new li(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new li(()=>i(e),this.controller,this.client),new li(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return n0({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=Bf(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function qk(t,e){return Zt(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bt("Attempted to iterate over a response with no body");const l=new $k,u=new qa,f=r0(t.body);try{for(var h=!0,p=jt(zk(f)),m;m=yield Z(p.next()),r=m.done,!r;h=!0){s=m.value,h=!1;const v=s;for(const S of u.decode(v)){const P=l.decode(S);P&&(yield yield Z(P))}}}catch(v){i={error:v}}finally{try{!h&&!r&&(o=p.return)&&(yield Z(o.call(p)))}finally{if(i)throw i.error}}for(const v of u.flush()){const S=l.decode(v);S&&(yield yield Z(S))}})}function zk(t){return Zt(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var l=!0,u=jt(t),f;f=yield Z(u.next()),n=f.done,!n;l=!0){o=f.value,l=!1;const h=o;if(h==null)continue;const p=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?Bf(h):h;let m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let v;for(;(v=Gk(s))!==-1;)yield yield Z(s.slice(0,v)),s=s.slice(v)}}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield Z(i.call(u)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Z(s))})}class $k{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Kk(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Kk(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Wk(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var l;if(e.options.stream)return ft(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):li.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),f=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return ft(t).debug(`[${r}] response parsed`,pr({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gf extends Promise{constructor(e,n,r=Wk){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Gf(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c0=Symbol("brand.privateNullableHeaders");function*Jk(t){if(!t)return;if(c0 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():oy(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=oy(r[1])?r[1]:[r[1]];let s=!1;for(const l of o)l!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,l])}}const ho=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of Jk(r)){const l=o.toLowerCase();i.has(l)||(e.delete(o),i.add(l)),s===null?(e.delete(o),n.add(l)):(e.append(o,s),n.delete(l))}}return{[c0]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zu=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=gC)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d0;class za{constructor(e){var n,r,i,o,s,l,u,{baseURL:f=Zu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=Zu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=la(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:za.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const S="warn";this.logLevel=S,this.logLevel=(s=(o=cy(v.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:cy(Zu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:S,this.fetchOptions=v.fetchOptions,this.maxRetries=(l=v.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=v.fetch)!==null&&u!==void 0?u:Pk(),this.encoder=kk,this._options=v,this.apiKey=h,this.apiVersion=p,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ho([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ho([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ho([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Bt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${zr}`}defaultIdempotencyKey(){return`stainless-node-retry-${pk()}`}makeStatusError(e,n,r,i){return mt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=gk(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return _k(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Gf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const l=await e,u=(i=l.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:f,url:h,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(f,{url:h,options:l});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(ft(this).debug(`[${m}] sending request`,pr({retryOfRequestLogID:r,method:l.method,url:h,options:l,headers:f.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new hd;const P=new AbortController,x=await this.fetchWithTimeout(h,f,p,P).catch(fd),I=Date.now();if(x instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new hd;const M=dd(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return ft(this).info(`[${m}] connection ${M?"timed out":"failed"} - ${A}`),ft(this).debug(`[${m}] connection ${M?"timed out":"failed"} (${A})`,pr({retryOfRequestLogID:r,url:h,durationMs:I-S,message:x.message})),this.retryRequest(l,n,r??m);throw ft(this).info(`[${m}] connection ${M?"timed out":"failed"} - error; no more retries left`),ft(this).debug(`[${m}] connection ${M?"timed out":"failed"} (error; no more retries left)`,pr({retryOfRequestLogID:r,url:h,durationMs:I-S,message:x.message})),M?new WE:new Ha({cause:x})}const T=`[${m}${v}] ${f.method} ${h} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${I-S}ms`;if(!x.ok){const A=await this.shouldRetry(x);if(n&&A){const w=`retrying, ${n} attempts remaining`;return await xk(x.body),ft(this).info(`${T} - ${w}`),ft(this).debug(`[${m}] response error (${w})`,pr({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:I-S})),this.retryRequest(l,n,r??m,x.headers)}const M=A?"error; no more retries left":"error; not retryable";ft(this).info(`${T} - ${M}`);const V=await x.text().catch(w=>fd(w).message),b=Ik(V),C=b?void 0:V;throw ft(this).debug(`[${m}] response error (${M})`,pr({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,message:C,durationMs:Date.now()-S})),this.makeStatusError(x.status,b,C,x.headers)}return ft(this).info(T),ft(this).debug(`[${m}] response start`,pr({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:I-S})),{response:x,options:l,controller:P,requestLogID:m,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:l}=o,u=la(o,["signal","method"]),f=i.abort.bind(i);s&&s.addEventListener("abort",f,{once:!0});const h=setTimeout(f,r),p=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),u);l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const l=i==null?void 0:i.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(s=f)}const u=i==null?void 0:i.get("retry-after");if(u&&!s){const f=parseFloat(u);Number.isNaN(f)?s=Date.parse(u)-Date.now():s=f*1e3}if(!(s&&0<=s&&s<60*1e3)){const f=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Sk(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:l,path:u,query:f,defaultBaseURL:h}=s,p=this.buildURL(u,f,h);"timeout"in s&&Tk("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:l,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=ho([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Rk()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ho([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Nk(e)}:this.encoder({body:e,headers:r})}}za.DEFAULT_TIMEOUT=6e4;class qe extends za{constructor(){super(...arguments),this.interactions=new u0(this)}}d0=qe;qe.GeminiNextGenAPIClient=d0;qe.GeminiNextGenAPIClientError=Bt;qe.APIError=mt;qe.APIConnectionError=Ha;qe.APIConnectionTimeoutError=WE;qe.APIUserAbortError=hd;qe.NotFoundError=XE;qe.ConflictError=ZE;qe.RateLimitError=e0;qe.BadRequestError=JE;qe.AuthenticationError=YE;qe.InternalServerError=t0;qe.PermissionDeniedError=QE;qe.UnprocessableEntityError=jE;qe.toFile=Fk;qe.Interactions=u0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function Qk(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function Xk(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function Zk(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function jk(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&c(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(a(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(a(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(a(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(a(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(a(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(a(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function e1(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec"],ju(V))}else if(i==="PREFERENCE_TUNING"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec"],ju(V))}else if(i==="DISTILLATION"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["distillationSpec"],ju(V))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&c(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],V)}else if(l==="PREFERENCE_TUNING"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],V)}else if(l==="DISTILLATION"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","epochCount"],V)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],V)}else if(u==="PREFERENCE_TUNING"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],V)}else if(u==="DISTILLATION"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","learningRateMultiplier"],V)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],V)}else if(f==="PREFERENCE_TUNING"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],V)}else if(f==="DISTILLATION"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["distillationSpec","exportLastCheckpointOnly"],V)}let h=a(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],V)}else if(h==="PREFERENCE_TUNING"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],V)}else if(h==="DISTILLATION"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","adapterSize"],V)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const V=a(t,["tuningMode"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","tuningMode"],V)}const m=a(t,["customBaseModel"]);e!==void 0&&m!=null&&c(e,["customBaseModel"],m);let v=a(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const V=a(t,["batchSize"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","batchSize"],V)}let S=a(n,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const V=a(t,["learningRate"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRate"],V)}const P=a(t,["labels"]);e!==void 0&&P!=null&&c(e,["labels"],P);const x=a(t,["beta"]);e!==void 0&&x!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],x);const I=a(t,["baseTeacherModel"]);e!==void 0&&I!=null&&c(e,["distillationSpec","baseTeacherModel"],I);const T=a(t,["tunedTeacherModelSource"]);e!==void 0&&T!=null&&c(e,["distillationSpec","tunedTeacherModelSource"],T);const A=a(t,["sftLossWeightMultiplier"]);e!==void 0&&A!=null&&c(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],A);const M=a(t,["outputUri"]);return e!==void 0&&M!=null&&c(e,["outputUri"],M),r}function t1(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&f1(o);const s=a(t,["config"]);return s!=null&&jk(s,n),n}function n1(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&h1(o,n,e);const s=a(t,["config"]);return s!=null&&e1(s,n,e),n}function r1(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function i1(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function o1(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function s1(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function l1(t,e){const n={},r=a(t,["config"]);return r!=null&&o1(r,n),n}function a1(t,e){const n={},r=a(t,["config"]);return r!=null&&s1(r,n),n}function u1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>f0(l))),c(n,["tuningJobs"],s)}return n}function c1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>gd(l))),c(n,["tuningJobs"],s)}return n}function d1(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const i=a(t,["name"]);return i!=null&&c(n,["endpoint"],i),n}function f1(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["examples","examples"],i)}return n}function h1(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["distillationSpec","promptDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["distillationSpec","promptDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function f0(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],PE(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["description"]);h!=null&&c(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],d1(m)),n}function gd(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],PE(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["error"]);h!=null&&c(n,["error"],h);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);const v=a(t,["tunedModel"]);v!=null&&c(n,["tunedModel"],v);const S=a(t,["preTunedModel"]);S!=null&&c(n,["preTunedModel"],S);const P=a(t,["supervisedTuningSpec"]);P!=null&&c(n,["supervisedTuningSpec"],P);const x=a(t,["preferenceOptimizationSpec"]);x!=null&&c(n,["preferenceOptimizationSpec"],x);const I=a(t,["distillationSpec"]);I!=null&&c(n,["distillationSpec"],I);const T=a(t,["tuningDataStats"]);T!=null&&c(n,["tuningDataStats"],T);const A=a(t,["encryptionSpec"]);A!=null&&c(n,["encryptionSpec"],A);const M=a(t,["partnerModelTuningSpec"]);M!=null&&c(n,["partnerModelTuningSpec"],M);const V=a(t,["customBaseModel"]);V!=null&&c(n,["customBaseModel"],V);const b=a(t,["experiment"]);b!=null&&c(n,["experiment"],b);const C=a(t,["labels"]);C!=null&&c(n,["labels"],C);const E=a(t,["outputUri"]);E!=null&&c(n,["outputUri"],E);const w=a(t,["pipelineJob"]);w!=null&&c(n,["pipelineJob"],w);const R=a(t,["serviceAccount"]);R!=null&&c(n,["serviceAccount"],R);const k=a(t,["tunedModelDisplayName"]);k!=null&&c(n,["tunedModelDisplayName"],k);const D=a(t,["veoTuningSpec"]);return D!=null&&c(n,["veoTuningSpec"],D),n}function p1(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function ju(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return i!=null&&c(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m1 extends Nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Vr(wn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:rd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=i1(e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>gd(h))}else{const f=r1(e);return l=z("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>f0(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=a1(e);return l=z("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=c1(h),m=new bg;return Object.assign(m,p),m})}else{const f=l1(e);return l=z("tunedModels",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=u1(h),m=new bg;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=Qk(e);return l=z("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Zk(h),m=new Og;return Object.assign(m,p),m})}else{const f=Yk(e);return l=z("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Xk(h),m=new Og;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=n1(e,e);return o=z("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>gd(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=t1(e);return o=z("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>p1(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g1{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y1=1024*1024*8,v1=3,_1=1e3,E1=2,ua="x-goog-upload-status";async function T1(t,e,n){var r;const i=await h0(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ua])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function I1(t,e,n){var r;const i=await h0(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ua])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=IE(o),l=new Vf;return Object.assign(l,s),l}async function h0(t,e,n){var r,i;let o=0,s=0,l=new od(new Response),u="upload";for(o=t.size;s<o;){const f=Math.min(y1,o-s),h=t.slice(s,s+f);s+f>=o&&(u+=", finalize");let p=0,m=_1;for(;p<v1&&(l=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(f)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[ua]));)p++,await w1(m),m=m*E1;if(s+=f,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[ua])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function S1(t){return{size:t.size,type:t.type}}function w1(t){return new Promise(e=>setTimeout(e,t))}class C1{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T1(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await I1(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A1{create(e,n,r){return new R1(e,n,r)}}class R1{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fy="x-goog-api-key";class P1{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(fy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1="gl-node/";class x1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new qe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=EC(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new P1(this.apiKey);this.apiClient=new Sx({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:N1+"web",uploader:new C1,downloader:new g1}),this.models=new Hx(this.apiClient),this.live=new Fx(this.apiClient,i,new A1),this.batches=new QA(this.apiClient),this.chats=new kR(this.models,this.apiClient),this.caches=new PR(this.apiClient),this.files=new qR(this.apiClient),this.operations=new qx(this.apiClient),this.authTokens=new ok(this.apiClient),this.tunings=new m1(this.apiClient),this.fileSearchStores=new hk(this.apiClient)}}var k1={API_KEY:"GEMINI_API_KEY_BURAYA_YAZILACAK"};const M1=async(t,e)=>{const n=new x1({apiKey:k1.API_KEY}),r=t.map(s=>s.name).join(", "),o=`
    Sen ofis kahve fonunu yneten elenceli, biraz sarkastik ama sevilen bir yapay zekasn.
    
    Durum Raporu:
    Paray veren harika insanlar: ${e.map(s=>s.name).join(", ")||"Henz kimse vermedi :("}
    Henz pamuk elleri cebe atmayanlar: ${r||"Herkes dedi! Harika!"}

    Grev:
    Ofis grubuna (Slack/WhatsApp) atlacak ksa, komik ve tatl-sert bir mesaj yaz. 
    Paray vermeyenleri (isim vermeden genel konuarak ya da ok tatl sitem ederek) demeye tevik et. 
    Kahvenin nemini vurgula. Trk ofis kltrne uygun olsun. Emojiler kullan.
    Maksimum 3 cmle olsun.
  `;try{return(await n.models.generateContent({model:"gemini-3-flash-preview",contents:o,config:{temperature:.8}})).text||"Kahve hayattr, ltfen deme yapalm! "}catch(s){return console.error("Gemini error:",s),"u an yaratclm tkand ama kahve lazm! "}};var hy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},D1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},m0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,f=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|f>>6,v=f&63;u||(v=64,s||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(p0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||p==null)throw new V1;const m=o<<2|l>>4;if(r.push(m),f!==64){const v=l<<4&240|f>>2;if(r.push(v),p!==64){const S=f<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class V1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L1=function(t){const e=p0(t);return m0.encodeByteArray(e,!0)},ca=function(t){return L1(t).replace(/\./g,"")},F1=function(t){try{return m0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=()=>U1().__FIREBASE_DEFAULTS__,O1=()=>{if(typeof process>"u"||typeof hy>"u")return;const t=hy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F1(t[1]);return e&&JSON.parse(e)},Hf=()=>{try{return b1()||O1()||B1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G1=t=>{var e,n;return(n=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},H1=t=>{const e=G1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},g0=()=>{var t;return(t=Hf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ca(JSON.stringify(n)),ca(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K1(){var t;const e=(t=Hf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W1(){return!K1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function Y1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="FirebaseError";class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Q1,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y0.prototype.create)}}class y0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?X1(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Oi(i,l,r)}}function X1(t,e){return t.replace(Z1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Z1=/\{\$([^}]+)}/g;function yd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(py(o)&&py(s)){if(!yd(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function py(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new q1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tM(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eM(t){return t===mr?void 0:t}function tM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const rM={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},iM=le.INFO,oM={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},sM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v0{constructor(e){this.name=e,this._logLevel=iM,this._logHandler=sM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const lM=(t,e)=>e.some(n=>t instanceof n);let my,gy;function aM(){return my||(my=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uM(){return gy||(gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _0=new WeakMap,vd=new WeakMap,E0=new WeakMap,ec=new WeakMap,qf=new WeakMap;function cM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Xn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&_0.set(n,t)}).catch(()=>{}),qf.set(e,t),e}function dM(t){if(vd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});vd.set(t,e)}let _d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fM(t){_d=t(_d)}function hM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tc(this),e,...n);return E0.set(r,e.sort?e.sort():[e]),Xn(r)}:uM().includes(t)?function(...e){return t.apply(tc(this),e),Xn(_0.get(this))}:function(...e){return Xn(t.apply(tc(this),e))}}function pM(t){return typeof t=="function"?hM(t):(t instanceof IDBTransaction&&dM(t),lM(t,aM())?new Proxy(t,_d):t)}function Xn(t){if(t instanceof IDBRequest)return cM(t);if(ec.has(t))return ec.get(t);const e=pM(t);return e!==t&&(ec.set(t,e),qf.set(e,t)),e}const tc=t=>qf.get(t);function mM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=Xn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Xn(s.result),u.oldVersion,u.newVersion,Xn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const gM=["get","getKey","getAll","getAllKeys","count"],yM=["put","add","delete","clear"],nc=new Map;function yy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nc.get(e))return nc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gM.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&u.done]))[0]};return nc.set(e,o),o}fM(t=>({...t,get:(e,n,r)=>yy(e,n)||t.get(e,n,r),has:(e,n)=>!!yy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_M(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _M(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ed="@firebase/app",vy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new v0("@firebase/app"),EM="@firebase/app-compat",TM="@firebase/analytics-compat",IM="@firebase/analytics",SM="@firebase/app-check-compat",wM="@firebase/app-check",CM="@firebase/auth",AM="@firebase/auth-compat",RM="@firebase/database",PM="@firebase/data-connect",NM="@firebase/database-compat",xM="@firebase/functions",kM="@firebase/functions-compat",MM="@firebase/installations",DM="@firebase/installations-compat",VM="@firebase/messaging",LM="@firebase/messaging-compat",FM="@firebase/performance",UM="@firebase/performance-compat",bM="@firebase/remote-config",OM="@firebase/remote-config-compat",BM="@firebase/storage",GM="@firebase/storage-compat",HM="@firebase/firestore",qM="@firebase/vertexai-preview",zM="@firebase/firestore-compat",$M="firebase",KM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="[DEFAULT]",WM={[Ed]:"fire-core",[EM]:"fire-core-compat",[IM]:"fire-analytics",[TM]:"fire-analytics-compat",[wM]:"fire-app-check",[SM]:"fire-app-check-compat",[CM]:"fire-auth",[AM]:"fire-auth-compat",[RM]:"fire-rtdb",[PM]:"fire-data-connect",[NM]:"fire-rtdb-compat",[xM]:"fire-fn",[kM]:"fire-fn-compat",[MM]:"fire-iid",[DM]:"fire-iid-compat",[VM]:"fire-fcm",[LM]:"fire-fcm-compat",[FM]:"fire-perf",[UM]:"fire-perf-compat",[bM]:"fire-rc",[OM]:"fire-rc-compat",[BM]:"fire-gcs",[GM]:"fire-gcs-compat",[HM]:"fire-fst",[zM]:"fire-fst-compat",[qM]:"fire-vertex","fire-js":"fire-js",[$M]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Map,JM=new Map,Id=new Map;function _y(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fa(t){const e=t.name;if(Id.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Id.set(e,t);for(const n of da.values())_y(n,t);for(const n of JM.values())_y(n,t);return!0}function YM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new y0("app","Firebase",QM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=KM;function T0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Td,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zn.create("bad-app-name",{appName:String(i)});if(n||(n=g0()),!n)throw Zn.create("no-options");const o=da.get(i);if(o){if(yd(n,o.options)&&yd(r,o.config))return o;throw Zn.create("duplicate-app",{appName:i})}const s=new nM(i);for(const u of Id.values())s.addComponent(u);const l=new XM(n,r,s);return da.set(i,l),l}function jM(t=Td){const e=da.get(t);if(!e&&t===Td&&g0())return T0();if(!e)throw Zn.create("no-app",{appName:t});return e}function gi(t,e,n){var r;let i=(r=WM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(l.join(" "));return}fa(new ns(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-heartbeat-database",tD=1,rs="firebase-heartbeat-store";let rc=null;function I0(){return rc||(rc=mM(eD,tD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zn.create("idb-open",{originalErrorMessage:t.message})})),rc}async function nD(t){try{const n=(await I0()).transaction(rs),r=await n.objectStore(rs).get(S0(t));return await n.done,r}catch(e){if(e instanceof Oi)Cn.warn(e.message);else{const n=Zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function Ey(t,e){try{const r=(await I0()).transaction(rs,"readwrite");await r.objectStore(rs).put(e,S0(t)),await r.done}catch(n){if(n instanceof Oi)Cn.warn(n.message);else{const r=Zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function S0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=1024,iD=30*24*60*60*1e3;class oD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ty();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=iD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ty(),{heartbeatsToSend:r,unsentEntries:i}=sD(this._heartbeatsCache.heartbeats),o=ca(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cn.warn(n),""}}}function Ty(){return new Date().toISOString().substring(0,10)}function sD(t,e=rD){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Iy(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?Y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Iy(t){return ca(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){fa(new ns("platform-logger",e=>new vM(e),"PRIVATE")),fa(new ns("heartbeat",e=>new oD(e),"PRIVATE")),gi(Ed,vy,t),gi(Ed,vy,"esm2017"),gi("fire-js","")}aD("");var uD="firebase",cD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(uD,cD,"app");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,w0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function w(){}w.prototype=E.prototype,C.D=E.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(R,k,D){for(var N=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)N[fe-2]=arguments[fe];return E.prototype[k].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,E,w){w||(w=0);var R=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)R[k]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(k=0;16>k;++k)R[k]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;E=C.g[0],w=C.g[1],k=C.g[2];var D=C.g[3],N=E+(D^w&(k^D))+R[0]+3614090360&4294967295;E=w+(N<<7&4294967295|N>>>25),N=D+(k^E&(w^k))+R[1]+3905402710&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(w^D&(E^w))+R[2]+606105819&4294967295,k=D+(N<<17&4294967295|N>>>15),N=w+(E^k&(D^E))+R[3]+3250441966&4294967295,w=k+(N<<22&4294967295|N>>>10),N=E+(D^w&(k^D))+R[4]+4118548399&4294967295,E=w+(N<<7&4294967295|N>>>25),N=D+(k^E&(w^k))+R[5]+1200080426&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(w^D&(E^w))+R[6]+2821735955&4294967295,k=D+(N<<17&4294967295|N>>>15),N=w+(E^k&(D^E))+R[7]+4249261313&4294967295,w=k+(N<<22&4294967295|N>>>10),N=E+(D^w&(k^D))+R[8]+1770035416&4294967295,E=w+(N<<7&4294967295|N>>>25),N=D+(k^E&(w^k))+R[9]+2336552879&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(w^D&(E^w))+R[10]+4294925233&4294967295,k=D+(N<<17&4294967295|N>>>15),N=w+(E^k&(D^E))+R[11]+2304563134&4294967295,w=k+(N<<22&4294967295|N>>>10),N=E+(D^w&(k^D))+R[12]+1804603682&4294967295,E=w+(N<<7&4294967295|N>>>25),N=D+(k^E&(w^k))+R[13]+4254626195&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(w^D&(E^w))+R[14]+2792965006&4294967295,k=D+(N<<17&4294967295|N>>>15),N=w+(E^k&(D^E))+R[15]+1236535329&4294967295,w=k+(N<<22&4294967295|N>>>10),N=E+(k^D&(w^k))+R[1]+4129170786&4294967295,E=w+(N<<5&4294967295|N>>>27),N=D+(w^k&(E^w))+R[6]+3225465664&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^w&(D^E))+R[11]+643717713&4294967295,k=D+(N<<14&4294967295|N>>>18),N=w+(D^E&(k^D))+R[0]+3921069994&4294967295,w=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(w^k))+R[5]+3593408605&4294967295,E=w+(N<<5&4294967295|N>>>27),N=D+(w^k&(E^w))+R[10]+38016083&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^w&(D^E))+R[15]+3634488961&4294967295,k=D+(N<<14&4294967295|N>>>18),N=w+(D^E&(k^D))+R[4]+3889429448&4294967295,w=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(w^k))+R[9]+568446438&4294967295,E=w+(N<<5&4294967295|N>>>27),N=D+(w^k&(E^w))+R[14]+3275163606&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^w&(D^E))+R[3]+4107603335&4294967295,k=D+(N<<14&4294967295|N>>>18),N=w+(D^E&(k^D))+R[8]+1163531501&4294967295,w=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(w^k))+R[13]+2850285829&4294967295,E=w+(N<<5&4294967295|N>>>27),N=D+(w^k&(E^w))+R[2]+4243563512&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^w&(D^E))+R[7]+1735328473&4294967295,k=D+(N<<14&4294967295|N>>>18),N=w+(D^E&(k^D))+R[12]+2368359562&4294967295,w=k+(N<<20&4294967295|N>>>12),N=E+(w^k^D)+R[5]+4294588738&4294967295,E=w+(N<<4&4294967295|N>>>28),N=D+(E^w^k)+R[8]+2272392833&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^w)+R[11]+1839030562&4294967295,k=D+(N<<16&4294967295|N>>>16),N=w+(k^D^E)+R[14]+4259657740&4294967295,w=k+(N<<23&4294967295|N>>>9),N=E+(w^k^D)+R[1]+2763975236&4294967295,E=w+(N<<4&4294967295|N>>>28),N=D+(E^w^k)+R[4]+1272893353&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^w)+R[7]+4139469664&4294967295,k=D+(N<<16&4294967295|N>>>16),N=w+(k^D^E)+R[10]+3200236656&4294967295,w=k+(N<<23&4294967295|N>>>9),N=E+(w^k^D)+R[13]+681279174&4294967295,E=w+(N<<4&4294967295|N>>>28),N=D+(E^w^k)+R[0]+3936430074&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^w)+R[3]+3572445317&4294967295,k=D+(N<<16&4294967295|N>>>16),N=w+(k^D^E)+R[6]+76029189&4294967295,w=k+(N<<23&4294967295|N>>>9),N=E+(w^k^D)+R[9]+3654602809&4294967295,E=w+(N<<4&4294967295|N>>>28),N=D+(E^w^k)+R[12]+3873151461&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^w)+R[15]+530742520&4294967295,k=D+(N<<16&4294967295|N>>>16),N=w+(k^D^E)+R[2]+3299628645&4294967295,w=k+(N<<23&4294967295|N>>>9),N=E+(k^(w|~D))+R[0]+4096336452&4294967295,E=w+(N<<6&4294967295|N>>>26),N=D+(w^(E|~k))+R[7]+1126891415&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~w))+R[14]+2878612391&4294967295,k=D+(N<<15&4294967295|N>>>17),N=w+(D^(k|~E))+R[5]+4237533241&4294967295,w=k+(N<<21&4294967295|N>>>11),N=E+(k^(w|~D))+R[12]+1700485571&4294967295,E=w+(N<<6&4294967295|N>>>26),N=D+(w^(E|~k))+R[3]+2399980690&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~w))+R[10]+4293915773&4294967295,k=D+(N<<15&4294967295|N>>>17),N=w+(D^(k|~E))+R[1]+2240044497&4294967295,w=k+(N<<21&4294967295|N>>>11),N=E+(k^(w|~D))+R[8]+1873313359&4294967295,E=w+(N<<6&4294967295|N>>>26),N=D+(w^(E|~k))+R[15]+4264355552&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~w))+R[6]+2734768916&4294967295,k=D+(N<<15&4294967295|N>>>17),N=w+(D^(k|~E))+R[13]+1309151649&4294967295,w=k+(N<<21&4294967295|N>>>11),N=E+(k^(w|~D))+R[4]+4149444226&4294967295,E=w+(N<<6&4294967295|N>>>26),N=D+(w^(E|~k))+R[11]+3174756917&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~w))+R[2]+718787259&4294967295,k=D+(N<<15&4294967295|N>>>17),N=w+(D^(k|~E))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var w=E-this.blockSize,R=this.B,k=this.h,D=0;D<E;){if(k==0)for(;D<=w;)i(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<E;)if(R[k++]=C.charCodeAt(D++),k==this.blockSize){i(this,R),k=0;break}}else for(;D<E;)if(R[k++]=C[D++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var w=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=w&255,w/=256;for(this.u(C),C=Array(16),E=w=0;4>E;++E)for(var R=0;32>R;R+=8)C[w++]=this.g[E]>>>R&255;return C};function o(C,E){var w=l;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=E(C)}function s(C,E){this.h=E;for(var w=[],R=!0,k=C.length-1;0<=k;k--){var D=C[k]|0;R&&D==E||(w[k]=D,R=!1)}this.g=w}var l={};function u(C){return-128<=C&&128>C?o(C,function(E){return new s([E|0],0>E?-1:0)}):new s([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return x(f(-C));for(var E=[],w=1,R=0;C>=w;R++)E[R]=C/w|0,w*=4294967296;return new s(E,0)}function h(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return x(h(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=f(Math.pow(E,8)),R=p,k=0;k<C.length;k+=8){var D=Math.min(8,C.length-k),N=parseInt(C.substring(k,k+D),E);8>D?(D=f(Math.pow(E,D)),R=R.j(D).add(f(N))):(R=R.j(w),R=R.add(f(N)))}return R}var p=u(0),m=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-x(this).m();for(var C=0,E=1,w=0;w<this.g.length;w++){var R=this.i(w);C+=(0<=R?R:4294967296+R)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(P(this))return"-"+x(this).toString(C);for(var E=f(Math.pow(C,6)),w=this,R="";;){var k=M(w,E).g;w=I(w,k.j(E));var D=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=k,S(w))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function P(C){return C.h==-1}t.l=function(C){return C=I(this,C),P(C)?-1:S(C)?0:1};function x(C){for(var E=C.g.length,w=[],R=0;R<E;R++)w[R]=~C.g[R];return new s(w,~C.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],R=0,k=0;k<=E;k++){var D=R+(this.i(k)&65535)+(C.i(k)&65535),N=(D>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);R=N>>>16,D&=65535,N&=65535,w[k]=N<<16|D}return new s(w,w[w.length-1]&-2147483648?-1:0)};function I(C,E){return C.add(x(E))}t.j=function(C){if(S(this)||S(C))return p;if(P(this))return P(C)?x(this).j(x(C)):x(x(this).j(C));if(P(C))return x(this.j(x(C)));if(0>this.l(v)&&0>C.l(v))return f(this.m()*C.m());for(var E=this.g.length+C.g.length,w=[],R=0;R<2*E;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<C.g.length;k++){var D=this.i(R)>>>16,N=this.i(R)&65535,fe=C.i(k)>>>16,Ze=C.i(k)&65535;w[2*R+2*k]+=N*Ze,T(w,2*R+2*k),w[2*R+2*k+1]+=D*Ze,T(w,2*R+2*k+1),w[2*R+2*k+1]+=N*fe,T(w,2*R+2*k+1),w[2*R+2*k+2]+=D*fe,T(w,2*R+2*k+2)}for(R=0;R<E;R++)w[R]=w[2*R+1]<<16|w[2*R];for(R=E;R<2*E;R++)w[R]=0;return new s(w,0)};function T(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function A(C,E){this.g=C,this.h=E}function M(C,E){if(S(E))throw Error("division by zero");if(S(C))return new A(p,p);if(P(C))return E=M(x(C),E),new A(x(E.g),x(E.h));if(P(E))return E=M(C,x(E)),new A(x(E.g),E.h);if(30<C.g.length){if(P(C)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var w=m,R=E;0>=R.l(C);)w=V(w),R=V(R);var k=b(w,1),D=b(R,1);for(R=b(R,2),w=b(w,2);!S(R);){var N=D.add(R);0>=N.l(C)&&(k=k.add(w),D=N),R=b(R,1),w=b(w,1)}return E=I(C,k.j(E)),new A(k,E)}for(k=p;0<=C.l(E);){for(w=Math.max(1,Math.floor(C.m()/E.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=f(w),N=D.j(E);P(N)||0<N.l(C);)w-=R,D=f(w),N=D.j(E);S(D)&&(D=m),k=k.add(D),C=I(C,N)}return new A(k,C)}t.A=function(C){return M(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],R=0;R<E;R++)w[R]=this.i(R)&C.i(R);return new s(w,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],R=0;R<E;R++)w[R]=this.i(R)|C.i(R);return new s(w,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],R=0;R<E;R++)w[R]=this.i(R)^C.i(R);return new s(w,this.h^C.h)};function V(C){for(var E=C.g.length+1,w=[],R=0;R<E;R++)w[R]=C.i(R)<<1|C.i(R-1)>>>31;return new s(w,C.h)}function b(C,E){var w=E>>5;E%=32;for(var R=C.g.length-w,k=[],D=0;D<R;D++)k[D]=0<E?C.i(D+w)>>>E|C.i(D+w+1)<<32-E:C.i(D+w);return new s(k,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,w0=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,Ir=s}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C0,Eo,A0,Rl,Sd,R0,P0,N0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var _=0;_<d.length-1;_++){var L=d[_];if(!(L in y))break e;y=y[L]}d=d[d.length-1],_=y[d],g=g(_),g!=_&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,_=!1,L={next:function(){if(!_&&y<d.length){var U=y++;return{value:g(U,d[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,y){return d.call.apply(d.bind,arguments)}function p(d,g,y){if(!d)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function m(d,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var _=y.slice();return _.push.apply(_,arguments),d.apply(this,_)}}function S(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(_,L,U){for(var q=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)q[ye-2]=arguments[ye];return g.prototype[L].apply(_,q)}}function P(d){const g=d.length;if(0<g){const y=Array(g);for(let _=0;_<g;_++)y[_]=d[_];return y}return[]}function x(d,g){for(let y=1;y<arguments.length;y++){const _=arguments[y];if(u(_)){const L=d.length||0,U=_.length||0;d.length=L+U;for(let q=0;q<U;q++)d[L+q]=_[q]}else d.push(_)}}class I{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(d){return/^[\s\xa0]*$/.test(d)}function A(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function M(d){return M[" "](d),d}M[" "]=function(){};var V=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function b(d,g,y){for(const _ in d)g.call(y,d[_],_,d)}function C(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function E(d){const g={};for(const y in d)g[y]=d[y];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,g){let y,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(y in _)d[y]=_[y];for(let U=0;U<w.length;U++)y=w[U],Object.prototype.hasOwnProperty.call(_,y)&&(d[y]=_[y])}}function k(d){var g=1;d=d.split(":");const y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function D(d){l.setTimeout(()=>{throw d},0)}function N(){var d=K;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,y){const _=Ze.get();_.set(g,y),this.h?this.h.next=_:this.g=_,this.h=_}}var Ze=new I(()=>new te,d=>d.reset());class te{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,O=!1,K=new fe,Q=()=>{const d=l.Promise.resolve(void 0);ne=()=>{d.then(ge)}};var ge=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(y){D(y)}var g=Ze;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}O=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};l.addEventListener("test",y,g),l.removeEventListener("test",y,g)}catch{}return d}();function Gt(d,g){if(se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,_=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(V){e:{try{M(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ht[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Gt.aa.h.call(this)}}S(Gt,se);var Ht={2:"touch",3:"pen",4:"mouse"};Gt.prototype.h=function(){Gt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),KT=0;function WT(d,g,y,_,L){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!_,this.ha=L,this.key=++KT,this.da=this.fa=!1}function Ss(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ws(d){this.src=d,this.g={},this.h=0}ws.prototype.add=function(d,g,y,_,L){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var q=ru(d,g,_,L);return-1<q?(g=d[q],y||(g.fa=!1)):(g=new WT(g,this.src,U,!!_,L),g.fa=y,d.push(g)),g};function nu(d,g){var y=g.type;if(y in d.g){var _=d.g[y],L=Array.prototype.indexOf.call(_,g,void 0),U;(U=0<=L)&&Array.prototype.splice.call(_,L,1),U&&(Ss(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function ru(d,g,y,_){for(var L=0;L<d.length;++L){var U=d[L];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==_)return L}return-1}var iu="closure_lm_"+(1e6*Math.random()|0),ou={};function Eh(d,g,y,_,L){if(Array.isArray(g)){for(var U=0;U<g.length;U++)Eh(d,g[U],y,_,L);return null}return y=Sh(y),d&&d[qt]?d.K(g,y,f(_)?!!_.capture:!1,L):JT(d,g,y,!1,_,L)}function JT(d,g,y,_,L,U){if(!g)throw Error("Invalid event type");var q=f(L)?!!L.capture:!!L,ye=lu(d);if(ye||(d[iu]=ye=new ws(d)),y=ye.add(g,y,_,q,U),y.proxy)return y;if(_=YT(),y.proxy=_,_.src=d,_.listener=y,d.addEventListener)St||(L=q),L===void 0&&(L=!1),d.addEventListener(g.toString(),_,L);else if(d.attachEvent)d.attachEvent(Ih(g.toString()),_);else if(d.addListener&&d.removeListener)d.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return y}function YT(){function d(y){return g.call(d.src,d.listener,y)}const g=QT;return d}function Th(d,g,y,_,L){if(Array.isArray(g))for(var U=0;U<g.length;U++)Th(d,g[U],y,_,L);else _=f(_)?!!_.capture:!!_,y=Sh(y),d&&d[qt]?(d=d.i,g=String(g).toString(),g in d.g&&(U=d.g[g],y=ru(U,y,_,L),-1<y&&(Ss(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete d.g[g],d.h--)))):d&&(d=lu(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ru(g,y,_,L)),(y=-1<d?g[d]:null)&&su(y))}function su(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[qt])nu(g.i,d);else{var y=d.type,_=d.proxy;g.removeEventListener?g.removeEventListener(y,_,d.capture):g.detachEvent?g.detachEvent(Ih(y),_):g.addListener&&g.removeListener&&g.removeListener(_),(y=lu(g))?(nu(y,d),y.h==0&&(y.src=null,g[iu]=null)):Ss(d)}}}function Ih(d){return d in ou?ou[d]:ou[d]="on"+d}function QT(d,g){if(d.da)d=!0;else{g=new Gt(g,this);var y=d.listener,_=d.ha||d.src;d.fa&&su(d),d=y.call(_,g)}return d}function lu(d){return d=d[iu],d instanceof ws?d:null}var au="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sh(d){return typeof d=="function"?d:(d[au]||(d[au]=function(g){return d.handleEvent(g)}),d[au])}function je(){he.call(this),this.i=new ws(this),this.M=this,this.F=null}S(je,he),je.prototype[qt]=!0,je.prototype.removeEventListener=function(d,g,y,_){Th(this,d,g,y,_)};function ct(d,g){var y,_=d.F;if(_)for(y=[];_;_=_.F)y.push(_);if(d=d.M,_=g.type||g,typeof g=="string")g=new se(g,d);else if(g instanceof se)g.target=g.target||d;else{var L=g;g=new se(_,d),R(g,L)}if(L=!0,y)for(var U=y.length-1;0<=U;U--){var q=g.g=y[U];L=Cs(q,_,!0,g)&&L}if(q=g.g=d,L=Cs(q,_,!0,g)&&L,L=Cs(q,_,!1,g)&&L,y)for(U=0;U<y.length;U++)q=g.g=y[U],L=Cs(q,_,!1,g)&&L}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],_=0;_<y.length;_++)Ss(y[_]);delete d.g[g],d.h--}}this.F=null},je.prototype.K=function(d,g,y,_){return this.i.add(String(d),g,!1,y,_)},je.prototype.L=function(d,g,y,_){return this.i.add(String(d),g,!0,y,_)};function Cs(d,g,y,_){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,U=0;U<g.length;++U){var q=g[U];if(q&&!q.da&&q.capture==y){var ye=q.listener,ze=q.ha||q.src;q.fa&&nu(d.i,q),L=ye.call(ze,_)!==!1&&L}}return L&&!_.defaultPrevented}function wh(d,g,y){if(typeof d=="function")y&&(d=m(d,y));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function Ch(d){d.g=wh(()=>{d.g=null,d.i&&(d.i=!1,Ch(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class XT extends he{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ch(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(d){he.call(this),this.h=d,this.g={}}S(zi,he);var Ah=[];function Rh(d){b(d.g,function(g,y){this.g.hasOwnProperty(y)&&su(g)},d),d.g={}}zi.prototype.N=function(){zi.aa.N.call(this),Rh(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=l.JSON.stringify,ZT=l.JSON.parse,jT=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function cu(){}cu.prototype.h=null;function Ph(d){return d.h||(d.h=d.i())}function Nh(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function du(){se.call(this,"d")}S(du,se);function fu(){se.call(this,"c")}S(fu,se);var ar={},xh=null;function As(){return xh=xh||new je}ar.La="serverreachability";function kh(d){se.call(this,ar.La,d)}S(kh,se);function Ki(d){const g=As();ct(g,new kh(g))}ar.STAT_EVENT="statevent";function Mh(d,g){se.call(this,ar.STAT_EVENT,d),this.stat=g}S(Mh,se);function dt(d){const g=As();ct(g,new Mh(g,d))}ar.Ma="timingevent";function Dh(d,g){se.call(this,ar.Ma,d),this.size=g}S(Dh,se);function Wi(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function eI(d,g,y,_,L,U){d.info(function(){if(d.g)if(U)for(var q="",ye=U.split("&"),ze=0;ze<ye.length;ze++){var ue=ye[ze].split("=");if(1<ue.length){var et=ue[0];ue=ue[1];var tt=et.split("_");q=2<=tt.length&&tt[1]=="type"?q+(et+"="+ue+"&"):q+(et+"=redacted&")}}else q=null;else q=U;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+g+`
`+y+`
`+q})}function tI(d,g,y,_,L,U,q){d.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+g+`
`+y+`
`+U+" "+q})}function Ur(d,g,y,_){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+rI(d,y)+(_?" "+_:"")})}function nI(d,g){d.info(function(){return"TIMEOUT: "+g})}Ji.prototype.info=function(){};function rI(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var _=y[d];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return uu(y)}catch{return g}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hu;function Ps(){}S(Ps,cu),Ps.prototype.g=function(){return new XMLHttpRequest},Ps.prototype.i=function(){return{}},hu=new Ps;function kn(d,g,y,_){this.j=d,this.i=g,this.l=y,this.R=_||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lh}function Lh(){this.i=null,this.g="",this.h=!1}var Fh={},pu={};function mu(d,g,y){d.L=1,d.v=Ms(fn(g)),d.m=y,d.P=!0,Uh(d,null)}function Uh(d,g){d.F=Date.now(),Ns(d),d.A=fn(d.v);var y=d.A,_=d.R;Array.isArray(_)||(_=[String(_)]),Xh(y.i,"t",_),d.C=0,y=d.j.J,d.h=new Lh,d.g=mp(d.j,y?g:null,!d.m),0<d.O&&(d.M=new XT(m(d.Y,d,d.g),d.O)),g=d.U,y=d.g,_=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ah[0]=L.toString()),L=Ah);for(var U=0;U<L.length;U++){var q=Eh(y,L[U],_||g.handleEvent,!1,g.h||g);if(!q)break;g.g[q.key]=q}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Ki(),eI(d.i,d.u,d.A,d.l,d.R,d.m)}kn.prototype.ca=function(d){d=d.target;const g=this.M;g&&hn(d)==3?g.j():this.Y(d)},kn.prototype.Y=function(d){try{if(d==this.g)e:{const tt=hn(this.g);var g=this.g.Ba();const Br=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||tt!=4||g==7||(g==8||0>=Br?Ki(3):Ki(2)),gu(this);var y=this.g.Z();this.X=y;t:if(bh(this)){var _=ip(this.g);d="";var L=_.length,U=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),Yi(this);var q="";break t}this.h.i=new l.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(_[g],{stream:!(U&&g==L-1)});_.length=0,this.h.g+=d,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=y==200,tI(this.i,this.u,this.A,this.l,this.R,tt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,ze=this.g;if((ye=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ye)){var ue=ye;break t}}ue=null}if(y=ue)Ur(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yu(this,y);else{this.o=!1,this.s=3,dt(12),ur(this),Yi(this);break e}}if(this.P){y=!0;let zt;for(;!this.J&&this.C<q.length;)if(zt=iI(this,q),zt==pu){tt==4&&(this.s=4,dt(14),y=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Fh){this.s=4,dt(15),Ur(this.i,this.l,q,"[Invalid Chunk]"),y=!1;break}else Ur(this.i,this.l,zt,null),yu(this,zt);if(bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||q.length!=0||this.h.h||(this.s=1,dt(16),y=!1),this.o=this.o&&y,!y)Ur(this.i,this.l,q,"[Invalid Chunked Response]"),ur(this),Yi(this);else if(0<q.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Su(et),et.M=!0,dt(11))}}else Ur(this.i,this.l,q,null),yu(this,q);tt==4&&ur(this),this.o&&!this.J&&(tt==4?dp(this.j,this):(this.o=!1,Ns(this)))}else TI(this.g),y==400&&0<q.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),ur(this),Yi(this)}}}catch{}finally{}};function bh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function iI(d,g){var y=d.C,_=g.indexOf(`
`,y);return _==-1?pu:(y=Number(g.substring(y,_)),isNaN(y)?Fh:(_+=1,_+y>g.length?pu:(g=g.slice(_,_+y),d.C=_+y,g)))}kn.prototype.cancel=function(){this.J=!0,ur(this)};function Ns(d){d.S=Date.now()+d.I,Oh(d,d.I)}function Oh(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Wi(m(d.ba,d),g)}function gu(d){d.B&&(l.clearTimeout(d.B),d.B=null)}kn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(nI(this.i,this.A),this.L!=2&&(Ki(),dt(17)),ur(this),this.s=2,Yi(this)):Oh(this,this.S-d)};function Yi(d){d.j.G==0||d.J||dp(d.j,d)}function ur(d){gu(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Rh(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function yu(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||vu(y.h,d))){if(!d.K&&vu(y.h,d)&&y.G==3){try{var _=y.Da.g.parse(g)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)bs(y),Fs(y);else break e;Iu(y),dt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Wi(m(y.Za,y),6e3));if(1>=Hh(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else dr(y,11)}else if((d.K||y.g==d)&&bs(y),!T(g))for(L=y.Da.g.parse(g),g=0;g<L.length;g++){let ue=L[g];if(y.T=ue[0],ue=ue[1],y.G==2)if(ue[0]=="c"){y.K=ue[1],y.ia=ue[2];const et=ue[3];et!=null&&(y.la=et,y.j.info("VER="+y.la));const tt=ue[4];tt!=null&&(y.Aa=tt,y.j.info("SVER="+y.Aa));const Br=ue[5];Br!=null&&typeof Br=="number"&&0<Br&&(_=1.5*Br,y.L=_,y.j.info("backChannelRequestTimeoutMs_="+_)),_=y;const zt=d.g;if(zt){const Bs=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var U=_.h;U.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(_u(U,U.h),U.h=null))}if(_.D){const wu=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;wu&&(_.ya=wu,_e(_.I,_.D,wu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),_=y;var q=d;if(_.qa=pp(_,_.J?_.ia:null,_.W),q.K){qh(_.h,q);var ye=q,ze=_.L;ze&&(ye.I=ze),ye.B&&(gu(ye),Ns(ye)),_.g=q}else up(_);0<y.i.length&&Us(y)}else ue[0]!="stop"&&ue[0]!="close"||dr(y,7);else y.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?dr(y,7):Tu(y):ue[0]!="noop"&&y.l&&y.l.ta(ue),y.v=0)}}Ki(4)}catch{}}var oI=class{constructor(d,g){this.g=d,this.map=g}};function Bh(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gh(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hh(d){return d.h?1:d.g?d.g.size:0}function vu(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function _u(d,g){d.g?d.g.add(g):d.h=g}function qh(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Bh.prototype.cancel=function(){if(this.i=zh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function zh(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.D);return g}return P(d.i)}function sI(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,_=0;_<y;_++)g.push(d[_]);return g}g=[],y=0;for(_ in d)g[y++]=d[_];return g}function lI(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(const _ in d)g[y++]=_;return g}}}function $h(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=lI(d),_=sI(d),L=_.length,U=0;U<L;U++)g.call(void 0,_[U],y&&y[U],d)}var Kh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aI(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var _=d[y].indexOf("="),L=null;if(0<=_){var U=d[y].substring(0,_);L=d[y].substring(_+1)}else U=d[y];g(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function cr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof cr){this.h=d.h,xs(this,d.j),this.o=d.o,this.g=d.g,ks(this,d.s),this.l=d.l;var g=d.i,y=new Zi;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Wh(this,y),this.m=d.m}else d&&(g=String(d).match(Kh))?(this.h=!1,xs(this,g[1]||"",!0),this.o=Qi(g[2]||""),this.g=Qi(g[3]||"",!0),ks(this,g[4]),this.l=Qi(g[5]||"",!0),Wh(this,g[6]||"",!0),this.m=Qi(g[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}cr.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Xi(g,Jh,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Xi(g,Jh,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Xi(y,y.charAt(0)=="/"?dI:cI,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Xi(y,hI)),d.join("")};function fn(d){return new cr(d)}function xs(d,g,y){d.j=y?Qi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ks(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Wh(d,g,y){g instanceof Zi?(d.i=g,pI(d.i,d.h)):(y||(g=Xi(g,fI)),d.i=new Zi(g,d.h))}function _e(d,g,y){d.i.set(g,y)}function Ms(d){return _e(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Qi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xi(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,uI),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function uI(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Jh=/[#\/\?@]/g,cI=/[#\?:]/g,dI=/[#\?]/g,fI=/[#\?@]/g,hI=/#/g;function Zi(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&aI(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Zi.prototype,t.add=function(d,g){Mn(this),this.i=null,d=br(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Yh(d,g){Mn(d),g=br(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Qh(d,g){return Mn(d),g=br(d,g),d.g.has(g)}t.forEach=function(d,g){Mn(this),this.g.forEach(function(y,_){y.forEach(function(L){d.call(g,L,_,this)},this)},this)},t.na=function(){Mn(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let _=0;_<g.length;_++){const L=d[_];for(let U=0;U<L.length;U++)y.push(g[_])}return y},t.V=function(d){Mn(this);let g=[];if(typeof d=="string")Qh(this,d)&&(g=g.concat(this.g.get(br(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return Mn(this),this.i=null,d=br(this,d),Qh(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Xh(d,g,y){Yh(d,g),0<y.length&&(d.i=null,d.g.set(br(d,g),P(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var _=g[y];const U=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var L=U;q[_]!==""&&(L+="="+encodeURIComponent(String(q[_]))),d.push(L)}}return this.i=d.join("&")};function br(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function pI(d,g){g&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(y,_){var L=_.toLowerCase();_!=L&&(Yh(this,_),Xh(this,L,y))},d)),d.j=g}function mI(d,g){const y=new Ji;if(l.Image){const _=new Image;_.onload=v(Dn,y,"TestLoadImage: loaded",!0,g,_),_.onerror=v(Dn,y,"TestLoadImage: error",!1,g,_),_.onabort=v(Dn,y,"TestLoadImage: abort",!1,g,_),_.ontimeout=v(Dn,y,"TestLoadImage: timeout",!1,g,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=d}else g(!1)}function gI(d,g){const y=new Ji,_=new AbortController,L=setTimeout(()=>{_.abort(),Dn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:_.signal}).then(U=>{clearTimeout(L),U.ok?Dn(y,"TestPingServer: ok",!0,g):Dn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Dn(y,"TestPingServer: error",!1,g)})}function Dn(d,g,y,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(y)}catch{}}function yI(){this.g=new jT}function vI(d,g,y){const _=y||"";try{$h(d,function(L,U){let q=L;f(L)&&(q=uu(L)),g.push(_+U+"="+encodeURIComponent(q))})}catch(L){throw g.push(_+"type="+encodeURIComponent("_badmap")),L}}function Ds(d){this.l=d.Ub||null,this.j=d.eb||!1}S(Ds,cu),Ds.prototype.g=function(){return new Vs(this.l,this.j)},Ds.prototype.i=function(d){return function(){return d}}({});function Vs(d,g){je.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Vs,je),t=Vs.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,eo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ji(this):eo(this),this.readyState==3&&Zh(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ji(this))},t.Qa=function(d){this.g&&(this.response=d,ji(this))},t.ga=function(){this.g&&ji(this)};function ji(d){d.readyState=4,d.l=null,d.j=null,d.v=null,eo(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function eo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function jh(d){let g="";return b(d,function(y,_){g+=_,g+=":",g+=y,g+=`\r
`}),g}function Eu(d,g,y){e:{for(_ in y){var _=!1;break e}_=!0}_||(y=jh(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):_e(d,g,y))}function Pe(d){je.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,je);var _I=/^https?$/i,EI=["POST","PUT"];t=Pe.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hu.g(),this.v=this.o?Ph(this.o):Ph(hu),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){ep(this,U);return}if(d=y||"",y=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)y.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())y.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(EI,g,void 0))||_||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,q]of y)this.g.setRequestHeader(U,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rp(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){ep(this,U)}};function ep(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,tp(d),Ls(d)}function tp(d){d.A||(d.A=!0,ct(d,"complete"),ct(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ct(this,"complete"),ct(this,"abort"),Ls(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?np(this):this.bb())},t.bb=function(){np(this)};function np(d){if(d.h&&typeof s<"u"&&(!d.v[1]||hn(d)!=4||d.Z()!=2)){if(d.u&&hn(d)==4)wh(d.Ea,0,d);else if(ct(d,"readystatechange"),hn(d)==4){d.h=!1;try{const q=d.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var _;if(_=q===0){var L=String(d.D).match(Kh)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),_=!_I.test(L?L.toLowerCase():"")}y=_}if(y)ct(d,"complete"),ct(d,"success");else{d.m=6;try{var U=2<hn(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",tp(d)}}finally{Ls(d)}}}}function Ls(d,g){if(d.g){rp(d);const y=d.g,_=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||ct(d,"ready");try{y.onreadystatechange=_}catch{}}}function rp(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function hn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),ZT(g)}};function ip(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function TI(d){const g={};d=(d.g&&2<=hn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<d.length;_++){if(T(d[_]))continue;var y=k(d[_]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[L]||[];g[L]=U,U.push(y)}C(g,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function op(d){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,d),this.cb=to("retryDelaySeedMs",1e4,d),this.Wa=to("forwardChannelMaxRetries",2,d),this.wa=to("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Bh(d&&d.concurrentRequestLimit),this.Da=new yI,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=op.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,_){dt(0),this.W=d,this.H=g||{},y&&_!==void 0&&(this.H.OSID=y,this.H.OAID=_),this.F=this.X,this.I=pp(this,null,this.W),Us(this)};function Tu(d){if(sp(d),d.G==3){var g=d.U++,y=fn(d.I);if(_e(y,"SID",d.K),_e(y,"RID",g),_e(y,"TYPE","terminate"),no(d,y),g=new kn(d,d.j,g),g.L=2,g.v=Ms(fn(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=g.v,y=!0),y||(g.g=mp(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ns(g)}hp(d)}function Fs(d){d.g&&(Su(d),d.g.cancel(),d.g=null)}function sp(d){Fs(d),d.u&&(l.clearTimeout(d.u),d.u=null),bs(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Us(d){if(!Gh(d.h)&&!d.s){d.s=!0;var g=d.Ga;ne||Q(),O||(ne(),O=!0),K.add(g,d),d.B=0}}function II(d,g){return Hh(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Wi(m(d.Ga,d,g),fp(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new kn(this,this.j,d);let U=this.o;if(this.S&&(U?(U=E(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var _=this.i[y];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(g+=_,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=ap(this,L,g),y=fn(this.I),_e(y,"RID",d),_e(y,"CVER",22),this.D&&_e(y,"X-HTTP-Session-Id",this.D),no(this,y),U&&(this.O?g="headers="+encodeURIComponent(String(jh(U)))+"&"+g:this.m&&Eu(y,this.m,U)),_u(this.h,L),this.Ua&&_e(y,"TYPE","init"),this.P?(_e(y,"$req",g),_e(y,"SID","null"),L.T=!0,mu(L,y,null)):mu(L,y,g),this.G=2}}else this.G==3&&(d?lp(this,d):this.i.length==0||Gh(this.h)||lp(this))};function lp(d,g){var y;g?y=g.l:y=d.U++;const _=fn(d.I);_e(_,"SID",d.K),_e(_,"RID",y),_e(_,"AID",d.T),no(d,_),d.m&&d.o&&Eu(_,d.m,d.o),y=new kn(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=ap(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),_u(d.h,y),mu(y,_,g)}function no(d,g){d.H&&b(d.H,function(y,_){_e(g,_,y)}),d.l&&$h({},function(y,_){_e(g,_,y)})}function ap(d,g,y){y=Math.min(d.i.length,y);var _=d.l?m(d.l.Na,d.l,d):null;e:{var L=d.i;let U=-1;for(;;){const q=["count="+y];U==-1?0<y?(U=L[0].g,q.push("ofs="+U)):U=0:q.push("ofs="+U);let ye=!0;for(let ze=0;ze<y;ze++){let ue=L[ze].g;const et=L[ze].map;if(ue-=U,0>ue)U=Math.max(0,L[ze].g-100),ye=!1;else try{vI(et,q,"req"+ue+"_")}catch{_&&_(et)}}if(ye){_=q.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,_}function up(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ne||Q(),O||(ne(),O=!0),K.add(g,d),d.v=0}}function Iu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Wi(m(d.Fa,d),fp(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,cp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Wi(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Fs(this),cp(this))};function Su(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function cp(d){d.g=new kn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=fn(d.qa);_e(g,"RID","rpc"),_e(g,"SID",d.K),_e(g,"AID",d.T),_e(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&_e(g,"TO",d.ja),_e(g,"TYPE","xmlhttp"),no(d,g),d.m&&d.o&&Eu(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Ms(fn(g)),y.m=null,y.P=!0,Uh(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Fs(this),Iu(this),dt(19))};function bs(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function dp(d,g){var y=null;if(d.g==g){bs(d),Su(d),d.g=null;var _=2}else if(vu(d.h,g))y=g.D,qh(d.h,g),_=1;else return;if(d.G!=0){if(g.o)if(_==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;_=As(),ct(_,new Dh(_,y)),Us(d)}else up(d);else if(L=g.s,L==3||L==0&&0<g.X||!(_==1&&II(d,g)||_==2&&Iu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),L){case 1:dr(d,5);break;case 4:dr(d,10);break;case 3:dr(d,6);break;default:dr(d,2)}}}function fp(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function dr(d,g){if(d.j.info("Error code "+g),g==2){var y=m(d.fb,d),_=d.Xa;const L=!_;_=new cr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||xs(_,"https"),Ms(_),L?mI(_.toString(),y):gI(_.toString(),y)}else dt(2);d.G=0,d.l&&d.l.sa(g),hp(d),sp(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function hp(d){if(d.G=0,d.ka=[],d.l){const g=zh(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function pp(d,g,y){var _=y instanceof cr?fn(y):new cr(y);if(_.g!="")g&&(_.g=g+"."+_.g),ks(_,_.s);else{var L=l.location;_=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var U=new cr(null);_&&xs(U,_),g&&(U.g=g),L&&ks(U,L),y&&(U.l=y),_=U}return y=d.D,g=d.ya,y&&g&&_e(_,y,g),_e(_,"VER",d.la),no(d,_),_}function mp(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Pe(new Ds({eb:y})):new Pe(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gp(){}t=gp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Os(){}Os.prototype.g=function(d,g){return new wt(d,g)};function wt(d,g){je.call(this),this.g=new op(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!T(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Or(this)}S(wt,je),wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){Tu(this.g)},wt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=uu(d),d=y);g.i.push(new oI(g.Ya++,d)),g.G==3&&Us(g)},wt.prototype.N=function(){this.g.l=null,delete this.j,Tu(this.g),delete this.g,wt.aa.N.call(this)};function yp(d){du.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}S(yp,du);function vp(){fu.call(this),this.status=1}S(vp,fu);function Or(d){this.g=d}S(Or,gp),Or.prototype.ua=function(){ct(this.g,"a")},Or.prototype.ta=function(d){ct(this.g,new yp(d))},Or.prototype.sa=function(d){ct(this.g,new vp)},Or.prototype.ra=function(){ct(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,N0=function(){return new Os},P0=function(){return As()},R0=ar,Sd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,Rl=Rs,Vh.COMPLETE="complete",A0=Vh,Nh.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",je.prototype.listen=je.prototype.K,Eo=Nh,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,C0=Pe}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});const wy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new v0("@firebase/firestore");function po(){return Nr.logLevel}function W(t,...e){if(Nr.logLevel<=le.DEBUG){const n=e.map(zf);Nr.debug(`Firestore (${Bi}): ${t}`,...n)}}function An(t,...e){if(Nr.logLevel<=le.ERROR){const n=e.map(zf);Nr.error(`Firestore (${Bi}): ${t}`,...n)}}function Ai(t,...e){if(Nr.logLevel<=le.WARN){const n=e.map(zf);Nr.warn(`Firestore (${Bi}): ${t}`,...n)}}function zf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: `+t;throw An(e),new Error(e)}function me(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class fD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hD{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new x0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new ot(e)}}class pD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new gD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Ri(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Oe(0,0))}static max(){return new j(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends is{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const _D=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends is{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return _D.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new We(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new J(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(xe.fromString(e))}static fromName(e){return new Y(xe.fromString(e).popFirst(5))}static empty(){return new Y(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new xe(e.slice()))}}function ED(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new tr(i,Y.empty(),e)}function TD(t){return new tr(t.readTime,t.key,-1)}class tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(j.min(),Y.empty(),-1)}static max(){return new tr(j.max(),Y.empty(),-1)}}function ID(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==SD)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const f=u;n(e[f]).next(h=>{s[f]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function CD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$f.oe=-1;function $a(t){return t==null}function ha(t){return t===0&&1/t==-1/0}function AD(t){return typeof t=="number"&&Number.isInteger(t)&&!ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cl(this.root,e,this.comparator,!0)}}class cl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=i??Ke.EMPTY,this.right=o??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Ke(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ke.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ay(this.data.getIterator())}getIteratorFrom(e){return new Ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class Ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new Ye(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new D0("Invalid base64 string: "+o):o}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const RD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(t){if(me(!!t),typeof t=="string"){let e=0;const n=RD.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wf(t){const e=t.mapValue.fields.__previous_value__;return Kf(e)?Wf(e):e}function os(t){const e=nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,i,o,s,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}}class ss{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ss("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ss&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl={mapValue:{}};function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kf(t)?4:xD(t)?9007199254740991:ND(t)?10:11:X()}function cn(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return os(t).isEqual(os(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=nr(i.timestampValue),l=nr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return xr(i.bytesValue).isEqual(xr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ke(i.doubleValue),l=ke(o.doubleValue);return s===l?ha(s)===ha(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Cy(s)!==Cy(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!cn(s[u],l[u])))return!1;return!0}(t,e);default:return X()}}function ls(t,e){return(t.values||[]).find(n=>cn(n,e))!==void 0}function Pi(t,e){if(t===e)return 0;const n=kr(t),r=kr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ry(t.timestampValue,e.timestampValue);case 4:return Ry(os(t),os(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(o,s){const l=xr(o),u=xr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let f=0;f<l.length&&f<u.length;f++){const h=ce(l[f],u[f]);if(h!==0)return h}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=ce(ke(o.latitude),ke(s.latitude));return l!==0?l:ce(ke(o.longitude),ke(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Py(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,f,h;const p=o.fields||{},m=s.fields||{},v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,P=ce(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:Py(v,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===dl.mapValue&&s===dl.mapValue)return 0;if(o===dl.mapValue)return 1;if(s===dl.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),f=s.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=ce(u[p],h[p]);if(m!==0)return m;const v=Pi(l[u[p]],f[h[p]]);if(v!==0)return v}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Ry(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=nr(t),r=nr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Py(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Pi(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Ni(t){return wd(t)}function wd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=wd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${wd(n.fields[s])}`;return i+"}"}(t.mapValue):X()}function Cd(t){return!!t&&"integerValue"in t}function Jf(t){return!!t&&"arrayValue"in t}function Ny(t){return!!t&&"nullValue"in t}function xy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function ND(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Do(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Do(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Do(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Do(n)}setAll(e){let n=We.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Do(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Dt(Do(this.value))}}function V0(t){const e=[];return Gi(t.fields,(n,r)=>{const i=new We([n]);if(Pl(r)){const o=V0(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new lt(e,0,j.min(),j.min(),j.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new lt(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new lt(e,2,n,j.min(),j.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,j.min(),j.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.position=e,this.inclusive=n}}function ky(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=Pi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function My(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function kD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{}class Ue extends L0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DD(e,n,r):n==="array-contains"?new FD(e,r):n==="in"?new UD(e,r):n==="not-in"?new bD(e,r):n==="array-contains-any"?new OD(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VD(e,r):new LD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pi(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(Pi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends L0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new dn(e,n)}matches(e){return F0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function F0(t){return t.op==="and"}function U0(t){return MD(t)&&F0(t)}function MD(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function Ad(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Ni(t.value);if(U0(t))return t.filters.map(e=>Ad(e)).join(",");{const e=t.filters.map(n=>Ad(n)).join(",");return`${t.op}(${e})`}}function b0(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&cn(r.value,i.value)}(t,e):t instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&b0(s,i.filters[l]),!0):!1}(t,e):void X()}function O0(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Ni(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(O0).join(" ,")+"}"}(t):"Filter"}class DD extends Ue{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class VD extends Ue{constructor(e,n){super(e,"in",n),this.keys=B0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LD extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=B0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class FD extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jf(n)&&ls(n.arrayValue,this.value)}}class UD extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ls(this.value.arrayValue,n)}}class bD extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ls(this.value.arrayValue,n)}}class OD extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ls(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function Dy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new BD(t,e,n,r,i,o,s)}function Yf(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ad(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$a(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ni(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ni(r)).join(",")),e.ue=n}return e.ue}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!b0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!My(t.startAt,e.startAt)&&My(t.endAt,e.endAt)}function Rd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GD(t,e,n,r,i,o,s,l){return new Ka(t,e,n,r,i,o,s,l)}function Xf(t){return new Ka(t)}function Vy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HD(t){return t.collectionGroup!==null}function Vo(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Ye(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ma(o,r))}),n.has(We.keyField().canonicalString())||e.ce.push(new ma(We.keyField(),r))}return e.ce}function an(t){const e=ee(t);return e.le||(e.le=qD(e,Vo(t))),e.le}function qD(t,e){if(t.limitType==="F")return Dy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ma(i.field,o)});const n=t.endAt?new pa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pa(t.startAt.position,t.startAt.inclusive):null;return Dy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Pd(t,e,n){return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wa(t,e){return Qf(an(t),an(e))&&t.limitType===e.limitType}function G0(t){return`${Yf(an(t))}|lt:${t.limitType}`}function $r(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>O0(i)).join(", ")}]`),$a(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ni(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ni(i)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function Ja(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Vo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const f=ky(s,l,u);return s.inclusive?f<=0:f<0}(r.startAt,Vo(r),i)||r.endAt&&!function(s,l,u){const f=ky(s,l,u);return s.inclusive?f>=0:f>0}(r.endAt,Vo(r),i))}(t,e)}function zD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function H0(t){return(e,n)=>{let r=!1;for(const i of Vo(t)){const o=$D(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $D(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),f=l.data.field(o);return u!==null&&f!==null?Pi(u,f):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return M0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Re(Y.comparator);function Rn(){return KD}const q0=new Re(Y.comparator);function To(...t){let e=q0;for(const n of t)e=e.insert(n.key,n);return e}function z0(t){let e=q0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _r(){return Lo()}function $0(){return Lo()}function Lo(){return new Hi(t=>t.toString(),(t,e)=>t.isEqual(e))}const WD=new Re(Y.comparator),JD=new Ye(Y.comparator);function ie(...t){let e=JD;for(const n of t)e=e.add(n);return e}const YD=new Ye(ce);function QD(){return YD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(e)?"-0":e}}function K0(t){return{integerValue:""+t}}function XD(t,e){return AD(e)?K0(e):Zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this._=void 0}}function ZD(t,e,n){return t instanceof ga?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Kf(o)&&(o=Wf(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof as?J0(t,e):t instanceof us?Y0(t,e):function(i,o){const s=W0(i,o),l=Ly(s)+Ly(i.Pe);return Cd(s)&&Cd(i.Pe)?K0(l):Zf(i.serializer,l)}(t,e)}function jD(t,e,n){return t instanceof as?J0(t,e):t instanceof us?Y0(t,e):n}function W0(t,e){return t instanceof ya?function(r){return Cd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ga extends Ya{}class as extends Ya{constructor(e){super(),this.elements=e}}function J0(t,e){const n=Q0(e);for(const r of t.elements)n.some(i=>cn(i,r))||n.push(r);return{arrayValue:{values:n}}}class us extends Ya{constructor(e){super(),this.elements=e}}function Y0(t,e){let n=Q0(e);for(const r of t.elements)n=n.filter(i=>!cn(i,r));return{arrayValue:{values:n}}}class ya extends Ya{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ly(t){return ke(t.integerValue||t.doubleValue)}function Q0(t){return Jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof as&&i instanceof as||r instanceof us&&i instanceof us?Ri(r.elements,i.elements,cn):r instanceof ya&&i instanceof ya?cn(r.Pe,i.Pe):r instanceof ga&&i instanceof ga}(t.transform,e.transform)}class tV{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qa{}function X0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new j0(t.key,_n.none()):new _s(t.key,t.data,_n.none());{const n=t.data,r=Dt.empty();let i=new Ye(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(t.key,r,new Yt(i.toArray()),_n.none())}}function nV(t,e,n){t instanceof _s?function(i,o,s){const l=i.value.clone(),u=Uy(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,o,s){if(!Nl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Uy(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Z0(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof _s?function(o,s,l,u){if(!Nl(o.precondition,s))return l;const f=o.value.clone(),h=by(o.fieldTransforms,u,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(o,s,l,u){if(!Nl(o.precondition,s))return l;const f=by(o.fieldTransforms,u,s),h=s.data;return h.setAll(Z0(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return Nl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function rV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=W0(r.transform,i||null);o!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,o))}return n||null}function Fy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ri(r,i,(o,s)=>eV(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _s extends Qa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lr extends Qa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Z0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uy(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,jD(s,l,n[i]))}return r}function by(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,ZD(o,s,e))}return r}class j0 extends Qa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iV extends Qa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&nV(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$0();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=X0(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,(n,r)=>Fy(n,r))&&Ri(this.baseMutations,e.baseMutations,(n,r)=>Fy(n,r))}}class jf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return WD}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new jf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,oe;function aV(t){switch(t){default:return X();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function eT(t){if(t===void 0)return An("GRPC error has no .code"),G.UNKNOWN;switch(t){case De.OK:return G.OK;case De.CANCELLED:return G.CANCELLED;case De.UNKNOWN:return G.UNKNOWN;case De.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case De.INTERNAL:return G.INTERNAL;case De.UNAVAILABLE:return G.UNAVAILABLE;case De.UNAUTHENTICATED:return G.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case De.NOT_FOUND:return G.NOT_FOUND;case De.ALREADY_EXISTS:return G.ALREADY_EXISTS;case De.PERMISSION_DENIED:return G.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case De.ABORTED:return G.ABORTED;case De.OUT_OF_RANGE:return G.OUT_OF_RANGE;case De.UNIMPLEMENTED:return G.UNIMPLEMENTED;case De.DATA_LOSS:return G.DATA_LOSS;default:return X()}}(oe=De||(De={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new Ir([4294967295,4294967295],0);function Oy(t){const e=uV().encode(t),n=new w0;return n.update(e),new Uint8Array(n.digest())}function By(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([i,o],0)]}class eh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Io(`Invalid padding: ${n}`);if(r<0)throw new Io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Io(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ir.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ir.fromNumber(r)));return i.compare(cV)===1&&(i=new Ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Oy(e),[r,i]=By(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new eh(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=Oy(e),[r,i]=By(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xa(j.min(),i,new Re(ce),Rn(),ie())}}class Es{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Es(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class tT{constructor(e,n){this.targetId=e,this.me=n}}class nT{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Gy{constructor(){this.fe=0,this.ge=qy(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Es(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=qy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=Hy(),this.Qe=new Re(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(Rd(o))if(r===0){const s=new Y(o.path);this.Ue(n,s,lt.newNoDocument(s,j.min()))}else me(r===1);else{const s=this.Ye(n);if(s!==r){const l=this.Ze(e),u=l?this.Xe(l,e,s):1;if(u!==0){this.je(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=xr(r).toUint8Array()}catch(u){if(u instanceof D0)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new eh(s,i,o)}catch(u){return Ai(u instanceof Io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&Rd(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,lt.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Xa(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=Hy(),this.Qe=new Re(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Gy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hy(){return new Re(Y.comparator)}function qy(){return new Re(Y.comparator)}const fV={asc:"ASCENDING",desc:"DESCENDING"},hV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pV={and:"AND",or:"OR"};class mV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nd(t,e){return t.useProto3Json||$a(e)?e:{value:e}}function va(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gV(t,e){return va(t,e.toTimestamp())}function un(t){return me(!!t),j.fromTimestamp(function(n){const r=nr(n);return new Oe(r.seconds,r.nanos)}(t))}function th(t,e){return xd(t,e).canonicalString()}function xd(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iT(t){const e=xe.fromString(t);return me(uT(e)),e}function kd(t,e){return th(t.databaseId,e.path)}function ic(t,e){const n=iT(e);if(n.get(1)!==t.databaseId.projectId)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(sT(n))}function oT(t,e){return th(t.databaseId,e)}function yV(t){const e=iT(t);return e.length===4?xe.emptyPath():sT(e)}function Md(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sT(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zy(t,e,n){return{name:kd(t,e),fields:n.value.mapValue.fields}}function vV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,h){return f.useProto3Json?(me(h===void 0||typeof h=="string"),Xe.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Xe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(f){const h=f.code===void 0?G.UNKNOWN:eT(f.code);return new J(h,f.message||"")}(s);n=new nT(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ic(t,r.document.name),o=un(r.document.updateTime),s=r.document.createTime?un(r.document.createTime):j.min(),l=new Dt({mapValue:{fields:r.document.fields}}),u=lt.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new xl(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ic(t,r.document),o=r.readTime?un(r.readTime):j.min(),s=lt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new xl([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ic(t,r.document),o=r.removedTargetIds||[];n=new xl([],o,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new lV(i,o),l=r.targetId;n=new tT(l,s)}}return n}function _V(t,e){let n;if(e instanceof _s)n={update:zy(t,e.key,e.value)};else if(e instanceof j0)n={delete:kd(t,e.key)};else if(e instanceof Lr)n={update:zy(t,e.key,e.data),updateMask:PV(e.fieldMask)};else{if(!(e instanceof iV))return X();n={verify:kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof ga)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof as)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof us)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ya)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X()}(t,e.precondition)),n}function EV(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?un(i.updateTime):un(o);return s.isEqual(j.min())&&(s=un(o)),new tV(s,i.transformResults||[])}(n,e))):[]}function TV(t,e){return{documents:[oT(t,e.path)]}}function IV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oT(t,i);const o=function(f){if(f.length!==0)return aT(dn.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(f){if(f.length!==0)return f.map(h=>function(m){return{field:Kr(m.field),direction:CV(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Nd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:i}}function SV(t){let e=yV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=lT(p);return m instanceof dn&&U0(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(S){return new ma(Wr(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,$a(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,v=p.values||[];return new pa(v,m)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const m=!p.before,v=p.values||[];return new pa(v,m)}(n.endAt)),GD(e,i,s,o,l,"F",u,f)}function wV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wr(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wr(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wr(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wr(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Wr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(r=>lT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function CV(t){return fV[t]}function AV(t){return hV[t]}function RV(t){return pV[t]}function Kr(t){return{fieldPath:t.canonicalString()}}function Wr(t){return We.fromServerFormat(t.fieldPath)}function aT(t){return t instanceof Ue?function(n){if(n.op==="=="){if(xy(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NAN"}};if(Ny(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xy(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NAN"}};if(Ny(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(n.field),op:AV(n.op),value:n.value}}}(t):t instanceof dn?function(n){const r=n.getFilters().map(i=>aT(i));return r.length===1?r[0]:{compositeFilter:{op:RV(n.op),filters:r}}}(t):X()}function PV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,i,o=j.min(),s=j.min(),l=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.ct=e}}function xV(t){const e=SV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.un=new MV}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(tr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class MV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xi(0)}static kn(){return new xi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.changes=new Hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fo(r.mutation,i,Yt.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=_r();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=To();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=_r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Rn();const s=Lo(),l=function(){return Lo()}();return n.forEach((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Fo(h.mutation,f,h.mutation.getFieldMask(),Oe.now())):s.set(f.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>{var p;return l.set(f,new VV(h,(p=s.get(f))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Lo();let i=new Re((s,l)=>s-l),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let h=r.get(u)||Yt.empty();h=l.applyToLocalView(f,h),r.set(u,h);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,h=u.value,p=$0();h.forEach(m=>{if(!o.has(m)){const v=X0(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(_r());let l=-1,u=o;return s.next(f=>B.forEach(f,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,ie())).next(h=>({batchId:l,changes:z0(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=To();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=To();return this.indexManager.getCollectionParents(e,o).next(l=>B.forEach(l,u=>{const f=function(p,m){return new Ka(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,lt.newInvalidDocument(h)))});let l=To();return s.forEach((u,f)=>{const h=o.get(u);h!==void 0&&Fo(h.mutation,f,Yt.empty(),Oe.now()),Ja(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:un(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:xV(i.bundledQuery),readTime:un(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.overlays=new Re(Y.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_r();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=_r(),o=n.length+1,s=new Y(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=_r(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=_r(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=i)););return B.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sV(n,r));let o=this.Ir.get(n);o===void 0&&(o=ie(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.Tr=new Ye(Be.Er),this.dr=new Ye(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new xe([])),r=new Be(n,e),i=new Be(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new xe([])),r=new Be(n,e),i=new Be(n,e+1);let o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Be.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new oV(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Be(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(i=>{const o=new Be(i,0),s=new Be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Y.isDocumentKey(o)||(o=o.child(""));const s=new Be(new Y(o),0);let l=new Ye(ce);return this.br.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(u.wr)),!0)},s),B.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const o=new Be(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.Mr=e,this.docs=function(){return new Re(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():lt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Rn();const s=n.path,l=new Y(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||ID(TD(h),r)<=0||(i.has(h.key)||Ja(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GV(this)}getSize(e){return B.resolve(this.size)}}class GV extends DV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.persistence=e,this.Nr=new Hi(n=>Yf(n),Qf),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nh,this.targetCount=0,this.kr=xi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $f(0),this.Kr=!1,this.Kr=!0,this.$r=new bV,this.referenceDelegate=e(this),this.Ur=new HV(this),this.indexManager=new kV,this.remoteDocumentCache=function(i){return new BV(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new NV(n),this.Gr=new FV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new zV(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zV extends wD{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Jr=new nh,this.Yr=null}static Zr(e){return new rh(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=Y.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,j.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ih(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return W1()?8:CD($1())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new $V;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(po()<=le.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",$r(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(po()<=le.DEBUG&&W("QueryEngine","Query:",$r(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(po()<=le.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",$r(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):B.resolve())}Yi(e,n){if(Vy(n))return B.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pd(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ie(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.ts(n,l);return this.ns(n,f,s,u.readTime)?this.Yi(e,Pd(n,null,"F")):this.rs(e,f,n,u)}))})))}Zi(e,n,r,i){return Vy(n)||i.isEqual(j.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?B.resolve(null):(po()<=le.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$r(n)),this.rs(e,s,n,ED(i,-1)).next(l=>l))})}ts(e,n){let r=new Ye(H0(e));return n.forEach((i,o)=>{Ja(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return po()<=le.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",$r(n)),this.Ji.getDocumentsMatchingQuery(e,n,tr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Re(ce),this._s=new Hi(o=>Yf(o),Qf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function JV(t,e,n,r){return new WV(t,e,n,r)}async function cT(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=ie();for(const f of i){s.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(f=>({hs:f,removedBatchIds:s,addedBatchIds:l}))})})}function YV(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,f,h){const p=f.batch,m=p.keys();let v=B.resolve();return m.forEach(S=>{v=v.next(()=>h.getEntry(u,S)).next(P=>{const x=f.docVersions.get(S);me(x!==null),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),h.addEntry(P)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function dT(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function QV(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Xe.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(P,x,I){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,v,h)&&l.push(n.Ur.updateTargetData(o,v))});let u=Rn(),f=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(XV(o,s,e.documentUpdates).next(h=>{u=h.Ps,f=h.Is})),!r.isEqual(j.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.os=i,o))}function XV(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Rn();return n.forEach((l,u)=>{const f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(j.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function ZV(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jV(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Hn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Dd(t,e,n){const r=ee(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!vs(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function $y(t,e,n){const r=ee(t);let i=j.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,f,h){const p=ee(u),m=p._s.get(h);return m!==void 0?B.resolve(p.os.get(m)):p.Ur.getTargetData(f,h)}(r,s,an(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:j.min(),n?o:ie())).next(l=>(e2(r,zD(e),l),{documents:l,Ts:o})))}function e2(t,e,n){let r=t.us.get(e)||j.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Ky{constructor(){this.activeTargetIds=QD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t2{constructor(){this.so=new Ky,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ky,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl=null;function oc(){return fl===null?fl=function(){return 268435456+Math.round(2147483648*Math.random())}():fl++,"0x"+fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class o2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const l=oc(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,s),this.No(n,u,f,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw Ai("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,l){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=r2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=oc();return new Promise((s,l)=>{const u=new C0;u.setWithCredentials(!0),u.listenOnce(A0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rl.NO_ERROR:const h=u.getResponseJson();W(it,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Rl.TIMEOUT:W(it,`RPC '${e}' ${o} timed out`),l(new J(G.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const p=u.getStatus();if(W(it,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const S=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(I)>=0?I:G.UNKNOWN}(v.status);l(new J(S,v.message))}else l(new J(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(G.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(it,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);W(it,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",f,r,15)})}Bo(e,n,r){const i=oc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=N0(),l=P0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");W(it,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=s.createWebChannel(h,u);let m=!1,v=!1;const S=new i2({Io:x=>{v?W(it,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(W(it,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),W(it,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),P=(x,I,T)=>{x.listen(I,A=>{try{T(A)}catch(M){setTimeout(()=>{throw M},0)}})};return P(p,Eo.EventType.OPEN,()=>{v||(W(it,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),P(p,Eo.EventType.CLOSE,()=>{v||(v=!0,W(it,`RPC '${e}' stream ${i} transport closed`),S.So())}),P(p,Eo.EventType.ERROR,x=>{v||(v=!0,Ai(it,`RPC '${e}' stream ${i} transport errored:`,x),S.So(new J(G.UNAVAILABLE,"The operation could not be completed")))}),P(p,Eo.EventType.MESSAGE,x=>{var I;if(!v){const T=x.data[0];me(!!T);const A=T,M=A.error||((I=A[0])===null||I===void 0?void 0:I.error);if(M){W(it,`RPC '${e}' stream ${i} received error:`,M);const V=M.status;let b=function(w){const R=De[w];if(R!==void 0)return eT(R)}(V),C=M.message;b===void 0&&(b=G.INTERNAL,C="Unknown error status: "+V+" with message "+M.message),v=!0,S.So(new J(b,C)),p.close()}else W(it,`RPC '${e}' stream ${i} received:`,T),S.bo(T)}}),P(l,R0.STAT_EVENT,x=>{x.stat===Sd.PROXY?W(it,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Sd.NOPROXY&&W(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){return new mV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r,i,o,s,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new J(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s2 extends hT{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vV(this.serializer,e),r=function(o){if(!("targetChange"in o))return j.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?un(s.readTime):j.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Md(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Rd(u)?{documents:TV(o,u)}:{query:IV(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=rT(o,s.resumeToken);const f=Nd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(j.min())>0){l.readTime=va(o,s.snapshotVersion.toTimestamp());const f=Nd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=wV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Md(this.serializer),n.removeTarget=e,this.a_(n)}}class l2 extends hT{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=EV(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Md(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_V(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,xd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(G.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,xd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(G.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class u2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(An(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Fr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const f=ee(u);f.L_.add(4),await Ts(f),f.q_.set("Unknown"),f.L_.delete(4),await ja(f)}(this))})}),this.q_=new u2(r,i)}}async function ja(t){if(Fr(t))for(const e of t.B_)await e(!0)}async function Ts(t){for(const e of t.B_)await e(!1)}function pT(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ah(n)?lh(n):qi(n).r_()&&sh(n,e))}function oh(t,e){const n=ee(t),r=qi(n);n.N_.delete(e),r.r_()&&mT(n,e),n.N_.size===0&&(r.r_()?r.o_():Fr(n)&&n.q_.set("Unknown"))}function sh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qi(t).A_(e)}function mT(t,e){t.Q_.xe(e),qi(t).R_(e)}function lh(t){t.Q_=new dV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qi(t).start(),t.q_.v_()}function ah(t){return Fr(t)&&!qi(t).n_()&&t.N_.size>0}function Fr(t){return ee(t).L_.size===0}function gT(t){t.Q_=void 0}async function d2(t){t.q_.set("Online")}async function f2(t){t.N_.forEach((e,n)=>{sh(t,e)})}async function h2(t,e){gT(t),ah(t)?(t.q_.M_(e),lh(t)):t.q_.set("Unknown")}async function p2(t,e,n){if(t.q_.set("Online"),e instanceof nT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _a(t,r)}else if(e instanceof xl?t.Q_.Ke(e):e instanceof tT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(j.min()))try{const r=await dT(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.N_.get(f);h&&o.N_.set(f,h.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,f)=>{const h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),mT(o,u);const p=new Hn(h.target,u,f,h.sequenceNumber);sh(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await _a(t,r)}}async function _a(t,e,n){if(!vs(e))throw e;t.L_.add(1),await Ts(t),t.q_.set("Offline"),n||(n=()=>dT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ja(t)})}function yT(t,e){return e().catch(n=>_a(t,n,e))}async function eu(t){const e=ee(t),n=rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;m2(e);)try{const i=await ZV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,g2(e,i)}catch(i){await _a(e,i)}vT(e)&&_T(e)}function m2(t){return Fr(t)&&t.O_.length<10}function g2(t,e){t.O_.push(e);const n=rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vT(t){return Fr(t)&&!rr(t).n_()&&t.O_.length>0}function _T(t){rr(t).start()}async function y2(t){rr(t).p_()}async function v2(t){const e=rr(t);for(const n of t.O_)e.m_(n.mutations)}async function _2(t,e,n){const r=t.O_.shift(),i=jf.from(r,e,n);await yT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await eu(t)}async function E2(t,e){e&&rr(t).V_&&await async function(r,i){if(function(s){return aV(s)&&s!==G.ABORTED}(i.code)){const o=r.O_.shift();rr(r).s_(),await yT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await eu(r)}}(t,e),vT(t)&&_T(t)}async function Jy(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Fr(n);n.L_.add(3),await Ts(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ja(n)}async function T2(t,e){const n=ee(t);e?(n.L_.delete(2),await ja(n)):e||(n.L_.add(2),await Ts(n),n.q_.set("Unknown"))}function qi(t){return t.K_||(t.K_=function(n,r,i){const o=ee(n);return o.w_(),new s2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:d2.bind(null,t),Ro:f2.bind(null,t),mo:h2.bind(null,t),d_:p2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ah(t)?lh(t):t.q_.set("Unknown")):(await t.K_.stop(),gT(t))})),t.K_}function rr(t){return t.U_||(t.U_=function(n,r,i){const o=ee(n);return o.w_(),new l2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:y2.bind(null,t),mo:E2.bind(null,t),f_:v2.bind(null,t),g_:_2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await eu(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new uh(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ch(t,e){if(An("AsyncQueue",`${e}: ${t}`),vs(t))return new J(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new yi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.W_=new Re(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ki{constructor(e,n,r,i,o,s,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new ki(e,n,yi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class S2{constructor(){this.queries=Qy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),o=i.queries;i.queries=Qy(),o.forEach((s,l)=>{for(const u of l.j_)u.onError(r)})})(this,new J(G.ABORTED,"Firestore shutting down"))}}function Qy(){return new Hi(t=>G0(t),Wa)}async function w2(t,e){const n=ee(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new I2,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=ch(s,`Initialization of query '${$r(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&dh(n)}async function C2(t,e){const n=ee(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A2(t,e){const n=ee(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&dh(n)}function R2(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function dh(t){t.Y_.forEach(e=>{e.next()})}var Vd,Xy;(Xy=Vd||(Vd={})).ea="default",Xy.Cache="cache";class P2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class TT{constructor(e){this.key=e}}class N2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=H0(e),this.Ra=new yi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Yy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=Ja(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;m&&v?m.data.isEqual(v.data)?S!==P&&(r.track({type:3,doc:v}),x=!0):this.ga(m,v)||(r.track({type:2,doc:v}),x=!0,(u&&this.Aa(v,u)>0||f&&this.Aa(v,f)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),x=!0):m&&!v&&(r.track({type:1,doc:m}),x=!0,(u||f)&&(l=!0)),x&&(v?(s=s.add(v),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(v,S){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return P(v)-P(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,f=u!==this.Ea;return this.Ea=u,s.length!==0||f?{snapshot:new ki(this.query,e.Ra,o,s,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new TT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ET(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ki.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class x2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class k2{constructor(e){this.key=e,this.va=!1}}class M2{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hi(l=>G0(l),Wa),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(Y.comparator),this.Na=new Map,this.La=new nh,this.Ba={},this.ka=new Map,this.qa=xi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function D2(t,e,n=!0){const r=RT(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await IT(r,e,n,!0),i}async function V2(t,e){const n=RT(t);await IT(n,e,!0,!1)}async function IT(t,e,n,r){const i=await jV(t.localStore,an(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await L2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&pT(t.remoteStore,i),l}async function L2(t,e,n,r,i){t.Ka=(p,m,v)=>async function(P,x,I,T){let A=x.view.ma(I);A.ns&&(A=await $y(P.localStore,x.query,!1).then(({documents:C})=>x.view.ma(C,A)));const M=T&&T.targetChanges.get(x.targetId),V=T&&T.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(A,P.isPrimaryClient,M,V);return jy(P,x.targetId,b.wa),b.snapshot}(t,p,m,v);const o=await $y(t.localStore,e,!0),s=new N2(e,o.Ts),l=s.ma(o.documents),u=Es.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,u);jy(t,n,f.wa);const h=new x2(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function F2(t,e,n){const r=ee(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Wa(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oh(r.remoteStore,i.targetId),Ld(r,i.targetId)}).catch(ys)):(Ld(r,i.targetId),await Dd(r.localStore,i.targetId,!0))}async function U2(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oh(n.remoteStore,r.targetId))}async function b2(t,e,n){const r=$2(t);try{const i=await function(s,l){const u=ee(s),f=Oe.now(),h=l.reduce((v,S)=>v.add(S.key),ie());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=Rn(),P=ie();return u.cs.getEntries(v,h).next(x=>{S=x,S.forEach((I,T)=>{T.isValidDocument()||(P=P.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(x=>{p=x;const I=[];for(const T of l){const A=rV(T,p.get(T.key).overlayedDocument);A!=null&&I.push(new Lr(T.key,A,V0(A.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(v,f,I,l)}).next(x=>{m=x;const I=x.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(v,x.batchId,I)})}).then(()=>({batchId:m.batchId,changes:z0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let f=s.Ba[s.currentUser.toKey()];f||(f=new Re(ce)),f=f.insert(l,u),s.Ba[s.currentUser.toKey()]=f}(r,i.batchId,n),await Is(r,i.changes),await eu(r.remoteStore)}catch(i){const o=ch(i,"Failed to persist write");n.reject(o)}}async function ST(t,e){const n=ee(t);try{const r=await QV(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?me(s.va):i.removedDocuments.size>0&&(me(s.va),s.va=!1))}),await Is(n,r,e)}catch(r){await ys(r)}}function Zy(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=ee(s);u.onlineState=l;let f=!1;u.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(l)&&(f=!0)}),f&&dh(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O2(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Re(Y.comparator);s=s.insert(o,lt.newNoDocument(o,j.min()));const l=ie().add(o),u=new Xa(j.min(),new Map,new Re(ce),s,l);await ST(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),fh(r)}else await Dd(r.localStore,e,!1).then(()=>Ld(r,e,n)).catch(ys)}async function B2(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await YV(n.localStore,e);CT(n,r,null),wT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Is(n,i)}catch(i){await ys(i)}}async function G2(t,e,n){const r=ee(t);try{const i=await function(s,l){const u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,l).next(p=>(me(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,e);CT(r,e,n),wT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Is(r,i)}catch(i){await ys(i)}}function wT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CT(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||AT(t,r)})}function AT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(oh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fh(t))}function jy(t,e,n){for(const r of n)r instanceof ET?(t.La.addReference(r.key,e),H2(t,r)):r instanceof TT?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||AT(t,r.key)):X()}function H2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),fh(t))}function fh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new k2(n)),t.Oa=t.Oa.insert(n,r),pT(t.remoteStore,new Hn(an(Xf(n.path)),r,"TargetPurposeLimboResolution",$f.oe))}}async function Is(t,e,n){const r=ee(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{s.push(r.Ka(u,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){i.push(f);const p=ih.Wi(u.targetId,f);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(u,f){const h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(f,m=>B.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>B.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!vs(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const m=p.targetId;if(!p.fromCache){const v=h.os.get(m),S=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,P)}}}(r.localStore,o))}async function q2(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await cT(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new J(G.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Is(n,r.hs)}}function z2(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const l=n.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function RT(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ST.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.Ca.d_=A2.bind(null,e.eventManager),e.Ca.$a=R2.bind(null,e.eventManager),e}function $2(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G2.bind(null,e),e}class Ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Za(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return JV(this.persistence,new KV,e.initialUser,this.serializer)}Ga(e){return new qV(rh.Zr,this.serializer)}Wa(e){return new t2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ea.provider={build:()=>new Ea};class Fd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=q2.bind(null,this.syncEngine),await T2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S2}()}createDatastore(e){const n=Za(e.databaseInfo.databaseId),r=function(o){return new o2(o)}(e.databaseInfo);return function(o,s,l,u){return new a2(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new c2(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Zy(this.syncEngine,n,0),function(){return Wy.D()?new Wy:new n2}())}createSyncEngine(e,n){return function(i,o,s,l,u,f,h){const p=new M2(i,o,s,l,u,f);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ee(i);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Ts(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=k0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ch(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lc(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ev(t,e){t.asyncQueue.verifyOperationInProgress();const n=await J2(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jy(e.remoteStore,i)),t._onlineComponents=e}async function J2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await lc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await lc(t,new Ea)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await lc(t,new Ea);return t._offlineComponents}async function PT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await ev(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await ev(t,new Fd))),t._onlineComponents}function Y2(t){return PT(t).then(e=>e.syncEngine)}async function tv(t){const e=await PT(t),n=e.eventManager;return n.onListen=D2.bind(null,e.syncEngine),n.onUnlisten=F2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e,n){if(!n)throw new J(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X2(t,e,n,r){if(e===!0&&r===!0)throw new J(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rv(t){if(!Y.isDocumentKey(t))throw new J(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function vi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(t);throw new J(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ph{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dD;switch(r.type){case"firstParty":return new mD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nv.get(n);r&&(W("ComponentProvider","Removing Datastore"),nv.delete(n),r.terminate())}(this),Promise.resolve()}}function Z2(t,e,n,r={}){var i;const o=(t=vi(t,ph))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ot.MOCK_USER;else{l=z1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new J(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ot(f)}t._authCredentials=new fD(new x0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tu(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class cs extends tu{constructor(e,n,r){super(e,n,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Y(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function xT(t,e,...n){if(t=ts(t),arguments.length===1&&(e=k0.newId()),Q2("doc","path",e),t instanceof ph){const r=xe.fromString(e,...n);return rv(r),new Ut(t,null,new Y(r))}{if(!(t instanceof Ut||t instanceof cs))throw new J(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return rv(r),new Ut(t.firestore,t instanceof cs?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fT(this,"async_queue_retry"),this.Vu=()=>{const r=sc();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vs(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw An("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=uh.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function sv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ta extends ph{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ov,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ov(e),this._firestoreClient=void 0,await e}}}function j2(t,e){const n=typeof t=="object"?t:jM(),r=typeof t=="string"?t:"(default)",i=YM(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=H1("firestore");o&&Z2(i,...o)}return i}function kT(t){if(t._terminated)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eL(t),t._firestoreClient}function eL(t){var e,n,r;const i=t._freezeSettings(),o=function(l,u,f,h){return new PD(l,u,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new W2(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(Xe.fromBase64String(e))}catch(n){throw new J(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new _s(e,this.data,n,this.fieldTransforms)}}function DT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class vh{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ia(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DT(this.Cu)&&tL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Za(e)}Qu(e,n,r,i=!1){return new vh({Cu:e,methodName:n,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iL(t){const e=t._freezeSettings(),n=Za(t._databaseId);return new rL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oL(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",s,r);const l=LT(r,s);let u,f;if(o.merge)u=new Yt(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=sL(e,p,n);if(!s.contains(m))throw new J(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);aL(h,m)||h.push(m)}u=new Yt(h),f=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=s.fieldTransforms;return new nL(new Dt(l),u,f)}function VT(t,e){if(FT(t=ts(t)))return UT("Unsupported field value:",e,t),LT(t,e);if(t instanceof MT)return function(r,i){if(!DT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=VT(l,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ts(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Oe.fromDate(r);return{timestampValue:va(i.serializer,o)}}if(r instanceof Oe){const o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:va(i.serializer,o)}}if(r instanceof gh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:rT(i.serializer,r._byteString)};if(r instanceof Ut){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:th(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yh)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Zf(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${hh(r)}`)}(t,e)}function LT(t,e){const n={};return M0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,(r,i)=>{const o=VT(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof gh||t instanceof Mi||t instanceof Ut||t instanceof MT||t instanceof yh)}function UT(t,e,n){if(!FT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=hh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sL(t,e,n){if((e=ts(e))instanceof mh)return e._internalPath;if(typeof e=="string")return bT(t,e);throw Ia("Field path arguments must be of type string or ",t,!1,void 0,n)}const lL=new RegExp("[~\\*/\\[\\]]");function bT(t,e,n){if(e.search(lL)>=0)throw Ia(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mh(...e.split("."))._internalPath}catch{throw Ia(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ia(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(G.INVALID_ARGUMENT,l+t+u)}function aL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uL extends OT{data(){return super.data()}}function BT(t,e){return typeof e=="string"?bT(t,e):e instanceof mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dL{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new yh(o)}convertGeoPoint(e){return new gh(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(os(e));default:return null}}convertTimestamp(e){const n=nr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);me(uT(r));const i=new ss(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||An(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GT extends OT{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(BT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kl extends GT{data(e={}){return super.data(e)}}class hL{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new So(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kl(this._firestore,this._userDataWriter,r.key,r,new So(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new So(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new So(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:pL(l.type),doc:u,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class HT extends dL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function mL(t,e,n){t=vi(t,Ut);const r=vi(t.firestore,Ta),i=fL(t.converter,e);return yL(r,[oL(iL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,_n.none())])}function gL(t,...e){var n,r,i;t=ts(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||sv(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sv(e[s])){const p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,f,h;if(t instanceof Ut)f=vi(t.firestore,Ta),h=Xf(t._key.path),u={next:p=>{e[s]&&e[s](vL(f,t,p))},error:e[s+1],complete:e[s+2]};else{const p=vi(t,tu);f=vi(p.firestore,Ta),h=p._query;const m=new HT(f);u={next:v=>{e[s]&&e[s](new hL(f,m,p,v))},error:e[s+1],complete:e[s+2]},cL(t._query)}return function(m,v,S,P){const x=new K2(P),I=new P2(v,x,S);return m.asyncQueue.enqueueAndForget(async()=>w2(await tv(m),I)),()=>{x.Za(),m.asyncQueue.enqueueAndForget(async()=>C2(await tv(m),I))}}(kT(f),h,l,u)}function yL(t,e){return function(r,i){const o=new Sr;return r.asyncQueue.enqueueAndForget(async()=>b2(await Y2(r),i,o)),o.promise}(kT(t),e)}function vL(t,e,n){const r=n.docs.get(e._key),i=new HT(t);return new GT(t,i,e._key,r,new So(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bi=i})(ZM),fa(new ns("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Ta(new hD(r.getProvider("auth-internal")),new yD(r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new J(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(f.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),gi(wy,"4.7.3",e),gi(wy,"4.7.3","esm2017")})();var Hr={VITE_FIREBASE_API_KEY:"AIzaSyAaX3eVVAnxFxUg4LXJPGPCw67RPKmCLTw",VITE_FIREBASE_AUTH_DOMAIN:"coffe-track.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"coffe-track",VITE_FIREBASE_STORAGE_BUCKET:"coffe-track.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"1089989641871",VITE_FIREBASE_APP_ID:"1:1089989641871:web:ea52134e07e9cb7d5552fa"};const ac={apiKey:Hr.VITE_FIREBASE_API_KEY,authDomain:Hr.VITE_FIREBASE_AUTH_DOMAIN,projectId:Hr.VITE_FIREBASE_PROJECT_ID,storageBucket:Hr.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Hr.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Hr.VITE_FIREBASE_APP_ID},qT="kahve_takip",zT="oda_2012_listesi",Ml="office-coffee-data";let ds=null,_h=!1;if(ac.apiKey&&ac.projectId)try{const t=T0(ac);ds=j2(t),_h=!0,console.log(" Firebase environment deikenleri ile balatld.")}catch(t){console.error("Firebase balatma hatas:",t)}else console.warn(" Firebase config bulunamad. Uygulama sadece LocalStorage modunda alacak.");const qr=async(t,e)=>{const n={people:t,expenses:e,lastUpdated:new Date().toISOString()};try{localStorage.setItem(Ml,JSON.stringify(n))}catch(r){console.error("LocalStorage save error:",r)}if(_h&&ds)try{await mL(xT(ds,qT,zT),n)}catch(r){console.error("Firebase save error:",r)}},_L=t=>{const e=()=>{const r=localStorage.getItem(Ml);if(r)try{const i=JSON.parse(r);Array.isArray(i)?t(i,[]):t(i.people||[],i.expenses||[])}catch(i){console.error("Local data parse error",i)}};if(e(),_h&&ds)return gL(xT(ds,qT,zT),i=>{if(i.exists()){const o=i.data(),s=o.people||(Array.isArray(o)?o:[]),l=o.expenses||[];localStorage.setItem(Ml,JSON.stringify({people:s,expenses:l,lastUpdated:new Date().toISOString()})),console.log(" Firebase'den gncel veri geldi."),t(s,l)}},i=>{console.error("Firebase dinleme hatas:",i)});const n=r=>{r.key===Ml&&r.newValue&&e()};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},lv="office-coffee-settings",av=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2),EL=()=>{const[t,e]=Te.useState([]),[n,r]=Te.useState([]),[i,o]=Te.useState("income"),[s,l]=Te.useState(!0),[u,f]=Te.useState(""),[h,p]=Te.useState(""),[m,v]=Te.useState(""),[S,P]=Te.useState(50),[x,I]=Te.useState(0),[T,A]=Te.useState(!1),[M,V]=Te.useState(null),[b,C]=Te.useState(!1);Te.useEffect(()=>{const te=localStorage.getItem(lv);if(te)try{const O=JSON.parse(te);P(O.price||50),I(O.consumption||0)}catch(O){console.error("Failed to load settings",O)}l(!0);const ne=_L((O,K)=>{e(O),r(K),l(!1)});return()=>ne()},[]),Te.useEffect(()=>{localStorage.setItem(lv,JSON.stringify({price:S,consumption:x}))},[S,x]);const E=Te.useMemo(()=>{const te=t.filter(K=>K.hasPaid),ne=te.length*S,O=n.reduce((K,Q)=>K+Q.amount,0);return{totalPeople:t.length,paidCount:te.length,unpaidCount:t.length-te.length,totalCollected:ne,totalSpent:O,remainingBalance:ne-O}},[t,n,S]),w=te=>{if(te.preventDefault(),i==="income"){if(!u.trim())return;const ne={id:av(),name:u.trim(),hasPaid:!1},O=[...t,ne];e(O),qr(O,n),f("")}else{if(!h.trim()||!m)return;const ne={id:av(),description:h.trim(),amount:Number(m),date:new Date().toISOString()},O=[...n,ne];r(O),qr(t,O),p(""),v("")}},R=te=>{const ne=t.map(O=>O.id===te?{...O,hasPaid:!O.hasPaid,datePaid:O.hasPaid?void 0:new Date().toISOString()}:O);e(ne),qr(ne,n)},k=te=>{if(window.confirm("Kii silinecek. Onaylyor musunuz?")){const ne=t.filter(O=>O.id!==te);e(ne),qr(ne,n)}},D=te=>{if(window.confirm("Harcama kayd silinecek. Onaylyor musunuz?")){const ne=n.filter(O=>O.id!==te);r(ne),qr(t,ne)}},N=(te,ne)=>{const O=t.map(K=>K.id===te?{...K,satisfaction:ne}:K);e(O),qr(O,n)},fe=()=>{let ne="\uFEFF";if(i==="income"){const ge=`sim,Durum,deme Tarihi,Tutar,Gr
`,he=t.map(se=>{const St=se.hasPaid?"DED":"DEMED",Gt=se.datePaid?new Date(se.datePaid).toLocaleDateString("tr-TR"):"-",Ht=se.hasPaid?S:0,qt=se.satisfaction?se.satisfaction.replace(/"/g,'""'):"-";return`"${se.name}","${St}","${Gt}","${Ht}","${qt}"`}).join(`
`);ne+=ge+he}else{const ge=`Aklama,Tarih,Tutar
`,he=n.map(se=>{const St=new Date(se.date).toLocaleDateString("tr-TR");return`"${se.description}","${St}","${se.amount}"`}).join(`
`);ne+=ge+he}const O=new Blob([ne],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(O),Q=document.createElement("a");Q.setAttribute("href",K),Q.setAttribute("download",`KAHVE_${i==="income"?"GELIR":"GIDER"}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},Ze=async()=>{C(!0),V(null);const te=t.filter(K=>!K.hasPaid),ne=t.filter(K=>K.hasPaid),O=await M1(te,ne);V(O),C(!1)};return F.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] text-[#332B26] font-sans selection:bg-[#FAEDCD] selection:text-[#7F5539]",children:[F.jsxs("div",{className:"w-full bg-white/80 backdrop-blur-sm border-b border-theme-100 py-2 px-4 flex justify-between items-center text-[10px] uppercase tracking-widest shadow-sm sticky top-0 z-50",children:[F.jsx("span",{className:"text-theme-400 font-bold",children:"zmir B.B.  Oda 2012"}),F.jsx("div",{className:"flex items-center gap-2",children:s?F.jsxs(F.Fragment,{children:[F.jsx(Pm,{size:12,className:"animate-spin text-accent-DEFAULT"})," Ykleniyor"]}):F.jsxs(F.Fragment,{children:[F.jsx(cC,{size:12,className:"text-[#A5A58D]"})," Sistem Aktif"]})})]}),F.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-6 py-10",children:[F.jsxs("header",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-6",children:[F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx("div",{className:"bg-gradient-to-br from-[#D4A373] to-[#B08968] p-4 rounded-3xl text-white shadow-lg shadow-[#D4A373]/30",children:F.jsx(ra,{size:40,strokeWidth:1.5})}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-xs font-bold text-accent-DEFAULT uppercase tracking-[0.2em] mb-1",children:"Ofis i Dayanma"}),F.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-theme-800 tracking-tight leading-none",children:["Filtre Kahve",F.jsx("br",{}),F.jsx("span",{className:"text-[#B0A090]",children:"Fonu."})]})]})]}),F.jsxs("div",{className:"flex gap-2",children:[F.jsx("button",{onClick:()=>A(!T),className:"px-5 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider bg-white text-theme-500 border border-theme-100 hover:border-accent-DEFAULT hover:text-accent-DEFAULT transition-all flex items-center gap-2",children:F.jsx(xm,{size:16})}),F.jsxs("button",{onClick:fe,className:"px-5 py-2.5 rounded-xl text-sm font-bold uppercase tracking-wider bg-white text-theme-500 border border-theme-100 hover:border-accent-DEFAULT hover:text-accent-DEFAULT transition-all flex items-center gap-2",children:[F.jsx(nC,{size:16})," Excel"]})]})]}),F.jsx(mC,{}),T&&F.jsxs("div",{className:"mb-8 bg-white p-6 border border-theme-100 shadow-xl rounded-2xl animate-in fade-in slide-in-from-top-2",children:[F.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b border-theme-50",children:[F.jsx(xm,{size:18,className:"text-accent-DEFAULT"}),F.jsx("span",{className:"font-bold uppercase tracking-widest text-theme-500 text-sm",children:"Parametreler"})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[F.jsxs("div",{className:"group",children:[F.jsx("label",{className:"block text-xs font-bold text-theme-400 uppercase tracking-wider mb-2",children:"Kii Ba Tutar (TL)"}),F.jsx("input",{type:"number",value:S,onChange:te=>P(Number(te.target.value)),className:"w-full bg-[#F9F7F5] border border-theme-200 rounded-xl outline-none py-3 px-4 text-lg font-mono text-theme-800"})]}),F.jsxs("div",{className:"group",children:[F.jsx("label",{className:"block text-xs font-bold text-theme-400 uppercase tracking-wider mb-2",children:"Aylk Hedef (Gr)"}),F.jsx("input",{type:"number",value:x,onChange:te=>I(Number(te.target.value)),className:"w-full bg-[#F9F7F5] border border-theme-200 rounded-xl outline-none py-3 px-4 text-lg font-mono text-theme-800"})]})]}),F.jsx("div",{className:"mt-6 flex justify-end",children:F.jsx("button",{onClick:()=>A(!1),className:"bg-theme-800 text-white hover:bg-accent-DEFAULT px-8 py-3 rounded-xl font-bold uppercase tracking-wider transition-colors text-xs shadow-lg shadow-theme-200",children:"Kaydet & Kapat"})})]}),F.jsx(fC,{stats:E}),F.jsxs("div",{className:"flex gap-4 mb-4 border-b border-theme-200",children:[F.jsx("button",{onClick:()=>o("income"),className:`pb-2 px-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${i==="income"?"border-accent-DEFAULT text-accent-DEFAULT":"border-transparent text-theme-400 hover:text-theme-600"}`,children:"deme Listesi"}),F.jsx("button",{onClick:()=>o("expense"),className:`pb-2 px-4 text-sm font-bold uppercase tracking-wider transition-all border-b-2 ${i==="expense"?"border-[#E5989B] text-[#E5989B]":"border-transparent text-theme-400 hover:text-theme-600"}`,children:"Harcamalar"})]}),F.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8",children:[F.jsx("div",{className:"lg:col-span-2",children:F.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[i==="income"?F.jsx("input",{type:"text",value:u,onChange:te=>f(te.target.value),placeholder:"Yeni sim Ekle...",className:"flex-1 bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-accent-DEFAULT focus:ring-2 focus:ring-accent-light transition-all font-bold text-sm tracking-wide shadow-sm"}):F.jsxs("div",{className:"flex-1 flex gap-2",children:[F.jsx("input",{type:"text",value:h,onChange:te=>p(te.target.value),placeholder:"Ne alnd? (rn: Filtre kad)",className:"flex-[2] bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-[#E5989B] focus:ring-2 focus:ring-[#FFE5E5] transition-all font-bold text-sm tracking-wide shadow-sm"}),F.jsx("input",{type:"number",value:m,onChange:te=>v(te.target.value),placeholder:"Tutar",className:"flex-1 bg-white border border-theme-200 rounded-2xl p-5 text-theme-800 placeholder:text-theme-300 focus:outline-none focus:border-[#E5989B] focus:ring-2 focus:ring-[#FFE5E5] transition-all font-bold text-sm tracking-wide shadow-sm"})]}),F.jsx("button",{type:"submit",className:`text-white px-8 rounded-2xl transition-colors shadow-md shadow-theme-200 ${i==="income"?"bg-theme-800 hover:bg-accent-DEFAULT":"bg-[#E5989B] hover:bg-[#D4A373]"}`,children:F.jsx(oC,{size:24})})]})}),F.jsx("div",{className:"lg:col-span-1",children:F.jsxs("button",{onClick:Ze,disabled:b||t.length===0,className:"w-full h-full flex items-center justify-between px-6 py-4 bg-white border border-theme-200 rounded-2xl hover:border-accent-DEFAULT hover:shadow-md transition-all group disabled:opacity-50",children:[F.jsxs("div",{className:"text-left",children:[F.jsx("span",{className:"block text-[10px] font-bold uppercase text-theme-400 tracking-widest group-hover:text-accent-DEFAULT transition-colors",children:"Yapay Zeka"}),F.jsx("span",{className:"font-bold text-theme-600 text-sm",children:"Mesaj Olutur"})]}),b?F.jsx(Pm,{className:"animate-spin text-accent-DEFAULT"}):F.jsx(Mm,{size:20,className:"text-[#E5989B] group-hover:text-[#D4A373]"})]})})]}),M&&F.jsxs("div",{className:"mb-8 bg-[#FFF0F3] text-[#6D3B3E] p-8 rounded-2xl border border-[#FFCCD5] relative overflow-hidden",children:[F.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:F.jsx(Mm,{size:120})}),F.jsxs("p",{className:"font-medium text-xl font-serif italic relative z-10 leading-relaxed",children:['"',M,'"']})]}),i==="income"?F.jsx(hC,{people:t,onTogglePay:R,onDelete:k,onRate:N}):F.jsx(pC,{expenses:n,onDelete:D}),F.jsxs("footer",{className:"mt-16 border-t border-theme-200 pt-8 text-center",children:[F.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-white rounded-full mb-4 shadow-sm border border-theme-50",children:F.jsx(ra,{size:20,className:"text-accent-DEFAULT"})}),F.jsx("p",{className:"text-xs font-bold text-theme-400 uppercase tracking-[0.2em]",children:"zmir Bykehir Belediyesi  Oda 2012"}),F.jsx("p",{className:"text-[10px] text-theme-300 mt-2",children:"Afiyet Olsun."})]})]})]})},$T=document.getElementById("root");if(!$T)throw new Error("Could not find root element to mount to");const TL=uc.createRoot($T);TL.render(F.jsx(OI.StrictMode,{children:F.jsx(EL,{})}));
